(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var si={},Uv={get exports(){return si},set exports(t){si=t}},os={},D={},Lv={get exports(){return D},set exports(t){D=t}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ri=Symbol.for("react.element"),Fv=Symbol.for("react.portal"),Dv=Symbol.for("react.fragment"),Mv=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),Vv=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),Wv=Symbol.for("react.suspense"),Gv=Symbol.for("react.memo"),Yv=Symbol.for("react.lazy"),ic=Symbol.iterator;function Hv(t){return t===null||typeof t!="object"?null:(t=ic&&t[ic]||t["@@iterator"],typeof t=="function"?t:null)}var vd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yd=Object.assign,gd={};function kr(t,e,n){this.props=t,this.context=e,this.refs=gd,this.updater=n||vd}kr.prototype.isReactComponent={};kr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function md(){}md.prototype=kr.prototype;function Yl(t,e,n){this.props=t,this.context=e,this.refs=gd,this.updater=n||vd}var Hl=Yl.prototype=new md;Hl.constructor=Yl;yd(Hl,kr.prototype);Hl.isPureReactComponent=!0;var oc=Array.isArray,wd=Object.prototype.hasOwnProperty,ql={current:null},_d={key:!0,ref:!0,__self:!0,__source:!0};function Ed(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)wd.call(e,r)&&!_d.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ri,type:t,key:o,ref:s,props:i,_owner:ql.current}}function qv(t,e){return{$$typeof:Ri,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ql(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ri}function Qv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sc=/\/+/g;function Is(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qv(""+t.key):e.toString(36)}function po(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ri:case Fv:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Is(s,0):r,oc(i)?(n="",t!=null&&(n=t.replace(sc,"$&/")+"/"),po(i,e,n,"",function(u){return u})):i!=null&&(Ql(i)&&(i=qv(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(sc,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",oc(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Is(o,a);s+=po(o,e,n,l,i)}else if(l=Hv(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Is(o,a++),s+=po(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Gi(t,e,n){if(t==null)return t;var r=[],i=0;return po(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Jv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Le={current:null},fo={transition:null},Xv={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:fo,ReactCurrentOwner:ql};G.Children={map:Gi,forEach:function(t,e,n){Gi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gi(t,function(){e++}),e},toArray:function(t){return Gi(t,function(e){return e})||[]},only:function(t){if(!Ql(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=kr;G.Fragment=Dv;G.Profiler=Bv;G.PureComponent=Yl;G.StrictMode=Mv;G.Suspense=Wv;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xv;G.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yd({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=ql.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wd.call(e,l)&&!_d.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ri,type:t.type,key:i,ref:o,props:r,_owner:s}};G.createContext=function(t){return t={$$typeof:Vv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zv,_context:t},t.Consumer=t};G.createElement=Ed;G.createFactory=function(t){var e=Ed.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:$v,render:t}};G.isValidElement=Ql;G.lazy=function(t){return{$$typeof:Yv,_payload:{_status:-1,_result:t},_init:Jv}};G.memo=function(t,e){return{$$typeof:Gv,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=fo.transition;fo.transition={};try{t()}finally{fo.transition=e}};G.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};G.useCallback=function(t,e){return Le.current.useCallback(t,e)};G.useContext=function(t){return Le.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return Le.current.useDeferredValue(t)};G.useEffect=function(t,e){return Le.current.useEffect(t,e)};G.useId=function(){return Le.current.useId()};G.useImperativeHandle=function(t,e,n){return Le.current.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return Le.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return Le.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return Le.current.useMemo(t,e)};G.useReducer=function(t,e,n){return Le.current.useReducer(t,e,n)};G.useRef=function(t){return Le.current.useRef(t)};G.useState=function(t){return Le.current.useState(t)};G.useSyncExternalStore=function(t,e,n){return Le.current.useSyncExternalStore(t,e,n)};G.useTransition=function(){return Le.current.useTransition()};G.version="18.2.0";(function(t){t.exports=G})(Lv);const en=hd(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv=D,Zv=Symbol.for("react.element"),ey=Symbol.for("react.fragment"),ty=Object.prototype.hasOwnProperty,ny=Kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ry={key:!0,ref:!0,__self:!0,__source:!0};function bd(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)ty.call(e,r)&&!ry.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Zv,type:t,key:o,ref:s,props:i,_owner:ny.current}}os.Fragment=ey;os.jsx=bd;os.jsxs=bd;(function(t){t.exports=os})(Uv);const Jl=si.Fragment,F=si.jsx,je=si.jsxs;var Na={},iy={get exports(){return Na},set exports(t){Na=t}},Ze={},Aa={},oy={get exports(){return Aa},set exports(t){Aa=t}},Sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,M){var $=A.length;A.push(M);e:for(;0<$;){var le=$-1>>>1,me=A[le];if(0<i(me,M))A[le]=M,A[$]=me,$=le;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var M=A[0],$=A.pop();if($!==M){A[0]=$;e:for(var le=0,me=A.length,$i=me>>>1;le<$i;){var _n=2*(le+1)-1,As=A[_n],En=_n+1,Wi=A[En];if(0>i(As,$))En<me&&0>i(Wi,As)?(A[le]=Wi,A[En]=$,le=En):(A[le]=As,A[_n]=$,le=_n);else if(En<me&&0>i(Wi,$))A[le]=Wi,A[En]=$,le=En;else break e}}return M}function i(A,M){var $=A.sortIndex-M.sortIndex;return $!==0?$:A.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,p=null,d=3,y=!1,v=!1,m=!1,P=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(A){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=A)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function w(A){if(m=!1,g(A),!v)if(n(l)!==null)v=!0,Rs(O);else{var M=n(u);M!==null&&Ns(w,M.startTime-A)}}function O(A,M){v=!1,m&&(m=!1,h(T),T=-1),y=!0;var $=d;try{for(g(M),p=n(l);p!==null&&(!(p.expirationTime>M)||A&&!ge());){var le=p.callback;if(typeof le=="function"){p.callback=null,d=p.priorityLevel;var me=le(p.expirationTime<=M);M=t.unstable_now(),typeof me=="function"?p.callback=me:p===n(l)&&r(l),g(M)}else r(l);p=n(l)}if(p!==null)var $i=!0;else{var _n=n(u);_n!==null&&Ns(w,_n.startTime-M),$i=!1}return $i}finally{p=null,d=$,y=!1}}var x=!1,k=null,T=-1,H=5,I=-1;function ge(){return!(t.unstable_now()-I<H)}function We(){if(k!==null){var A=t.unstable_now();I=A;var M=!0;try{M=k(!0,A)}finally{M?wn():(x=!1,k=null)}}else x=!1}var wn;if(typeof f=="function")wn=function(){f(We)};else if(typeof MessageChannel<"u"){var Gn=new MessageChannel,jv=Gn.port2;Gn.port1.onmessage=We,wn=function(){jv.postMessage(null)}}else wn=function(){P(We,0)};function Rs(A){k=A,x||(x=!0,wn())}function Ns(A,M){T=P(function(){A(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,Rs(O))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var $=d;d=M;try{return A()}finally{d=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,M){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var $=d;d=A;try{return M()}finally{d=$}},t.unstable_scheduleCallback=function(A,M,$){var le=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?le+$:le):$=le,A){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=$+me,A={id:c++,callback:M,priorityLevel:A,startTime:$,expirationTime:me,sortIndex:-1},$>le?(A.sortIndex=$,e(u,A),n(l)===null&&A===n(u)&&(m?(h(T),T=-1):m=!0,Ns(w,$-le))):(A.sortIndex=me,e(l,A),v||y||(v=!0,Rs(O))),A},t.unstable_shouldYield=ge,t.unstable_wrapCallback=function(A){var M=d;return function(){var $=d;d=M;try{return A.apply(this,arguments)}finally{d=$}}}})(Sd);(function(t){t.exports=Sd})(oy);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=D,Xe=Aa;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Od=new Set,ai={};function zn(t,e){yr(t,e),yr(t+"Capture",e)}function yr(t,e){for(ai[t]=e,t=0;t<e.length;t++)Od.add(e[t])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ia=Object.prototype.hasOwnProperty,sy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ac={},lc={};function ay(t){return Ia.call(lc,t)?!0:Ia.call(ac,t)?!1:sy.test(t)?lc[t]=!0:(ac[t]=!0,!1)}function ly(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uy(t,e,n,r){if(e===null||typeof e>"u"||ly(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fe(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ke[t]=new Fe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ke[e]=new Fe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ke[t]=new Fe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ke[t]=new Fe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ke[t]=new Fe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ke[t]=new Fe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ke[t]=new Fe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ke[t]=new Fe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ke[t]=new Fe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xl=/[\-:]([a-z])/g;function Kl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xl,Kl);ke[e]=new Fe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xl,Kl);ke[e]=new Fe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xl,Kl);ke[e]=new Fe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ke[t]=new Fe(t,1,!1,t.toLowerCase(),null,!1,!1)});ke.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ke[t]=new Fe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zl(t,e,n,r){var i=ke.hasOwnProperty(e)?ke[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uy(e,n,i,r)&&(n=null),r||i===null?ay(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $t=Pd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yi=Symbol.for("react.element"),Kn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),eu=Symbol.for("react.strict_mode"),ja=Symbol.for("react.profiler"),xd=Symbol.for("react.provider"),kd=Symbol.for("react.context"),tu=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),La=Symbol.for("react.suspense_list"),nu=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),Td=Symbol.for("react.offscreen"),uc=Symbol.iterator;function Nr(t){return t===null||typeof t!="object"?null:(t=uc&&t[uc]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,js;function Vr(t){if(js===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);js=e&&e[1]||""}return`
`+js+t}var Us=!1;function Ls(t,e){if(!t||Us)return"";Us=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Us=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vr(t):""}function cy(t){switch(t.tag){case 5:return Vr(t.type);case 16:return Vr("Lazy");case 13:return Vr("Suspense");case 19:return Vr("SuspenseList");case 0:case 2:case 15:return t=Ls(t.type,!1),t;case 11:return t=Ls(t.type.render,!1),t;case 1:return t=Ls(t.type,!0),t;default:return""}}function Fa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Kn:return"Portal";case ja:return"Profiler";case eu:return"StrictMode";case Ua:return"Suspense";case La:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kd:return(t.displayName||"Context")+".Consumer";case xd:return(t._context.displayName||"Context")+".Provider";case tu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nu:return e=t.displayName||null,e!==null?e:Fa(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return Fa(t(e))}catch{}}return null}function py(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(e);case 8:return e===eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dy(t){var e=Cd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hi(t){t._valueTracker||(t._valueTracker=dy(t))}function Rd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Da(t,e){var n=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nd(t,e){e=e.checked,e!=null&&Zl(t,"checked",e,!1)}function Ma(t,e){Nd(t,e);var n=dn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ba(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ba(t,e.type,dn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ba(t,e,n){(e!=="number"||ko(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $r=Array.isArray;function cr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function za(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if($r(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dn(n)}}function Ad(t,e){var n=dn(e.value),r=dn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Id(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Va(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Id(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qi,jd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qi=qi||document.createElement("div"),qi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function li(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fy=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(t){fy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hr[e]=Hr[t]})});function Ud(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hr.hasOwnProperty(t)&&Hr[t]?(""+e).trim():e+"px"}function Ld(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ud(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var hy=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $a(t,e){if(e){if(hy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function Wa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ga=null;function ru(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ya=null,pr=null,dr=null;function hc(t){if(t=Ii(t)){if(typeof Ya!="function")throw Error(S(280));var e=t.stateNode;e&&(e=cs(e),Ya(t.stateNode,t.type,e))}}function Fd(t){pr?dr?dr.push(t):dr=[t]:pr=t}function Dd(){if(pr){var t=pr,e=dr;if(dr=pr=null,hc(t),e)for(t=0;t<e.length;t++)hc(e[t])}}function Md(t,e){return t(e)}function Bd(){}var Fs=!1;function zd(t,e,n){if(Fs)return t(e,n);Fs=!0;try{return Md(t,e,n)}finally{Fs=!1,(pr!==null||dr!==null)&&(Bd(),Dd())}}function ui(t,e){var n=t.stateNode;if(n===null)return null;var r=cs(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var Ha=!1;if(Ft)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Ha=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Ha=!1}function vy(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var qr=!1,To=null,Co=!1,qa=null,yy={onError:function(t){qr=!0,To=t}};function gy(t,e,n,r,i,o,s,a,l){qr=!1,To=null,vy.apply(yy,arguments)}function my(t,e,n,r,i,o,s,a,l){if(gy.apply(this,arguments),qr){if(qr){var u=To;qr=!1,To=null}else throw Error(S(198));Co||(Co=!0,qa=u)}}function Vn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vc(t){if(Vn(t)!==t)throw Error(S(188))}function wy(t){var e=t.alternate;if(!e){if(e=Vn(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vc(i),t;if(o===r)return vc(i),e;o=o.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function $d(t){return t=wy(t),t!==null?Wd(t):null}function Wd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wd(t);if(e!==null)return e;t=t.sibling}return null}var Gd=Xe.unstable_scheduleCallback,yc=Xe.unstable_cancelCallback,_y=Xe.unstable_shouldYield,Ey=Xe.unstable_requestPaint,ue=Xe.unstable_now,by=Xe.unstable_getCurrentPriorityLevel,iu=Xe.unstable_ImmediatePriority,Yd=Xe.unstable_UserBlockingPriority,Ro=Xe.unstable_NormalPriority,Sy=Xe.unstable_LowPriority,Hd=Xe.unstable_IdlePriority,ss=null,St=null;function Py(t){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(ss,t,void 0,(t.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:ky,Oy=Math.log,xy=Math.LN2;function ky(t){return t>>>=0,t===0?32:31-(Oy(t)/xy|0)|0}var Qi=64,Ji=4194304;function Wr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function No(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Wr(a):(o&=s,o!==0&&(r=Wr(o)))}else s=n&~i,s!==0?r=Wr(s):o!==0&&(r=Wr(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ht(e),i=1<<n,r|=t[n],e&=~i;return r}function Ty(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ht(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=Ty(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Qa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qd(){var t=Qi;return Qi<<=1,!(Qi&4194240)&&(Qi=64),t}function Ds(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ni(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ht(e),t[e]=n}function Ry(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ht(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function ou(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ht(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var X=0;function Qd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jd,su,Xd,Kd,Zd,Ja=!1,Xi=[],tn=null,nn=null,rn=null,ci=new Map,pi=new Map,Qt=[],Ny="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gc(t,e){switch(t){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":ci.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(e.pointerId)}}function Ir(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ii(e),e!==null&&su(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ay(t,e,n,r,i){switch(e){case"focusin":return tn=Ir(tn,t,e,n,r,i),!0;case"dragenter":return nn=Ir(nn,t,e,n,r,i),!0;case"mouseover":return rn=Ir(rn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ci.set(o,Ir(ci.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,pi.set(o,Ir(pi.get(o)||null,t,e,n,r,i)),!0}return!1}function ef(t){var e=Cn(t.target);if(e!==null){var n=Vn(e);if(n!==null){if(e=n.tag,e===13){if(e=Vd(n),e!==null){t.blockedOn=e,Zd(t.priority,function(){Xd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ho(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ga=r,n.target.dispatchEvent(r),Ga=null}else return e=Ii(n),e!==null&&su(e),t.blockedOn=n,!1;e.shift()}return!0}function mc(t,e,n){ho(t)&&n.delete(e)}function Iy(){Ja=!1,tn!==null&&ho(tn)&&(tn=null),nn!==null&&ho(nn)&&(nn=null),rn!==null&&ho(rn)&&(rn=null),ci.forEach(mc),pi.forEach(mc)}function jr(t,e){t.blockedOn===e&&(t.blockedOn=null,Ja||(Ja=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,Iy)))}function di(t){function e(i){return jr(i,t)}if(0<Xi.length){jr(Xi[0],t);for(var n=1;n<Xi.length;n++){var r=Xi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tn!==null&&jr(tn,t),nn!==null&&jr(nn,t),rn!==null&&jr(rn,t),ci.forEach(e),pi.forEach(e),n=0;n<Qt.length;n++)r=Qt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qt.length&&(n=Qt[0],n.blockedOn===null);)ef(n),n.blockedOn===null&&Qt.shift()}var fr=$t.ReactCurrentBatchConfig,Ao=!0;function jy(t,e,n,r){var i=X,o=fr.transition;fr.transition=null;try{X=1,au(t,e,n,r)}finally{X=i,fr.transition=o}}function Uy(t,e,n,r){var i=X,o=fr.transition;fr.transition=null;try{X=4,au(t,e,n,r)}finally{X=i,fr.transition=o}}function au(t,e,n,r){if(Ao){var i=Xa(t,e,n,r);if(i===null)qs(t,e,r,Io,n),gc(t,r);else if(Ay(i,t,e,n,r))r.stopPropagation();else if(gc(t,r),e&4&&-1<Ny.indexOf(t)){for(;i!==null;){var o=Ii(i);if(o!==null&&Jd(o),o=Xa(t,e,n,r),o===null&&qs(t,e,r,Io,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else qs(t,e,r,null,n)}}var Io=null;function Xa(t,e,n,r){if(Io=null,t=ru(r),t=Cn(t),t!==null)if(e=Vn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Io=t,null}function tf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(by()){case iu:return 1;case Yd:return 4;case Ro:case Sy:return 16;case Hd:return 536870912;default:return 16}default:return 16}}var Kt=null,lu=null,vo=null;function nf(){if(vo)return vo;var t,e=lu,n=e.length,r,i="value"in Kt?Kt.value:Kt.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return vo=i.slice(t,1<r?1-r:void 0)}function yo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ki(){return!0}function wc(){return!1}function et(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ki:wc,this.isPropagationStopped=wc,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),e}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=et(Tr),Ai=se({},Tr,{view:0,detail:0}),Ly=et(Ai),Ms,Bs,Ur,as=se({},Ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ur&&(Ur&&t.type==="mousemove"?(Ms=t.screenX-Ur.screenX,Bs=t.screenY-Ur.screenY):Bs=Ms=0,Ur=t),Ms)},movementY:function(t){return"movementY"in t?t.movementY:Bs}}),_c=et(as),Fy=se({},as,{dataTransfer:0}),Dy=et(Fy),My=se({},Ai,{relatedTarget:0}),zs=et(My),By=se({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),zy=et(By),Vy=se({},Tr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$y=et(Vy),Wy=se({},Tr,{data:0}),Ec=et(Wy),Gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hy[t])?!!e[t]:!1}function cu(){return qy}var Qy=se({},Ai,{key:function(t){if(t.key){var e=Gy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(t){return t.type==="keypress"?yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jy=et(Qy),Xy=se({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=et(Xy),Ky=se({},Ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),Zy=et(Ky),e0=se({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),t0=et(e0),n0=se({},as,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),r0=et(n0),i0=[9,13,27,32],pu=Ft&&"CompositionEvent"in window,Qr=null;Ft&&"documentMode"in document&&(Qr=document.documentMode);var o0=Ft&&"TextEvent"in window&&!Qr,rf=Ft&&(!pu||Qr&&8<Qr&&11>=Qr),Sc=String.fromCharCode(32),Pc=!1;function of(t,e){switch(t){case"keyup":return i0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function s0(t,e){switch(t){case"compositionend":return sf(e);case"keypress":return e.which!==32?null:(Pc=!0,Sc);case"textInput":return t=e.data,t===Sc&&Pc?null:t;default:return null}}function a0(t,e){if(er)return t==="compositionend"||!pu&&of(t,e)?(t=nf(),vo=lu=Kt=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rf&&e.locale!=="ko"?null:e.data;default:return null}}var l0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!l0[t.type]:e==="textarea"}function af(t,e,n,r){Fd(r),e=jo(e,"onChange"),0<e.length&&(n=new uu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jr=null,fi=null;function u0(t){mf(t,0)}function ls(t){var e=rr(t);if(Rd(e))return t}function c0(t,e){if(t==="change")return e}var lf=!1;if(Ft){var Vs;if(Ft){var $s="oninput"in document;if(!$s){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),$s=typeof xc.oninput=="function"}Vs=$s}else Vs=!1;lf=Vs&&(!document.documentMode||9<document.documentMode)}function kc(){Jr&&(Jr.detachEvent("onpropertychange",uf),fi=Jr=null)}function uf(t){if(t.propertyName==="value"&&ls(fi)){var e=[];af(e,fi,t,ru(t)),zd(u0,e)}}function p0(t,e,n){t==="focusin"?(kc(),Jr=e,fi=n,Jr.attachEvent("onpropertychange",uf)):t==="focusout"&&kc()}function d0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ls(fi)}function f0(t,e){if(t==="click")return ls(e)}function h0(t,e){if(t==="input"||t==="change")return ls(e)}function v0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yt=typeof Object.is=="function"?Object.is:v0;function hi(t,e){if(yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ia.call(e,i)||!yt(t[i],e[i]))return!1}return!0}function Tc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cc(t,e){var n=Tc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tc(n)}}function cf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pf(){for(var t=window,e=ko();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ko(t.document)}return e}function du(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y0(t){var e=pf(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cf(n.ownerDocument.documentElement,n)){if(r!==null&&du(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Cc(n,o);var s=Cc(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var g0=Ft&&"documentMode"in document&&11>=document.documentMode,tr=null,Ka=null,Xr=null,Za=!1;function Rc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Za||tr==null||tr!==ko(r)||(r=tr,"selectionStart"in r&&du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xr&&hi(Xr,r)||(Xr=r,r=jo(Ka,"onSelect"),0<r.length&&(e=new uu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tr)))}function Zi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nr={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionend:Zi("Transition","TransitionEnd")},Ws={},df={};Ft&&(df=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function us(t){if(Ws[t])return Ws[t];if(!nr[t])return t;var e=nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in df)return Ws[t]=e[n];return t}var ff=us("animationend"),hf=us("animationiteration"),vf=us("animationstart"),yf=us("transitionend"),gf=new Map,Nc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(t,e){gf.set(t,e),zn(e,[t])}for(var Gs=0;Gs<Nc.length;Gs++){var Ys=Nc[Gs],m0=Ys.toLowerCase(),w0=Ys[0].toUpperCase()+Ys.slice(1);yn(m0,"on"+w0)}yn(ff,"onAnimationEnd");yn(hf,"onAnimationIteration");yn(vf,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(yf,"onTransitionEnd");yr("onMouseEnter",["mouseout","mouseover"]);yr("onMouseLeave",["mouseout","mouseover"]);yr("onPointerEnter",["pointerout","pointerover"]);yr("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gr));function Ac(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,my(r,e,void 0,t),t.currentTarget=null}function mf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Ac(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Ac(i,a,u),o=l}}}if(Co)throw t=qa,Co=!1,qa=null,t}function ee(t,e){var n=e[il];n===void 0&&(n=e[il]=new Set);var r=t+"__bubble";n.has(r)||(wf(e,t,2,!1),n.add(r))}function Hs(t,e,n){var r=0;e&&(r|=4),wf(n,t,r,e)}var eo="_reactListening"+Math.random().toString(36).slice(2);function vi(t){if(!t[eo]){t[eo]=!0,Od.forEach(function(n){n!=="selectionchange"&&(_0.has(n)||Hs(n,!1,t),Hs(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eo]||(e[eo]=!0,Hs("selectionchange",!1,e))}}function wf(t,e,n,r){switch(tf(e)){case 1:var i=jy;break;case 4:i=Uy;break;default:i=au}n=i.bind(null,e,n,t),i=void 0,!Ha||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qs(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Cn(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}zd(function(){var u=o,c=ru(n),p=[];e:{var d=gf.get(t);if(d!==void 0){var y=uu,v=t;switch(t){case"keypress":if(yo(n)===0)break e;case"keydown":case"keyup":y=Jy;break;case"focusin":v="focus",y=zs;break;case"focusout":v="blur",y=zs;break;case"beforeblur":case"afterblur":y=zs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Zy;break;case ff:case hf:case vf:y=zy;break;case yf:y=t0;break;case"scroll":y=Ly;break;case"wheel":y=r0;break;case"copy":case"cut":case"paste":y=$y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=bc}var m=(e&4)!==0,P=!m&&t==="scroll",h=m?d!==null?d+"Capture":null:d;m=[];for(var f=u,g;f!==null;){g=f;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,h!==null&&(w=ui(f,h),w!=null&&m.push(yi(f,w,g)))),P)break;f=f.return}0<m.length&&(d=new y(d,v,null,n,c),p.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",d&&n!==Ga&&(v=n.relatedTarget||n.fromElement)&&(Cn(v)||v[Dt]))break e;if((y||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?Cn(v):null,v!==null&&(P=Vn(v),v!==P||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(m=_c,w="onMouseLeave",h="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(m=bc,w="onPointerLeave",h="onPointerEnter",f="pointer"),P=y==null?d:rr(y),g=v==null?d:rr(v),d=new m(w,f+"leave",y,n,c),d.target=P,d.relatedTarget=g,w=null,Cn(c)===u&&(m=new m(h,f+"enter",v,n,c),m.target=g,m.relatedTarget=P,w=m),P=w,y&&v)t:{for(m=y,h=v,f=0,g=m;g;g=Yn(g))f++;for(g=0,w=h;w;w=Yn(w))g++;for(;0<f-g;)m=Yn(m),f--;for(;0<g-f;)h=Yn(h),g--;for(;f--;){if(m===h||h!==null&&m===h.alternate)break t;m=Yn(m),h=Yn(h)}m=null}else m=null;y!==null&&Ic(p,d,y,m,!1),v!==null&&P!==null&&Ic(p,P,v,m,!0)}}e:{if(d=u?rr(u):window,y=d.nodeName&&d.nodeName.toLowerCase(),y==="select"||y==="input"&&d.type==="file")var O=c0;else if(Oc(d))if(lf)O=h0;else{O=d0;var x=p0}else(y=d.nodeName)&&y.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(O=f0);if(O&&(O=O(t,u))){af(p,O,n,c);break e}x&&x(t,d,u),t==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&Ba(d,"number",d.value)}switch(x=u?rr(u):window,t){case"focusin":(Oc(x)||x.contentEditable==="true")&&(tr=x,Ka=u,Xr=null);break;case"focusout":Xr=Ka=tr=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,Rc(p,n,c);break;case"selectionchange":if(g0)break;case"keydown":case"keyup":Rc(p,n,c)}var k;if(pu)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else er?of(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(rf&&n.locale!=="ko"&&(er||T!=="onCompositionStart"?T==="onCompositionEnd"&&er&&(k=nf()):(Kt=c,lu="value"in Kt?Kt.value:Kt.textContent,er=!0)),x=jo(u,T),0<x.length&&(T=new Ec(T,t,null,n,c),p.push({event:T,listeners:x}),k?T.data=k:(k=sf(n),k!==null&&(T.data=k)))),(k=o0?s0(t,n):a0(t,n))&&(u=jo(u,"onBeforeInput"),0<u.length&&(c=new Ec("onBeforeInput","beforeinput",null,n,c),p.push({event:c,listeners:u}),c.data=k))}mf(p,e)})}function yi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ui(t,n),o!=null&&r.unshift(yi(t,o,i)),o=ui(t,e),o!=null&&r.push(yi(t,o,i))),t=t.return}return r}function Yn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ic(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ui(n,o),l!=null&&s.unshift(yi(n,l,a))):i||(l=ui(n,o),l!=null&&s.push(yi(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var E0=/\r\n?/g,b0=/\u0000|\uFFFD/g;function jc(t){return(typeof t=="string"?t:""+t).replace(E0,`
`).replace(b0,"")}function to(t,e,n){if(e=jc(e),jc(t)!==e&&n)throw Error(S(425))}function Uo(){}var el=null,tl=null;function nl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rl=typeof setTimeout=="function"?setTimeout:void 0,S0=typeof clearTimeout=="function"?clearTimeout:void 0,Uc=typeof Promise=="function"?Promise:void 0,P0=typeof queueMicrotask=="function"?queueMicrotask:typeof Uc<"u"?function(t){return Uc.resolve(null).then(t).catch(O0)}:rl;function O0(t){setTimeout(function(){throw t})}function Qs(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),di(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);di(e)}function on(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cr=Math.random().toString(36).slice(2),_t="__reactFiber$"+Cr,gi="__reactProps$"+Cr,Dt="__reactContainer$"+Cr,il="__reactEvents$"+Cr,x0="__reactListeners$"+Cr,k0="__reactHandles$"+Cr;function Cn(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dt]||n[_t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lc(t);t!==null;){if(n=t[_t])return n;t=Lc(t)}return e}t=n,n=t.parentNode}return null}function Ii(t){return t=t[_t]||t[Dt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function cs(t){return t[gi]||null}var ol=[],ir=-1;function gn(t){return{current:t}}function te(t){0>ir||(t.current=ol[ir],ol[ir]=null,ir--)}function Z(t,e){ir++,ol[ir]=t.current,t.current=e}var fn={},Ae=gn(fn),ze=gn(!1),jn=fn;function gr(t,e){var n=t.type.contextTypes;if(!n)return fn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ve(t){return t=t.childContextTypes,t!=null}function Lo(){te(ze),te(Ae)}function Fc(t,e,n){if(Ae.current!==fn)throw Error(S(168));Z(Ae,e),Z(ze,n)}function _f(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,py(t)||"Unknown",i));return se({},n,r)}function Fo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fn,jn=Ae.current,Z(Ae,t),Z(ze,ze.current),!0}function Dc(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=_f(t,e,jn),r.__reactInternalMemoizedMergedChildContext=t,te(ze),te(Ae),Z(Ae,t)):te(ze),Z(ze,n)}var Ct=null,ps=!1,Js=!1;function Ef(t){Ct===null?Ct=[t]:Ct.push(t)}function T0(t){ps=!0,Ef(t)}function mn(){if(!Js&&Ct!==null){Js=!0;var t=0,e=X;try{var n=Ct;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ct=null,ps=!1}catch(i){throw Ct!==null&&(Ct=Ct.slice(t+1)),Gd(iu,mn),i}finally{X=e,Js=!1}}return null}var or=[],sr=0,Do=null,Mo=0,rt=[],it=0,Un=null,Rt=1,Nt="";function On(t,e){or[sr++]=Mo,or[sr++]=Do,Do=t,Mo=e}function bf(t,e,n){rt[it++]=Rt,rt[it++]=Nt,rt[it++]=Un,Un=t;var r=Rt;t=Nt;var i=32-ht(r)-1;r&=~(1<<i),n+=1;var o=32-ht(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Rt=1<<32-ht(e)+i|n<<i|r,Nt=o+t}else Rt=1<<o|n<<i|r,Nt=t}function fu(t){t.return!==null&&(On(t,1),bf(t,1,0))}function hu(t){for(;t===Do;)Do=or[--sr],or[sr]=null,Mo=or[--sr],or[sr]=null;for(;t===Un;)Un=rt[--it],rt[it]=null,Nt=rt[--it],rt[it]=null,Rt=rt[--it],rt[it]=null}var Qe=null,He=null,ne=!1,ft=null;function Sf(t,e){var n=ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,He=on(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,He=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Un!==null?{id:Rt,overflow:Nt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qe=t,He=null,!0):!1;default:return!1}}function sl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function al(t){if(ne){var e=He;if(e){var n=e;if(!Mc(t,e)){if(sl(t))throw Error(S(418));e=on(n.nextSibling);var r=Qe;e&&Mc(t,e)?Sf(r,n):(t.flags=t.flags&-4097|2,ne=!1,Qe=t)}}else{if(sl(t))throw Error(S(418));t.flags=t.flags&-4097|2,ne=!1,Qe=t}}}function Bc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function no(t){if(t!==Qe)return!1;if(!ne)return Bc(t),ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nl(t.type,t.memoizedProps)),e&&(e=He)){if(sl(t))throw Pf(),Error(S(418));for(;e;)Sf(t,e),e=on(e.nextSibling)}if(Bc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){He=on(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}He=null}}else He=Qe?on(t.stateNode.nextSibling):null;return!0}function Pf(){for(var t=He;t;)t=on(t.nextSibling)}function mr(){He=Qe=null,ne=!1}function vu(t){ft===null?ft=[t]:ft.push(t)}var C0=$t.ReactCurrentBatchConfig;function ct(t,e){if(t&&t.defaultProps){e=se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Bo=gn(null),zo=null,ar=null,yu=null;function gu(){yu=ar=zo=null}function mu(t){var e=Bo.current;te(Bo),t._currentValue=e}function ll(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hr(t,e){zo=t,yu=ar=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Me=!0),t.firstContext=null)}function at(t){var e=t._currentValue;if(yu!==t)if(t={context:t,memoizedValue:e,next:null},ar===null){if(zo===null)throw Error(S(308));ar=t,zo.dependencies={lanes:0,firstContext:t}}else ar=ar.next=t;return e}var Rn=null;function wu(t){Rn===null?Rn=[t]:Rn.push(t)}function Of(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mt(t,r)}function Mt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qt=!1;function _u(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mt(t,n)}return i=r.interleaved,i===null?(e.next=e,wu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mt(t,n)}function go(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}function zc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vo(t,e,n,r){var i=t.updateQueue;qt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,y=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,m=a;switch(d=e,y=n,m.tag){case 1:if(v=m.payload,typeof v=="function"){p=v.call(y,p,d);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,d=typeof v=="function"?v.call(y,p,d):v,d==null)break e;p=se({},p,d);break e;case 2:qt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else y={eventTime:y,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=y,l=p):c=c.next=y,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Fn|=s,t.lanes=s,t.memoizedState=p}}function Vc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var kf=new Pd.Component().refs;function ul(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ds={isMounted:function(t){return(t=t._reactInternals)?Vn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=ln(t),o=It(r,i);o.payload=e,n!=null&&(o.callback=n),e=sn(t,o,i),e!==null&&(vt(e,t,i,r),go(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=ln(t),o=It(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=sn(t,o,i),e!==null&&(vt(e,t,i,r),go(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),r=ln(t),i=It(n,r);i.tag=2,e!=null&&(i.callback=e),e=sn(t,i,r),e!==null&&(vt(e,t,r,n),go(e,t,r))}};function $c(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!hi(n,r)||!hi(i,o):!0}function Tf(t,e,n){var r=!1,i=fn,o=e.contextType;return typeof o=="object"&&o!==null?o=at(o):(i=Ve(e)?jn:Ae.current,r=e.contextTypes,o=(r=r!=null)?gr(t,i):fn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ds,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Wc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ds.enqueueReplaceState(e,e.state,null)}function cl(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=kf,_u(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=at(o):(o=Ve(e)?jn:Ae.current,i.context=gr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ul(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ds.enqueueReplaceState(i,i.state,null),Vo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Lr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===kf&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function ro(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gc(t){var e=t._init;return e(t._payload)}function Cf(t){function e(h,f){if(t){var g=h.deletions;g===null?(h.deletions=[f],h.flags|=16):g.push(f)}}function n(h,f){if(!t)return null;for(;f!==null;)e(h,f),f=f.sibling;return null}function r(h,f){for(h=new Map;f!==null;)f.key!==null?h.set(f.key,f):h.set(f.index,f),f=f.sibling;return h}function i(h,f){return h=un(h,f),h.index=0,h.sibling=null,h}function o(h,f,g){return h.index=g,t?(g=h.alternate,g!==null?(g=g.index,g<f?(h.flags|=2,f):g):(h.flags|=2,f)):(h.flags|=1048576,f)}function s(h){return t&&h.alternate===null&&(h.flags|=2),h}function a(h,f,g,w){return f===null||f.tag!==6?(f=ra(g,h.mode,w),f.return=h,f):(f=i(f,g),f.return=h,f)}function l(h,f,g,w){var O=g.type;return O===Zn?c(h,f,g.props.children,w,g.key):f!==null&&(f.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ht&&Gc(O)===f.type)?(w=i(f,g.props),w.ref=Lr(h,f,g),w.return=h,w):(w=So(g.type,g.key,g.props,null,h.mode,w),w.ref=Lr(h,f,g),w.return=h,w)}function u(h,f,g,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=ia(g,h.mode,w),f.return=h,f):(f=i(f,g.children||[]),f.return=h,f)}function c(h,f,g,w,O){return f===null||f.tag!==7?(f=In(g,h.mode,w,O),f.return=h,f):(f=i(f,g),f.return=h,f)}function p(h,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ra(""+f,h.mode,g),f.return=h,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Yi:return g=So(f.type,f.key,f.props,null,h.mode,g),g.ref=Lr(h,null,f),g.return=h,g;case Kn:return f=ia(f,h.mode,g),f.return=h,f;case Ht:var w=f._init;return p(h,w(f._payload),g)}if($r(f)||Nr(f))return f=In(f,h.mode,g,null),f.return=h,f;ro(h,f)}return null}function d(h,f,g,w){var O=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return O!==null?null:a(h,f,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Yi:return g.key===O?l(h,f,g,w):null;case Kn:return g.key===O?u(h,f,g,w):null;case Ht:return O=g._init,d(h,f,O(g._payload),w)}if($r(g)||Nr(g))return O!==null?null:c(h,f,g,w,null);ro(h,g)}return null}function y(h,f,g,w,O){if(typeof w=="string"&&w!==""||typeof w=="number")return h=h.get(g)||null,a(f,h,""+w,O);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yi:return h=h.get(w.key===null?g:w.key)||null,l(f,h,w,O);case Kn:return h=h.get(w.key===null?g:w.key)||null,u(f,h,w,O);case Ht:var x=w._init;return y(h,f,g,x(w._payload),O)}if($r(w)||Nr(w))return h=h.get(g)||null,c(f,h,w,O,null);ro(f,w)}return null}function v(h,f,g,w){for(var O=null,x=null,k=f,T=f=0,H=null;k!==null&&T<g.length;T++){k.index>T?(H=k,k=null):H=k.sibling;var I=d(h,k,g[T],w);if(I===null){k===null&&(k=H);break}t&&k&&I.alternate===null&&e(h,k),f=o(I,f,T),x===null?O=I:x.sibling=I,x=I,k=H}if(T===g.length)return n(h,k),ne&&On(h,T),O;if(k===null){for(;T<g.length;T++)k=p(h,g[T],w),k!==null&&(f=o(k,f,T),x===null?O=k:x.sibling=k,x=k);return ne&&On(h,T),O}for(k=r(h,k);T<g.length;T++)H=y(k,h,T,g[T],w),H!==null&&(t&&H.alternate!==null&&k.delete(H.key===null?T:H.key),f=o(H,f,T),x===null?O=H:x.sibling=H,x=H);return t&&k.forEach(function(ge){return e(h,ge)}),ne&&On(h,T),O}function m(h,f,g,w){var O=Nr(g);if(typeof O!="function")throw Error(S(150));if(g=O.call(g),g==null)throw Error(S(151));for(var x=O=null,k=f,T=f=0,H=null,I=g.next();k!==null&&!I.done;T++,I=g.next()){k.index>T?(H=k,k=null):H=k.sibling;var ge=d(h,k,I.value,w);if(ge===null){k===null&&(k=H);break}t&&k&&ge.alternate===null&&e(h,k),f=o(ge,f,T),x===null?O=ge:x.sibling=ge,x=ge,k=H}if(I.done)return n(h,k),ne&&On(h,T),O;if(k===null){for(;!I.done;T++,I=g.next())I=p(h,I.value,w),I!==null&&(f=o(I,f,T),x===null?O=I:x.sibling=I,x=I);return ne&&On(h,T),O}for(k=r(h,k);!I.done;T++,I=g.next())I=y(k,h,T,I.value,w),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?T:I.key),f=o(I,f,T),x===null?O=I:x.sibling=I,x=I);return t&&k.forEach(function(We){return e(h,We)}),ne&&On(h,T),O}function P(h,f,g,w){if(typeof g=="object"&&g!==null&&g.type===Zn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Yi:e:{for(var O=g.key,x=f;x!==null;){if(x.key===O){if(O=g.type,O===Zn){if(x.tag===7){n(h,x.sibling),f=i(x,g.props.children),f.return=h,h=f;break e}}else if(x.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ht&&Gc(O)===x.type){n(h,x.sibling),f=i(x,g.props),f.ref=Lr(h,x,g),f.return=h,h=f;break e}n(h,x);break}else e(h,x);x=x.sibling}g.type===Zn?(f=In(g.props.children,h.mode,w,g.key),f.return=h,h=f):(w=So(g.type,g.key,g.props,null,h.mode,w),w.ref=Lr(h,f,g),w.return=h,h=w)}return s(h);case Kn:e:{for(x=g.key;f!==null;){if(f.key===x)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(h,f.sibling),f=i(f,g.children||[]),f.return=h,h=f;break e}else{n(h,f);break}else e(h,f);f=f.sibling}f=ia(g,h.mode,w),f.return=h,h=f}return s(h);case Ht:return x=g._init,P(h,f,x(g._payload),w)}if($r(g))return v(h,f,g,w);if(Nr(g))return m(h,f,g,w);ro(h,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(h,f.sibling),f=i(f,g),f.return=h,h=f):(n(h,f),f=ra(g,h.mode,w),f.return=h,h=f),s(h)):n(h,f)}return P}var wr=Cf(!0),Rf=Cf(!1),ji={},Pt=gn(ji),mi=gn(ji),wi=gn(ji);function Nn(t){if(t===ji)throw Error(S(174));return t}function Eu(t,e){switch(Z(wi,e),Z(mi,t),Z(Pt,ji),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Va(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Va(e,t)}te(Pt),Z(Pt,e)}function _r(){te(Pt),te(mi),te(wi)}function Nf(t){Nn(wi.current);var e=Nn(Pt.current),n=Va(e,t.type);e!==n&&(Z(mi,t),Z(Pt,n))}function bu(t){mi.current===t&&(te(Pt),te(mi))}var re=gn(0);function $o(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xs=[];function Su(){for(var t=0;t<Xs.length;t++)Xs[t]._workInProgressVersionPrimary=null;Xs.length=0}var mo=$t.ReactCurrentDispatcher,Ks=$t.ReactCurrentBatchConfig,Ln=0,oe=null,ve=null,Ee=null,Wo=!1,Kr=!1,_i=0,R0=0;function Te(){throw Error(S(321))}function Pu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yt(t[n],e[n]))return!1;return!0}function Ou(t,e,n,r,i,o){if(Ln=o,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mo.current=t===null||t.memoizedState===null?j0:U0,t=n(r,i),Kr){o=0;do{if(Kr=!1,_i=0,25<=o)throw Error(S(301));o+=1,Ee=ve=null,e.updateQueue=null,mo.current=L0,t=n(r,i)}while(Kr)}if(mo.current=Go,e=ve!==null&&ve.next!==null,Ln=0,Ee=ve=oe=null,Wo=!1,e)throw Error(S(300));return t}function xu(){var t=_i!==0;return _i=0,t}function wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?oe.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function lt(){if(ve===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=ve.next;var e=Ee===null?oe.memoizedState:Ee.next;if(e!==null)Ee=e,ve=t;else{if(t===null)throw Error(S(310));ve=t,t={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Ee===null?oe.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function Ei(t,e){return typeof e=="function"?e(t):e}function Zs(t){var e=lt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=ve,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Ln&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,s=r):l=l.next=p,oe.lanes|=c,Fn|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,yt(r,e.memoizedState)||(Me=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,oe.lanes|=o,Fn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ea(t){var e=lt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);yt(o,e.memoizedState)||(Me=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Af(){}function If(t,e){var n=oe,r=lt(),i=e(),o=!yt(r.memoizedState,i);if(o&&(r.memoizedState=i,Me=!0),r=r.queue,ku(Lf.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,bi(9,Uf.bind(null,n,r,i,e),void 0,null),be===null)throw Error(S(349));Ln&30||jf(n,e,i)}return i}function jf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uf(t,e,n,r){e.value=n,e.getSnapshot=r,Ff(e)&&Df(t)}function Lf(t,e,n){return n(function(){Ff(e)&&Df(t)})}function Ff(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yt(t,n)}catch{return!0}}function Df(t){var e=Mt(t,1);e!==null&&vt(e,t,1,-1)}function Yc(t){var e=wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:t},e.queue=t,t=t.dispatch=I0.bind(null,oe,t),[e.memoizedState,t]}function bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mf(){return lt().memoizedState}function wo(t,e,n,r){var i=wt();oe.flags|=t,i.memoizedState=bi(1|e,n,void 0,r===void 0?null:r)}function fs(t,e,n,r){var i=lt();r=r===void 0?null:r;var o=void 0;if(ve!==null){var s=ve.memoizedState;if(o=s.destroy,r!==null&&Pu(r,s.deps)){i.memoizedState=bi(e,n,o,r);return}}oe.flags|=t,i.memoizedState=bi(1|e,n,o,r)}function Hc(t,e){return wo(8390656,8,t,e)}function ku(t,e){return fs(2048,8,t,e)}function Bf(t,e){return fs(4,2,t,e)}function zf(t,e){return fs(4,4,t,e)}function Vf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $f(t,e,n){return n=n!=null?n.concat([t]):null,fs(4,4,Vf.bind(null,e,t),n)}function Tu(){}function Wf(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gf(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Yf(t,e,n){return Ln&21?(yt(n,e)||(n=qd(),oe.lanes|=n,Fn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Me=!0),t.memoizedState=n)}function N0(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=Ks.transition;Ks.transition={};try{t(!1),e()}finally{X=n,Ks.transition=r}}function Hf(){return lt().memoizedState}function A0(t,e,n){var r=ln(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qf(t))Qf(e,n);else if(n=Of(t,e,n,r),n!==null){var i=Ue();vt(n,t,r,i),Jf(n,e,r)}}function I0(t,e,n){var r=ln(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qf(t))Qf(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,yt(a,s)){var l=e.interleaved;l===null?(i.next=i,wu(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Of(t,e,i,r),n!==null&&(i=Ue(),vt(n,t,r,i),Jf(n,e,r))}}function qf(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function Qf(t,e){Kr=Wo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jf(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}var Go={readContext:at,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},j0={readContext:at,useCallback:function(t,e){return wt().memoizedState=[t,e===void 0?null:e],t},useContext:at,useEffect:Hc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wo(4194308,4,Vf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wo(4194308,4,t,e)},useInsertionEffect:function(t,e){return wo(4,2,t,e)},useMemo:function(t,e){var n=wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=A0.bind(null,oe,t),[r.memoizedState,t]},useRef:function(t){var e=wt();return t={current:t},e.memoizedState=t},useState:Yc,useDebugValue:Tu,useDeferredValue:function(t){return wt().memoizedState=t},useTransition:function(){var t=Yc(!1),e=t[0];return t=N0.bind(null,t[1]),wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=oe,i=wt();if(ne){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),be===null)throw Error(S(349));Ln&30||jf(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Hc(Lf.bind(null,r,o,t),[t]),r.flags|=2048,bi(9,Uf.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=wt(),e=be.identifierPrefix;if(ne){var n=Nt,r=Rt;n=(r&~(1<<32-ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_i++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=R0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},U0={readContext:at,useCallback:Wf,useContext:at,useEffect:ku,useImperativeHandle:$f,useInsertionEffect:Bf,useLayoutEffect:zf,useMemo:Gf,useReducer:Zs,useRef:Mf,useState:function(){return Zs(Ei)},useDebugValue:Tu,useDeferredValue:function(t){var e=lt();return Yf(e,ve.memoizedState,t)},useTransition:function(){var t=Zs(Ei)[0],e=lt().memoizedState;return[t,e]},useMutableSource:Af,useSyncExternalStore:If,useId:Hf,unstable_isNewReconciler:!1},L0={readContext:at,useCallback:Wf,useContext:at,useEffect:ku,useImperativeHandle:$f,useInsertionEffect:Bf,useLayoutEffect:zf,useMemo:Gf,useReducer:ea,useRef:Mf,useState:function(){return ea(Ei)},useDebugValue:Tu,useDeferredValue:function(t){var e=lt();return ve===null?e.memoizedState=t:Yf(e,ve.memoizedState,t)},useTransition:function(){var t=ea(Ei)[0],e=lt().memoizedState;return[t,e]},useMutableSource:Af,useSyncExternalStore:If,useId:Hf,unstable_isNewReconciler:!1};function Er(t,e){try{var n="",r=e;do n+=cy(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ta(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F0=typeof WeakMap=="function"?WeakMap:Map;function Xf(t,e,n){n=It(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ho||(Ho=!0,El=r),pl(t,e)},n}function Kf(t,e,n){n=It(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pl(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){pl(t,e),typeof r!="function"&&(an===null?an=new Set([this]):an.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function qc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new F0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=X0.bind(null,t,e,n),e.then(t,t))}function Qc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jc(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=It(-1,1),e.tag=2,sn(n,e,1))),n.lanes|=1),t)}var D0=$t.ReactCurrentOwner,Me=!1;function Ie(t,e,n,r){e.child=t===null?Rf(e,null,n,r):wr(e,t.child,n,r)}function Xc(t,e,n,r,i){n=n.render;var o=e.ref;return hr(e,i),r=Ou(t,e,n,r,o,i),n=xu(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ne&&n&&fu(e),e.flags|=1,Ie(t,e,r,i),e.child)}function Kc(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Lu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Zf(t,e,o,r,i)):(t=So(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:hi,n(s,r)&&t.ref===e.ref)return Bt(t,e,i)}return e.flags|=1,t=un(o,r),t.ref=e.ref,t.return=e,e.child=t}function Zf(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(hi(o,r)&&t.ref===e.ref)if(Me=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Me=!0);else return e.lanes=t.lanes,Bt(t,e,i)}return dl(t,e,n,r,i)}function eh(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(ur,Ye),Ye|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Z(ur,Ye),Ye|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Z(ur,Ye),Ye|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Z(ur,Ye),Ye|=r;return Ie(t,e,i,n),e.child}function th(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dl(t,e,n,r,i){var o=Ve(n)?jn:Ae.current;return o=gr(e,o),hr(e,i),n=Ou(t,e,n,r,o,i),r=xu(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ne&&r&&fu(e),e.flags|=1,Ie(t,e,n,i),e.child)}function Zc(t,e,n,r,i){if(Ve(n)){var o=!0;Fo(e)}else o=!1;if(hr(e,i),e.stateNode===null)_o(t,e),Tf(e,n,r),cl(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=at(u):(u=Ve(n)?jn:Ae.current,u=gr(e,u));var c=n.getDerivedStateFromProps,p=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Wc(e,s,r,u),qt=!1;var d=e.memoizedState;s.state=d,Vo(e,r,s,i),l=e.memoizedState,a!==r||d!==l||ze.current||qt?(typeof c=="function"&&(ul(e,n,c,r),l=e.memoizedState),(a=qt||$c(e,n,a,r,d,l,u))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,xf(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ct(e.type,a),s.props=u,p=e.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=at(l):(l=Ve(n)?jn:Ae.current,l=gr(e,l));var y=n.getDerivedStateFromProps;(c=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||d!==l)&&Wc(e,s,r,l),qt=!1,d=e.memoizedState,s.state=d,Vo(e,r,s,i);var v=e.memoizedState;a!==p||d!==v||ze.current||qt?(typeof y=="function"&&(ul(e,n,y,r),v=e.memoizedState),(u=qt||$c(e,n,u,r,d,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return fl(t,e,n,r,o,i)}function fl(t,e,n,r,i,o){th(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Dc(e,n,!1),Bt(t,e,o);r=e.stateNode,D0.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=wr(e,t.child,null,o),e.child=wr(e,null,a,o)):Ie(t,e,a,o),e.memoizedState=r.state,i&&Dc(e,n,!0),e.child}function nh(t){var e=t.stateNode;e.pendingContext?Fc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fc(t,e.context,!1),Eu(t,e.containerInfo)}function ep(t,e,n,r,i){return mr(),vu(i),e.flags|=256,Ie(t,e,n,r),e.child}var hl={dehydrated:null,treeContext:null,retryLane:0};function vl(t){return{baseLanes:t,cachePool:null,transitions:null}}function rh(t,e,n){var r=e.pendingProps,i=re.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Z(re,i&1),t===null)return al(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ys(s,r,0,null),t=In(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=vl(n),e.memoizedState=hl,t):Cu(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return M0(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=un(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=un(a,o):(o=In(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?vl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=hl,r}return o=t.child,t=o.sibling,r=un(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cu(t,e){return e=ys({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function io(t,e,n,r){return r!==null&&vu(r),wr(e,t.child,null,n),t=Cu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function M0(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=ta(Error(S(422))),io(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ys({mode:"visible",children:r.children},i,0,null),o=In(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&wr(e,t.child,null,s),e.child.memoizedState=vl(s),e.memoizedState=hl,o);if(!(e.mode&1))return io(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(S(419)),r=ta(o,r,void 0),io(t,e,s,r)}if(a=(s&t.childLanes)!==0,Me||a){if(r=be,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Mt(t,i),vt(r,t,i,-1))}return Uu(),r=ta(Error(S(421))),io(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=K0.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,He=on(i.nextSibling),Qe=e,ne=!0,ft=null,t!==null&&(rt[it++]=Rt,rt[it++]=Nt,rt[it++]=Un,Rt=t.id,Nt=t.overflow,Un=e),e=Cu(e,r.children),e.flags|=4096,e)}function tp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ll(t.return,e,n)}function na(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ih(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ie(t,e,r.children,n),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tp(t,n,e);else if(t.tag===19)tp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Z(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$o(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),na(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$o(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}na(e,!0,n,null,o);break;case"together":na(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _o(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=un(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=un(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B0(t,e,n){switch(e.tag){case 3:nh(e),mr();break;case 5:Nf(e);break;case 1:Ve(e.type)&&Fo(e);break;case 4:Eu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Z(Bo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Z(re,re.current&1),e.flags|=128,null):n&e.child.childLanes?rh(t,e,n):(Z(re,re.current&1),t=Bt(t,e,n),t!==null?t.sibling:null);Z(re,re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ih(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,eh(t,e,n)}return Bt(t,e,n)}var oh,yl,sh,ah;oh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yl=function(){};sh=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nn(Pt.current);var o=null;switch(n){case"input":i=Da(t,i),r=Da(t,r),o=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),o=[];break;case"textarea":i=za(t,i),r=za(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uo)}$a(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ai.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ai.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ee("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};ah=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fr(t,e){if(!ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ce(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function z0(t,e,n){var r=e.pendingProps;switch(hu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(e),null;case 1:return Ve(e.type)&&Lo(),Ce(e),null;case 3:return r=e.stateNode,_r(),te(ze),te(Ae),Su(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(no(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ft!==null&&(Pl(ft),ft=null))),yl(t,e),Ce(e),null;case 5:bu(e);var i=Nn(wi.current);if(n=e.type,t!==null&&e.stateNode!=null)sh(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return Ce(e),null}if(t=Nn(Pt.current),no(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[_t]=e,r[gi]=o,t=(e.mode&1)!==0,n){case"dialog":ee("cancel",r),ee("close",r);break;case"iframe":case"object":case"embed":ee("load",r);break;case"video":case"audio":for(i=0;i<Gr.length;i++)ee(Gr[i],r);break;case"source":ee("error",r);break;case"img":case"image":case"link":ee("error",r),ee("load",r);break;case"details":ee("toggle",r);break;case"input":cc(r,o),ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ee("invalid",r);break;case"textarea":dc(r,o),ee("invalid",r)}$a(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&to(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&to(r.textContent,a,t),i=["children",""+a]):ai.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ee("scroll",r)}switch(n){case"input":Hi(r),pc(r,o,!0);break;case"textarea":Hi(r),fc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Uo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Id(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[_t]=e,t[gi]=r,oh(t,e,!1,!1),e.stateNode=t;e:{switch(s=Wa(n,r),n){case"dialog":ee("cancel",t),ee("close",t),i=r;break;case"iframe":case"object":case"embed":ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gr.length;i++)ee(Gr[i],t);i=r;break;case"source":ee("error",t),i=r;break;case"img":case"image":case"link":ee("error",t),ee("load",t),i=r;break;case"details":ee("toggle",t),i=r;break;case"input":cc(t,r),i=Da(t,r),ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),ee("invalid",t);break;case"textarea":dc(t,r),i=za(t,r),ee("invalid",t);break;default:i=r}$a(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Ld(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jd(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&li(t,l):typeof l=="number"&&li(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ai.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ee("scroll",t):l!=null&&Zl(t,o,l,s))}switch(n){case"input":Hi(t),pc(t,r,!1);break;case"textarea":Hi(t),fc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?cr(t,!!r.multiple,o,!1):r.defaultValue!=null&&cr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Uo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ce(e),null;case 6:if(t&&e.stateNode!=null)ah(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=Nn(wi.current),Nn(Pt.current),no(e)){if(r=e.stateNode,n=e.memoizedProps,r[_t]=e,(o=r.nodeValue!==n)&&(t=Qe,t!==null))switch(t.tag){case 3:to(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&to(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return Ce(e),null;case 13:if(te(re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ne&&He!==null&&e.mode&1&&!(e.flags&128))Pf(),mr(),e.flags|=98560,o=!1;else if(o=no(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(S(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(S(317));o[_t]=e}else mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ce(e),o=!1}else ft!==null&&(Pl(ft),ft=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?ye===0&&(ye=3):Uu())),e.updateQueue!==null&&(e.flags|=4),Ce(e),null);case 4:return _r(),yl(t,e),t===null&&vi(e.stateNode.containerInfo),Ce(e),null;case 10:return mu(e.type._context),Ce(e),null;case 17:return Ve(e.type)&&Lo(),Ce(e),null;case 19:if(te(re),o=e.memoizedState,o===null)return Ce(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Fr(o,!1);else{if(ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=$o(t),s!==null){for(e.flags|=128,Fr(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Z(re,re.current&1|2),e.child}t=t.sibling}o.tail!==null&&ue()>br&&(e.flags|=128,r=!0,Fr(o,!1),e.lanes=4194304)}else{if(!r)if(t=$o(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ne)return Ce(e),null}else 2*ue()-o.renderingStartTime>br&&n!==1073741824&&(e.flags|=128,r=!0,Fr(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ue(),e.sibling=null,n=re.current,Z(re,r?n&1|2:n&1),e):(Ce(e),null);case 22:case 23:return ju(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(Ce(e),e.subtreeFlags&6&&(e.flags|=8192)):Ce(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function V0(t,e){switch(hu(e),e.tag){case 1:return Ve(e.type)&&Lo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _r(),te(ze),te(Ae),Su(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bu(e),null;case 13:if(te(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(re),null;case 4:return _r(),null;case 10:return mu(e.type._context),null;case 22:case 23:return ju(),null;case 24:return null;default:return null}}var oo=!1,Re=!1,$0=typeof WeakSet=="function"?WeakSet:Set,N=null;function lr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ae(t,e,r)}else n.current=null}function gl(t,e,n){try{n()}catch(r){ae(t,e,r)}}var np=!1;function W0(t,e){if(el=Ao,t=pf(),du(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,p=t,d=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(y=p.firstChild)!==null;)d=p,p=y;for(;;){if(p===t)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(y=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tl={focusedElem:t,selectionRange:n},Ao=!1,N=e;N!==null;)if(e=N,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,N=t;else for(;N!==null;){e=N;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,P=v.memoizedState,h=e.stateNode,f=h.getSnapshotBeforeUpdate(e.elementType===e.type?m:ct(e.type,m),P);h.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(w){ae(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,N=t;break}N=e.return}return v=np,np=!1,v}function Zr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&gl(e,n,o)}i=i.next}while(i!==r)}}function hs(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ml(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lh(t){var e=t.alternate;e!==null&&(t.alternate=null,lh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_t],delete e[gi],delete e[il],delete e[x0],delete e[k0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uh(t){return t.tag===5||t.tag===3||t.tag===4}function rp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uo));else if(r!==4&&(t=t.child,t!==null))for(wl(t,e,n),t=t.sibling;t!==null;)wl(t,e,n),t=t.sibling}function _l(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_l(t,e,n),t=t.sibling;t!==null;)_l(t,e,n),t=t.sibling}var Se=null,pt=!1;function Wt(t,e,n){for(n=n.child;n!==null;)ch(t,e,n),n=n.sibling}function ch(t,e,n){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(ss,n)}catch{}switch(n.tag){case 5:Re||lr(n,e);case 6:var r=Se,i=pt;Se=null,Wt(t,e,n),Se=r,pt=i,Se!==null&&(pt?(t=Se,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Se.removeChild(n.stateNode));break;case 18:Se!==null&&(pt?(t=Se,n=n.stateNode,t.nodeType===8?Qs(t.parentNode,n):t.nodeType===1&&Qs(t,n),di(t)):Qs(Se,n.stateNode));break;case 4:r=Se,i=pt,Se=n.stateNode.containerInfo,pt=!0,Wt(t,e,n),Se=r,pt=i;break;case 0:case 11:case 14:case 15:if(!Re&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&gl(n,e,s),i=i.next}while(i!==r)}Wt(t,e,n);break;case 1:if(!Re&&(lr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ae(n,e,a)}Wt(t,e,n);break;case 21:Wt(t,e,n);break;case 22:n.mode&1?(Re=(r=Re)||n.memoizedState!==null,Wt(t,e,n),Re=r):Wt(t,e,n);break;default:Wt(t,e,n)}}function ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $0),e.forEach(function(r){var i=Z0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Se=a.stateNode,pt=!1;break e;case 3:Se=a.stateNode.containerInfo,pt=!0;break e;case 4:Se=a.stateNode.containerInfo,pt=!0;break e}a=a.return}if(Se===null)throw Error(S(160));ch(o,s,i),Se=null,pt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ae(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ph(e,t),e=e.sibling}function ph(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),gt(t),r&4){try{Zr(3,t,t.return),hs(3,t)}catch(m){ae(t,t.return,m)}try{Zr(5,t,t.return)}catch(m){ae(t,t.return,m)}}break;case 1:ut(e,t),gt(t),r&512&&n!==null&&lr(n,n.return);break;case 5:if(ut(e,t),gt(t),r&512&&n!==null&&lr(n,n.return),t.flags&32){var i=t.stateNode;try{li(i,"")}catch(m){ae(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Nd(i,o),Wa(a,s);var u=Wa(a,o);for(s=0;s<l.length;s+=2){var c=l[s],p=l[s+1];c==="style"?Ld(i,p):c==="dangerouslySetInnerHTML"?jd(i,p):c==="children"?li(i,p):Zl(i,c,p,u)}switch(a){case"input":Ma(i,o);break;case"textarea":Ad(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?cr(i,!!o.multiple,y,!1):d!==!!o.multiple&&(o.defaultValue!=null?cr(i,!!o.multiple,o.defaultValue,!0):cr(i,!!o.multiple,o.multiple?[]:"",!1))}i[gi]=o}catch(m){ae(t,t.return,m)}}break;case 6:if(ut(e,t),gt(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){ae(t,t.return,m)}}break;case 3:if(ut(e,t),gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{di(e.containerInfo)}catch(m){ae(t,t.return,m)}break;case 4:ut(e,t),gt(t);break;case 13:ut(e,t),gt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Au=ue())),r&4&&ip(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Re=(u=Re)||c,ut(e,t),Re=u):ut(e,t),gt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(N=t,c=t.child;c!==null;){for(p=N=c;N!==null;){switch(d=N,y=d.child,d.tag){case 0:case 11:case 14:case 15:Zr(4,d,d.return);break;case 1:lr(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){ae(r,n,m)}}break;case 5:lr(d,d.return);break;case 22:if(d.memoizedState!==null){sp(p);continue}}y!==null?(y.return=d,N=y):sp(p)}c=c.sibling}e:for(c=null,p=t;;){if(p.tag===5){if(c===null){c=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ud("display",s))}catch(m){ae(t,t.return,m)}}}else if(p.tag===6){if(c===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(m){ae(t,t.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ut(e,t),gt(t),r&4&&ip(t);break;case 21:break;default:ut(e,t),gt(t)}}function gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uh(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(li(i,""),r.flags&=-33);var o=rp(t);_l(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=rp(t);wl(t,a,s);break;default:throw Error(S(161))}}catch(l){ae(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G0(t,e,n){N=t,dh(t)}function dh(t,e,n){for(var r=(t.mode&1)!==0;N!==null;){var i=N,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||oo;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Re;a=oo;var u=Re;if(oo=s,(Re=l)&&!u)for(N=i;N!==null;)s=N,l=s.child,s.tag===22&&s.memoizedState!==null?ap(i):l!==null?(l.return=s,N=l):ap(i);for(;o!==null;)N=o,dh(o),o=o.sibling;N=i,oo=a,Re=u}op(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,N=o):op(t)}}function op(t){for(;N!==null;){var e=N;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Re||hs(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Re)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ct(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Vc(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vc(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var p=c.dehydrated;p!==null&&di(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}Re||e.flags&512&&ml(e)}catch(d){ae(e,e.return,d)}}if(e===t){N=null;break}if(n=e.sibling,n!==null){n.return=e.return,N=n;break}N=e.return}}function sp(t){for(;N!==null;){var e=N;if(e===t){N=null;break}var n=e.sibling;if(n!==null){n.return=e.return,N=n;break}N=e.return}}function ap(t){for(;N!==null;){var e=N;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hs(4,e)}catch(l){ae(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ae(e,i,l)}}var o=e.return;try{ml(e)}catch(l){ae(e,o,l)}break;case 5:var s=e.return;try{ml(e)}catch(l){ae(e,s,l)}}}catch(l){ae(e,e.return,l)}if(e===t){N=null;break}var a=e.sibling;if(a!==null){a.return=e.return,N=a;break}N=e.return}}var Y0=Math.ceil,Yo=$t.ReactCurrentDispatcher,Ru=$t.ReactCurrentOwner,st=$t.ReactCurrentBatchConfig,Q=0,be=null,fe=null,xe=0,Ye=0,ur=gn(0),ye=0,Si=null,Fn=0,vs=0,Nu=0,ei=null,De=null,Au=0,br=1/0,Tt=null,Ho=!1,El=null,an=null,so=!1,Zt=null,qo=0,ti=0,bl=null,Eo=-1,bo=0;function Ue(){return Q&6?ue():Eo!==-1?Eo:Eo=ue()}function ln(t){return t.mode&1?Q&2&&xe!==0?xe&-xe:C0.transition!==null?(bo===0&&(bo=qd()),bo):(t=X,t!==0||(t=window.event,t=t===void 0?16:tf(t.type)),t):1}function vt(t,e,n,r){if(50<ti)throw ti=0,bl=null,Error(S(185));Ni(t,n,r),(!(Q&2)||t!==be)&&(t===be&&(!(Q&2)&&(vs|=n),ye===4&&Jt(t,xe)),$e(t,r),n===1&&Q===0&&!(e.mode&1)&&(br=ue()+500,ps&&mn()))}function $e(t,e){var n=t.callbackNode;Cy(t,e);var r=No(t,t===be?xe:0);if(r===0)n!==null&&yc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yc(n),e===1)t.tag===0?T0(lp.bind(null,t)):Ef(lp.bind(null,t)),P0(function(){!(Q&6)&&mn()}),n=null;else{switch(Qd(r)){case 1:n=iu;break;case 4:n=Yd;break;case 16:n=Ro;break;case 536870912:n=Hd;break;default:n=Ro}n=_h(n,fh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fh(t,e){if(Eo=-1,bo=0,Q&6)throw Error(S(327));var n=t.callbackNode;if(vr()&&t.callbackNode!==n)return null;var r=No(t,t===be?xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qo(t,r);else{e=r;var i=Q;Q|=2;var o=vh();(be!==t||xe!==e)&&(Tt=null,br=ue()+500,An(t,e));do try{Q0();break}catch(a){hh(t,a)}while(1);gu(),Yo.current=o,Q=i,fe!==null?e=0:(be=null,xe=0,e=ye)}if(e!==0){if(e===2&&(i=Qa(t),i!==0&&(r=i,e=Sl(t,i))),e===1)throw n=Si,An(t,0),Jt(t,r),$e(t,ue()),n;if(e===6)Jt(t,r);else{if(i=t.current.alternate,!(r&30)&&!H0(i)&&(e=Qo(t,r),e===2&&(o=Qa(t),o!==0&&(r=o,e=Sl(t,o))),e===1))throw n=Si,An(t,0),Jt(t,r),$e(t,ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:xn(t,De,Tt);break;case 3:if(Jt(t,r),(r&130023424)===r&&(e=Au+500-ue(),10<e)){if(No(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ue(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rl(xn.bind(null,t,De,Tt),e);break}xn(t,De,Tt);break;case 4:if(Jt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ht(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Y0(r/1960))-r,10<r){t.timeoutHandle=rl(xn.bind(null,t,De,Tt),r);break}xn(t,De,Tt);break;case 5:xn(t,De,Tt);break;default:throw Error(S(329))}}}return $e(t,ue()),t.callbackNode===n?fh.bind(null,t):null}function Sl(t,e){var n=ei;return t.current.memoizedState.isDehydrated&&(An(t,e).flags|=256),t=Qo(t,e),t!==2&&(e=De,De=n,e!==null&&Pl(e)),t}function Pl(t){De===null?De=t:De.push.apply(De,t)}function H0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!yt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jt(t,e){for(e&=~Nu,e&=~vs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ht(e),r=1<<n;t[n]=-1,e&=~r}}function lp(t){if(Q&6)throw Error(S(327));vr();var e=No(t,0);if(!(e&1))return $e(t,ue()),null;var n=Qo(t,e);if(t.tag!==0&&n===2){var r=Qa(t);r!==0&&(e=r,n=Sl(t,r))}if(n===1)throw n=Si,An(t,0),Jt(t,e),$e(t,ue()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xn(t,De,Tt),$e(t,ue()),null}function Iu(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(br=ue()+500,ps&&mn())}}function Dn(t){Zt!==null&&Zt.tag===0&&!(Q&6)&&vr();var e=Q;Q|=1;var n=st.transition,r=X;try{if(st.transition=null,X=1,t)return t()}finally{X=r,st.transition=n,Q=e,!(Q&6)&&mn()}}function ju(){Ye=ur.current,te(ur)}function An(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S0(n)),fe!==null)for(n=fe.return;n!==null;){var r=n;switch(hu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lo();break;case 3:_r(),te(ze),te(Ae),Su();break;case 5:bu(r);break;case 4:_r();break;case 13:te(re);break;case 19:te(re);break;case 10:mu(r.type._context);break;case 22:case 23:ju()}n=n.return}if(be=t,fe=t=un(t.current,null),xe=Ye=e,ye=0,Si=null,Nu=vs=Fn=0,De=ei=null,Rn!==null){for(e=0;e<Rn.length;e++)if(n=Rn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Rn=null}return t}function hh(t,e){do{var n=fe;try{if(gu(),mo.current=Go,Wo){for(var r=oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wo=!1}if(Ln=0,Ee=ve=oe=null,Kr=!1,_i=0,Ru.current=null,n===null||n.return===null){ye=1,Si=e,fe=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=xe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,p=c.tag;if(!(c.mode&1)&&(p===0||p===11||p===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var y=Qc(s);if(y!==null){y.flags&=-257,Jc(y,s,a,o,e),y.mode&1&&qc(o,u,e),e=y,l=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(l),e.updateQueue=m}else v.add(l);break e}else{if(!(e&1)){qc(o,u,e),Uu();break e}l=Error(S(426))}}else if(ne&&a.mode&1){var P=Qc(s);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Jc(P,s,a,o,e),vu(Er(l,a));break e}}o=l=Er(l,a),ye!==4&&(ye=2),ei===null?ei=[o]:ei.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var h=Xf(o,l,e);zc(o,h);break e;case 1:a=l;var f=o.type,g=o.stateNode;if(!(o.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(an===null||!an.has(g)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=Kf(o,a,e);zc(o,w);break e}}o=o.return}while(o!==null)}gh(n)}catch(O){e=O,fe===n&&n!==null&&(fe=n=n.return);continue}break}while(1)}function vh(){var t=Yo.current;return Yo.current=Go,t===null?Go:t}function Uu(){(ye===0||ye===3||ye===2)&&(ye=4),be===null||!(Fn&268435455)&&!(vs&268435455)||Jt(be,xe)}function Qo(t,e){var n=Q;Q|=2;var r=vh();(be!==t||xe!==e)&&(Tt=null,An(t,e));do try{q0();break}catch(i){hh(t,i)}while(1);if(gu(),Q=n,Yo.current=r,fe!==null)throw Error(S(261));return be=null,xe=0,ye}function q0(){for(;fe!==null;)yh(fe)}function Q0(){for(;fe!==null&&!_y();)yh(fe)}function yh(t){var e=wh(t.alternate,t,Ye);t.memoizedProps=t.pendingProps,e===null?gh(t):fe=e,Ru.current=null}function gh(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=V0(n,e),n!==null){n.flags&=32767,fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ye=6,fe=null;return}}else if(n=z0(n,e,Ye),n!==null){fe=n;return}if(e=e.sibling,e!==null){fe=e;return}fe=e=t}while(e!==null);ye===0&&(ye=5)}function xn(t,e,n){var r=X,i=st.transition;try{st.transition=null,X=1,J0(t,e,n,r)}finally{st.transition=i,X=r}return null}function J0(t,e,n,r){do vr();while(Zt!==null);if(Q&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Ry(t,o),t===be&&(fe=be=null,xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||so||(so=!0,_h(Ro,function(){return vr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=st.transition,st.transition=null;var s=X;X=1;var a=Q;Q|=4,Ru.current=null,W0(t,n),ph(n,t),y0(tl),Ao=!!el,tl=el=null,t.current=n,G0(n),Ey(),Q=a,X=s,st.transition=o}else t.current=n;if(so&&(so=!1,Zt=t,qo=i),o=t.pendingLanes,o===0&&(an=null),Py(n.stateNode),$e(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ho)throw Ho=!1,t=El,El=null,t;return qo&1&&t.tag!==0&&vr(),o=t.pendingLanes,o&1?t===bl?ti++:(ti=0,bl=t):ti=0,mn(),null}function vr(){if(Zt!==null){var t=Qd(qo),e=st.transition,n=X;try{if(st.transition=null,X=16>t?16:t,Zt===null)var r=!1;else{if(t=Zt,Zt=null,qo=0,Q&6)throw Error(S(331));var i=Q;for(Q|=4,N=t.current;N!==null;){var o=N,s=o.child;if(N.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(N=u;N!==null;){var c=N;switch(c.tag){case 0:case 11:case 15:Zr(8,c,o)}var p=c.child;if(p!==null)p.return=c,N=p;else for(;N!==null;){c=N;var d=c.sibling,y=c.return;if(lh(c),c===u){N=null;break}if(d!==null){d.return=y,N=d;break}N=y}}}var v=o.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var P=m.sibling;m.sibling=null,m=P}while(m!==null)}}N=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,N=s;else e:for(;N!==null;){if(o=N,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Zr(9,o,o.return)}var h=o.sibling;if(h!==null){h.return=o.return,N=h;break e}N=o.return}}var f=t.current;for(N=f;N!==null;){s=N;var g=s.child;if(s.subtreeFlags&2064&&g!==null)g.return=s,N=g;else e:for(s=f;N!==null;){if(a=N,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hs(9,a)}}catch(O){ae(a,a.return,O)}if(a===s){N=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,N=w;break e}N=a.return}}if(Q=i,mn(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(ss,t)}catch{}r=!0}return r}finally{X=n,st.transition=e}}return!1}function up(t,e,n){e=Er(n,e),e=Xf(t,e,1),t=sn(t,e,1),e=Ue(),t!==null&&(Ni(t,1,e),$e(t,e))}function ae(t,e,n){if(t.tag===3)up(t,t,n);else for(;e!==null;){if(e.tag===3){up(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(an===null||!an.has(r))){t=Er(n,t),t=Kf(e,t,1),e=sn(e,t,1),t=Ue(),e!==null&&(Ni(e,1,t),$e(e,t));break}}e=e.return}}function X0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,be===t&&(xe&n)===n&&(ye===4||ye===3&&(xe&130023424)===xe&&500>ue()-Au?An(t,0):Nu|=n),$e(t,e)}function mh(t,e){e===0&&(t.mode&1?(e=Ji,Ji<<=1,!(Ji&130023424)&&(Ji=4194304)):e=1);var n=Ue();t=Mt(t,e),t!==null&&(Ni(t,e,n),$e(t,n))}function K0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mh(t,n)}function Z0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),mh(t,n)}var wh;wh=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ze.current)Me=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Me=!1,B0(t,e,n);Me=!!(t.flags&131072)}else Me=!1,ne&&e.flags&1048576&&bf(e,Mo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_o(t,e),t=e.pendingProps;var i=gr(e,Ae.current);hr(e,n),i=Ou(null,e,r,t,i,n);var o=xu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ve(r)?(o=!0,Fo(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_u(e),i.updater=ds,e.stateNode=i,i._reactInternals=e,cl(e,r,t,n),e=fl(null,e,r,!0,o,n)):(e.tag=0,ne&&o&&fu(e),Ie(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_o(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tg(r),t=ct(r,t),i){case 0:e=dl(null,e,r,t,n);break e;case 1:e=Zc(null,e,r,t,n);break e;case 11:e=Xc(null,e,r,t,n);break e;case 14:e=Kc(null,e,r,ct(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),dl(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),Zc(t,e,r,i,n);case 3:e:{if(nh(e),t===null)throw Error(S(387));r=e.pendingProps,o=e.memoizedState,i=o.element,xf(t,e),Vo(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Er(Error(S(423)),e),e=ep(t,e,r,n,i);break e}else if(r!==i){i=Er(Error(S(424)),e),e=ep(t,e,r,n,i);break e}else for(He=on(e.stateNode.containerInfo.firstChild),Qe=e,ne=!0,ft=null,n=Rf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mr(),r===i){e=Bt(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return Nf(e),t===null&&al(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,nl(r,i)?s=null:o!==null&&nl(r,o)&&(e.flags|=32),th(t,e),Ie(t,e,s,n),e.child;case 6:return t===null&&al(e),null;case 13:return rh(t,e,n);case 4:return Eu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wr(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),Xc(t,e,r,i,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Z(Bo,r._currentValue),r._currentValue=s,o!==null)if(yt(o.value,s)){if(o.children===i.children&&!ze.current){e=Bt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=It(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ll(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(S(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ll(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ie(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hr(e,n),i=at(i),r=r(i),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,i=ct(r,e.pendingProps),i=ct(r.type,i),Kc(t,e,r,i,n);case 15:return Zf(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),_o(t,e),e.tag=1,Ve(r)?(t=!0,Fo(e)):t=!1,hr(e,n),Tf(e,r,i),cl(e,r,i,n),fl(null,e,r,!0,t,n);case 19:return ih(t,e,n);case 22:return eh(t,e,n)}throw Error(S(156,e.tag))};function _h(t,e){return Gd(t,e)}function eg(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,n,r){return new eg(t,e,n,r)}function Lu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tg(t){if(typeof t=="function")return Lu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tu)return 11;if(t===nu)return 14}return 2}function un(t,e){var n=t.alternate;return n===null?(n=ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function So(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Lu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Zn:return In(n.children,i,o,e);case eu:s=8,i|=8;break;case ja:return t=ot(12,n,e,i|2),t.elementType=ja,t.lanes=o,t;case Ua:return t=ot(13,n,e,i),t.elementType=Ua,t.lanes=o,t;case La:return t=ot(19,n,e,i),t.elementType=La,t.lanes=o,t;case Td:return ys(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xd:s=10;break e;case kd:s=9;break e;case tu:s=11;break e;case nu:s=14;break e;case Ht:s=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=ot(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function In(t,e,n,r){return t=ot(7,t,r,e),t.lanes=n,t}function ys(t,e,n,r){return t=ot(22,t,r,e),t.elementType=Td,t.lanes=n,t.stateNode={isHidden:!1},t}function ra(t,e,n){return t=ot(6,t,null,e),t.lanes=n,t}function ia(t,e,n){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ng(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ds(0),this.expirationTimes=Ds(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(t,e,n,r,i,o,s,a,l){return t=new ng(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ot(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_u(o),t}function rg(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Eh(t){if(!t)return fn;t=t._reactInternals;e:{if(Vn(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ve(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(Ve(n))return _f(t,n,e)}return e}function bh(t,e,n,r,i,o,s,a,l){return t=Fu(n,r,!0,t,i,o,s,a,l),t.context=Eh(null),n=t.current,r=Ue(),i=ln(n),o=It(r,i),o.callback=e??null,sn(n,o,i),t.current.lanes=i,Ni(t,i,r),$e(t,r),t}function gs(t,e,n,r){var i=e.current,o=Ue(),s=ln(i);return n=Eh(n),e.context===null?e.context=n:e.pendingContext=n,e=It(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sn(i,e,s),t!==null&&(vt(t,i,s,o),go(t,i,s)),s}function Jo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Du(t,e){cp(t,e),(t=t.alternate)&&cp(t,e)}function ig(){return null}var Sh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mu(t){this._internalRoot=t}ms.prototype.render=Mu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));gs(t,e,null,null)};ms.prototype.unmount=Mu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dn(function(){gs(null,t,null,null)}),e[Dt]=null}};function ms(t){this._internalRoot=t}ms.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qt.length&&e!==0&&e<Qt[n].priority;n++);Qt.splice(n,0,t),n===0&&ef(t)}};function Bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ws(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pp(){}function og(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Jo(s);o.call(u)}}var s=bh(e,r,t,0,null,!1,!1,"",pp);return t._reactRootContainer=s,t[Dt]=s.current,vi(t.nodeType===8?t.parentNode:t),Dn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Jo(l);a.call(u)}}var l=Fu(t,0,!1,null,null,!1,!1,"",pp);return t._reactRootContainer=l,t[Dt]=l.current,vi(t.nodeType===8?t.parentNode:t),Dn(function(){gs(e,l,n,r)}),l}function _s(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Jo(s);a.call(l)}}gs(e,s,t,i)}else s=og(n,e,t,i,r);return Jo(s)}Jd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wr(e.pendingLanes);n!==0&&(ou(e,n|1),$e(e,ue()),!(Q&6)&&(br=ue()+500,mn()))}break;case 13:Dn(function(){var r=Mt(t,1);if(r!==null){var i=Ue();vt(r,t,1,i)}}),Du(t,1)}};su=function(t){if(t.tag===13){var e=Mt(t,134217728);if(e!==null){var n=Ue();vt(e,t,134217728,n)}Du(t,134217728)}};Xd=function(t){if(t.tag===13){var e=ln(t),n=Mt(t,e);if(n!==null){var r=Ue();vt(n,t,e,r)}Du(t,e)}};Kd=function(){return X};Zd=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};Ya=function(t,e,n){switch(e){case"input":if(Ma(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=cs(r);if(!i)throw Error(S(90));Rd(r),Ma(r,i)}}}break;case"textarea":Ad(t,n);break;case"select":e=n.value,e!=null&&cr(t,!!n.multiple,e,!1)}};Md=Iu;Bd=Dn;var sg={usingClientEntryPoint:!1,Events:[Ii,rr,cs,Fd,Dd,Iu]},Dr={findFiberByHostInstance:Cn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ag={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$d(t),t===null?null:t.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||ig,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ao.isDisabled&&ao.supportsFiber)try{ss=ao.inject(ag),St=ao}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sg;Ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(e))throw Error(S(200));return rg(t,e,null,n)};Ze.createRoot=function(t,e){if(!Bu(t))throw Error(S(299));var n=!1,r="",i=Sh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fu(t,1,!1,null,null,n,!1,r,i),t[Dt]=e.current,vi(t.nodeType===8?t.parentNode:t),new Mu(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=$d(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return Dn(t)};Ze.hydrate=function(t,e,n){if(!ws(e))throw Error(S(200));return _s(null,t,e,!0,n)};Ze.hydrateRoot=function(t,e,n){if(!Bu(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Sh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=bh(e,null,t,1,n??null,i,!1,o,s),t[Dt]=e.current,vi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ms(e)};Ze.render=function(t,e,n){if(!ws(e))throw Error(S(200));return _s(null,t,e,!1,n)};Ze.unmountComponentAtNode=function(t){if(!ws(t))throw Error(S(40));return t._reactRootContainer?(Dn(function(){_s(null,null,t,!1,function(){t._reactRootContainer=null,t[Dt]=null})}),!0):!1};Ze.unstable_batchedUpdates=Iu;Ze.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ws(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return _s(t,e,n,!1,r)};Ze.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Ze})(iy);var Ph,dp=Na;Ph=dp.createRoot,dp.hydrateRoot;const lg="modulepreload",ug=function(t){return"/magicalmirai2023-procon/"+t},fp={},Oh=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=ug(o),o in fp)return;fp[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const p=i[c];if(p.href===o&&(!s||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":lg,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((c,p)=>{u.addEventListener("load",c),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};var Ol={},cg={get exports(){return Ol},set exports(t){Ol=t}},Xo={},pg={get exports(){return Xo},set exports(t){Xo=t}},xh=function(e,n){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(n,i)}},dg=xh,$n=Object.prototype.toString;function zu(t){return $n.call(t)==="[object Array]"}function xl(t){return typeof t>"u"}function fg(t){return t!==null&&!xl(t)&&t.constructor!==null&&!xl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function hg(t){return $n.call(t)==="[object ArrayBuffer]"}function vg(t){return typeof FormData<"u"&&t instanceof FormData}function yg(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function gg(t){return typeof t=="string"}function mg(t){return typeof t=="number"}function kh(t){return t!==null&&typeof t=="object"}function Po(t){if($n.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function wg(t){return $n.call(t)==="[object Date]"}function _g(t){return $n.call(t)==="[object File]"}function Eg(t){return $n.call(t)==="[object Blob]"}function Th(t){return $n.call(t)==="[object Function]"}function bg(t){return kh(t)&&Th(t.pipe)}function Sg(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function Pg(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Og(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Vu(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),zu(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function kl(){var t={};function e(i,o){Po(t[o])&&Po(i)?t[o]=kl(t[o],i):Po(i)?t[o]=kl({},i):zu(i)?t[o]=i.slice():t[o]=i}for(var n=0,r=arguments.length;n<r;n++)Vu(arguments[n],e);return t}function xg(t,e,n){return Vu(e,function(i,o){n&&typeof i=="function"?t[o]=dg(i,n):t[o]=i}),t}function kg(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var tt={isArray:zu,isArrayBuffer:hg,isBuffer:fg,isFormData:vg,isArrayBufferView:yg,isString:gg,isNumber:mg,isObject:kh,isPlainObject:Po,isUndefined:xl,isDate:wg,isFile:_g,isBlob:Eg,isFunction:Th,isStream:bg,isURLSearchParams:Sg,isStandardBrowserEnv:Og,forEach:Vu,merge:kl,extend:xg,trim:Pg,stripBOM:kg},Hn=tt;function hp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ch=function(e,n,r){if(!n)return e;var i;if(r)i=r(n);else if(Hn.isURLSearchParams(n))i=n.toString();else{var o=[];Hn.forEach(n,function(l,u){l===null||typeof l>"u"||(Hn.isArray(l)?u=u+"[]":l=[l],Hn.forEach(l,function(p){Hn.isDate(p)?p=p.toISOString():Hn.isObject(p)&&(p=JSON.stringify(p)),o.push(hp(u)+"="+hp(p))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Tg=tt;function Es(){this.handlers=[]}Es.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Es.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Es.prototype.forEach=function(e){Tg.forEach(this.handlers,function(r){r!==null&&e(r)})};var Cg=Es,Rg=tt,Ng=function(e,n){Rg.forEach(e,function(i,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(e[n]=i,delete e[o])})},Rh=function(e,n,r,i,o){return e.config=n,r&&(e.code=r),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},oa,vp;function Nh(){if(vp)return oa;vp=1;var t=Rh;return oa=function(n,r,i,o,s){var a=new Error(n);return t(a,r,i,o,s)},oa}var sa,yp;function Ag(){if(yp)return sa;yp=1;var t=Nh();return sa=function(n,r,i){var o=i.config.validateStatus;!i.status||!o||o(i.status)?n(i):r(t("Request failed with status code "+i.status,i.config,null,i.request,i))},sa}var aa,gp;function Ig(){if(gp)return aa;gp=1;var t=tt;return aa=t.isStandardBrowserEnv()?function(){return{write:function(r,i,o,s,a,l){var u=[];u.push(r+"="+encodeURIComponent(i)),t.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),t.isString(s)&&u.push("path="+s),t.isString(a)&&u.push("domain="+a),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),aa}var la,mp;function jg(){return mp||(mp=1,la=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),la}var ua,wp;function Ug(){return wp||(wp=1,ua=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}),ua}var ca,_p;function Lg(){if(_p)return ca;_p=1;var t=jg(),e=Ug();return ca=function(r,i){return r&&!t(i)?e(r,i):i},ca}var pa,Ep;function Fg(){if(Ep)return pa;Ep=1;var t=tt,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return pa=function(r){var i={},o,s,a;return r&&t.forEach(r.split(`
`),function(u){if(a=u.indexOf(":"),o=t.trim(u.substr(0,a)).toLowerCase(),s=t.trim(u.substr(a+1)),o){if(i[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?i[o]=(i[o]?i[o]:[]).concat([s]):i[o]=i[o]?i[o]+", "+s:s}}),i},pa}var da,bp;function Dg(){if(bp)return da;bp=1;var t=tt;return da=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function o(s){var a=s;return n&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=o(window.location.href),function(a){var l=t.isString(a)?o(a):a;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),da}var fa,Sp;function bs(){if(Sp)return fa;Sp=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,fa=t,fa}var ha,Pp;function Op(){if(Pp)return ha;Pp=1;var t=tt,e=Ag(),n=Ig(),r=Ch,i=Lg(),o=Fg(),s=Dg(),a=Nh(),l=Ss(),u=bs();return ha=function(p){return new Promise(function(y,v){var m=p.data,P=p.headers,h=p.responseType,f;function g(){p.cancelToken&&p.cancelToken.unsubscribe(f),p.signal&&p.signal.removeEventListener("abort",f)}t.isFormData(m)&&delete P["Content-Type"];var w=new XMLHttpRequest;if(p.auth){var O=p.auth.username||"",x=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"";P.Authorization="Basic "+btoa(O+":"+x)}var k=i(p.baseURL,p.url);w.open(p.method.toUpperCase(),r(k,p.params,p.paramsSerializer),!0),w.timeout=p.timeout;function T(){if(w){var I="getAllResponseHeaders"in w?o(w.getAllResponseHeaders()):null,ge=!h||h==="text"||h==="json"?w.responseText:w.response,We={data:ge,status:w.status,statusText:w.statusText,headers:I,config:p,request:w};e(function(Gn){y(Gn),g()},function(Gn){v(Gn),g()},We),w=null}}if("onloadend"in w?w.onloadend=T:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(T)},w.onabort=function(){w&&(v(a("Request aborted",p,"ECONNABORTED",w)),w=null)},w.onerror=function(){v(a("Network Error",p,null,w)),w=null},w.ontimeout=function(){var ge=p.timeout?"timeout of "+p.timeout+"ms exceeded":"timeout exceeded",We=p.transitional||l.transitional;p.timeoutErrorMessage&&(ge=p.timeoutErrorMessage),v(a(ge,p,We.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",w)),w=null},t.isStandardBrowserEnv()){var H=(p.withCredentials||s(k))&&p.xsrfCookieName?n.read(p.xsrfCookieName):void 0;H&&(P[p.xsrfHeaderName]=H)}"setRequestHeader"in w&&t.forEach(P,function(ge,We){typeof m>"u"&&We.toLowerCase()==="content-type"?delete P[We]:w.setRequestHeader(We,ge)}),t.isUndefined(p.withCredentials)||(w.withCredentials=!!p.withCredentials),h&&h!=="json"&&(w.responseType=p.responseType),typeof p.onDownloadProgress=="function"&&w.addEventListener("progress",p.onDownloadProgress),typeof p.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",p.onUploadProgress),(p.cancelToken||p.signal)&&(f=function(I){w&&(v(!I||I&&I.type?new u("canceled"):I),w.abort(),w=null)},p.cancelToken&&p.cancelToken.subscribe(f),p.signal&&(p.signal.aborted?f():p.signal.addEventListener("abort",f))),m||(m=null),w.send(m)})},ha}var va,xp;function Ss(){if(xp)return va;xp=1;var t=tt,e=Ng,n=Rh,r={"Content-Type":"application/x-www-form-urlencoded"};function i(l,u){!t.isUndefined(l)&&t.isUndefined(l["Content-Type"])&&(l["Content-Type"]=u)}function o(){var l;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(l=Op()),l}function s(l,u,c){if(t.isString(l))try{return(u||JSON.parse)(l),t.trim(l)}catch(p){if(p.name!=="SyntaxError")throw p}return(c||JSON.stringify)(l)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:o(),transformRequest:[function(u,c){return e(c,"Accept"),e(c,"Content-Type"),t.isFormData(u)||t.isArrayBuffer(u)||t.isBuffer(u)||t.isStream(u)||t.isFile(u)||t.isBlob(u)?u:t.isArrayBufferView(u)?u.buffer:t.isURLSearchParams(u)?(i(c,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):t.isObject(u)||c&&c["Content-Type"]==="application/json"?(i(c,"application/json"),s(u)):u}],transformResponse:[function(u){var c=this.transitional||a.transitional,p=c&&c.silentJSONParsing,d=c&&c.forcedJSONParsing,y=!p&&this.responseType==="json";if(y||d&&t.isString(u)&&u.length)try{return JSON.parse(u)}catch(v){if(y)throw v.name==="SyntaxError"?n(v,this,"E_JSON_PARSE"):v}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(u){a.headers[u]={}}),t.forEach(["post","put","patch"],function(u){a.headers[u]=t.merge(r)}),va=a,va}var Mg=tt,Bg=Ss(),zg=function(e,n,r){var i=this||Bg;return Mg.forEach(r,function(s){e=s.call(i,e,n)}),e},ya,kp;function Ah(){return kp||(kp=1,ya=function(e){return!!(e&&e.__CANCEL__)}),ya}var Tp=tt,ga=zg,Vg=Ah(),$g=Ss(),Wg=bs();function ma(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wg("canceled")}var Gg=function(e){ma(e),e.headers=e.headers||{},e.data=ga.call(e,e.data,e.headers,e.transformRequest),e.headers=Tp.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Tp.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var n=e.adapter||$g.adapter;return n(e).then(function(i){return ma(e),i.data=ga.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Vg(i)||(ma(e),i&&i.response&&(i.response.data=ga.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Ge=tt,Ih=function(e,n){n=n||{};var r={};function i(c,p){return Ge.isPlainObject(c)&&Ge.isPlainObject(p)?Ge.merge(c,p):Ge.isPlainObject(p)?Ge.merge({},p):Ge.isArray(p)?p.slice():p}function o(c){if(Ge.isUndefined(n[c])){if(!Ge.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],n[c])}function s(c){if(!Ge.isUndefined(n[c]))return i(void 0,n[c])}function a(c){if(Ge.isUndefined(n[c])){if(!Ge.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,n[c])}function l(c){if(c in n)return i(e[c],n[c]);if(c in e)return i(void 0,e[c])}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return Ge.forEach(Object.keys(e).concat(Object.keys(n)),function(p){var d=u[p]||o,y=d(p);Ge.isUndefined(y)&&d!==l||(r[p]=y)}),r},wa,Cp;function jh(){return Cp||(Cp=1,wa={version:"0.23.0"}),wa}var Yg=jh().version,$u={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){$u[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var Rp={};$u.transitional=function(e,n,r){function i(o,s){return"[Axios v"+Yg+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(n?" in "+n:"")));return n&&!Rp[s]&&(Rp[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,s,a):!0}};function Hg(t,e,n){if(typeof t!="object")throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var o=r[i],s=e[o];if(s){var a=t[o],l=a===void 0||s(a,o,t);if(l!==!0)throw new TypeError("option "+o+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+o)}}var qg={assertOptions:Hg,validators:$u},Uh=tt,Qg=Ch,Np=Cg,Ap=Gg,Ps=Ih,Lh=qg,qn=Lh.validators;function Ui(t){this.defaults=t,this.interceptors={request:new Np,response:new Np}}Ui.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Ps(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;n!==void 0&&Lh.assertOptions(n,{silentJSONParsing:qn.transitional(qn.boolean),forcedJSONParsing:qn.transitional(qn.boolean),clarifyTimeoutError:qn.transitional(qn.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(e)===!1||(i=i&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var s;if(!i){var a=[Ap,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(o),s=Promise.resolve(e);a.length;)s=s.then(a.shift(),a.shift());return s}for(var l=e;r.length;){var u=r.shift(),c=r.shift();try{l=u(l)}catch(p){c(p);break}}try{s=Ap(l)}catch(p){return Promise.reject(p)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Ui.prototype.getUri=function(e){return e=Ps(this.defaults,e),Qg(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Uh.forEach(["delete","get","head","options"],function(e){Ui.prototype[e]=function(n,r){return this.request(Ps(r||{},{method:e,url:n,data:(r||{}).data}))}});Uh.forEach(["post","put","patch"],function(e){Ui.prototype[e]=function(n,r,i){return this.request(Ps(i||{},{method:e,url:n,data:r}))}});var Jg=Ui,_a,Ip;function Xg(){if(Ip)return _a;Ip=1;var t=bs();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(s){r=s});var i=this;this.promise.then(function(o){if(i._listeners){var s,a=i._listeners.length;for(s=0;s<a;s++)i._listeners[s](o);i._listeners=null}}),this.promise.then=function(o){var s,a=new Promise(function(l){i.subscribe(l),s=l}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},n(function(s){i.reason||(i.reason=new t(s),r(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var r,i=new e(function(s){r=s});return{token:i,cancel:r}},_a=e,_a}var Ea,jp;function Kg(){return jp||(jp=1,Ea=function(e){return function(r){return e.apply(null,r)}}),Ea}var ba,Up;function Zg(){return Up||(Up=1,ba=function(e){return typeof e=="object"&&e.isAxiosError===!0}),ba}var Lp=tt,em=xh,Oo=Jg,tm=Ih,nm=Ss();function Fh(t){var e=new Oo(t),n=em(Oo.prototype.request,e);return Lp.extend(n,Oo.prototype,e),Lp.extend(n,e),n.create=function(i){return Fh(tm(t,i))},n}var xt=Fh(nm);xt.Axios=Oo;xt.Cancel=bs();xt.CancelToken=Xg();xt.isCancel=Ah();xt.VERSION=jh().version;xt.all=function(e){return Promise.all(e)};xt.spread=Kg();xt.isAxiosError=Zg();pg.exports=xt;Xo.default=xt;(function(t){t.exports=Xo})(cg);const Dh=hd(Ol);var Pi={exports:{}};(function(t){function e(n,r,i){for(var o=i&&typeof r!="number"?i(r):r,s=0,a=n.length;s<a;){var l=s+a>>>1;(i?i(n[l]):n[l])<o?s=l+1:a=l}return s}t.sortedIndex=e,Object.defineProperty(t,"__esModule",{value:!0})})(Pi.exports);var Je={NONE:0,PHRASE:1,WORD:2,CHAR:4,GRAPHIC:8,ALL:63,PUBLIC:64},Fp=/^https?:\/\/uploader\.ongaaccel\.jp\/files\?guid=([a-zA-Z0-9]+)/i,Dp=/^https?:\/\/songle\.jp\/uploads\/([a-zA-Z0-9]+)\.mp3$/i,Mp=/^uploaded:([a-zA-Z0-9]+)$/i,Bp=/^songle\.jp\/uploads\/([a-zA-Z0-9]+)\.mp3$/i,rm=/^https?:\/\/piapro\.jp\/t\/([^/]+)(\/[0-9]+)?$/i,K={getSongPathFromUrl:function(t){if(K.isUploaderUrl(t)){var e=Dp.exec(t);if(e)return"songle.jp/uploads/"+e[1]+".mp3";var n=Fp.exec(t);if(n)return"songle.jp/uploads/"+n[1]+".mp3"}return/https?:\/\/(.+)/.exec(t)[1]},isUploaderUrl:function(t){return Dp.test(t)||Fp.test(t)},isUploaderPath:function(t){return Bp.test(t)||Mp.test(t)},getUploaderGuid:function(t){var e=Bp.exec(t);if(e)return e[1];var n=Mp.exec(t);return n?n[1]:null},getSongUrlFromUploaderGuid:function(t){return t?"https://songle.jp/uploads/"+t+".mp3":null},getAltSongUrlFromUploaderGuid:function(t){return t?"https://api.textalive.jp/songle/me/uploads/"+t:null},getSongUrlFromPath:function(t){var e=K.getUploaderGuid(t);return e?K.getSongUrlFromUploaderGuid(e):"https://"+t},isYouTubeUrl:function(t){return/^https?:\/\/((www|m)\.)?youtube\.com/i.test(t)},isNicovideoUrl:function(t){return/^https?:\/\/(www\.)?nicovideo.jp/i.test(t)},isVideoSiteUrl:function(t){return K.isYouTubeUrl(t)||K.isNicovideoUrl(t)},isPiaproUrl:function(t){return rm.test(t)}},Mh=/^https:\/\/songle\.jp\/api\/v[0-9]+\/users\/(.+)\/uploads\/(.+)$/,Bh=function(t){return Mh.test(t)},im=function(t){var e=Mh.exec(t);return e?{user:e[1],identifier:e[2]}:{user:null,identifier:null}},om=function(){function t(){}return t.prototype.isLicenseLoading=function(e){return!e||!e.song||e.lyrics===void 0||e.backgroundImage===void 0},t.prototype.checkLicenses=function(e){return!this.isLicenseLoading(e)&&this.checkLicense(e.song)&&this.checkLicense(e.lyrics)&&this.checkLicense(e.backgroundImage)},t.prototype.checkLicense=function(e){return e===null||(e.contentType===1?this.checkMusicLicense(e.license):e.contentType===2?this.checkTextLicense(e.license):e.contentType===0&&(!!this.isBackgroundColorAsset(e)||this.checkBackgroundImageLicense(e.license)))},t.prototype.checkMusicLicense=function(e){return e.condition&&e.condition.uploader||!(!e.condition||e.condition.ns||e.condition.nc||e.condition.org||e.condition.clb)},t.prototype.checkTextLicense=function(e){return e.condition&&e.condition.uploader||!(!e.condition||e.condition.ns||e.condition.org||e.condition.clb)},t.prototype.checkBackgroundImageLicense=function(e){return!(!e.condition||e.condition.ns||e.condition.nc||e.condition.org||e.condition.clb)},t.prototype.isUploaderAsset=function(e){return e&&e.url&&(K.isUploaderUrl(e.url)||Bh(e.url))},t.prototype.isPiaproAsset=function(e){return e&&e.url&&K.isPiaproUrl(e.url)},t.prototype.isBlankBackgroundAsset=function(e){return!e||!e.originalUrl},t.prototype.isBackgroundColorAsset=function(e){var n=e&&e.originalUrl?e.originalUrl:"";return/^#[0-9a-fA-F]{3,6}$/.test(n)},t.prototype.isBackgroundPiaproImageAsset=function(e){var n=e&&e.originalUrl?e.originalUrl:"";return K.isPiaproUrl(n)},t.prototype.isBackgroundSpecialImageAsset=function(e){var n=e&&e.originalUrl?e.originalUrl:"";return/^snowmiku2016-([0-9]{2})$/.test(n)},t.prototype.getQueryParameter=function(e){return!e||e.license&&!this.checkBackgroundImageLicense(e.license)?null:e.originalUrl},t}(),Tl=function(t,e){return Tl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Tl(t,e)},he=function(){return he=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},he.apply(this,arguments)};function C(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(u){try{l(r.next(u))}catch(c){o(c)}}function a(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(p){p(c)})).then(s,a)}l((r=r.apply(t,e||[])).next())})}function R(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(p){c=[6,p],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var j={fallback:{protocol:"https"},songle:{domain:"songle.jp"},textalive:{domain:"api.textalive.jp"},content:{domain:"content.textalive.jp"},client:{version:"0.10.0",axios:null}};function W(t,e,n){var r,i,o;return C(this,void 0,void 0,function(){var s;return R(this,function(a){switch(a.label){case 0:s={responseType:(n==null?void 0:n.responseType)||"json"},e&&(s.params=e),n!=null&&n.auth&&(s.auth={username:(r=n.auth)===null||r===void 0?void 0:r.username,password:(i=n.auth)===null||i===void 0?void 0:i.password}),n!=null&&n.withCredentials&&(s.withCredentials=!0),s.headers={},t.indexOf(j.textalive.server)===0&&(j.textalive.appToken&&(s.headers["x-ta-app-token"]=j.textalive.appToken),j.textalive.authUser&&j.textalive.authToken&&(s.headers["x-ta-auth-user"]=j.textalive.authUser,s.headers["x-ta-auth-token"]=j.textalive.authToken)),n!=null&&n.headers&&(s.headers=he(he({},s.headers),n.headers)),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,((n==null?void 0:n.client)||((o=j.client)===null||o===void 0?void 0:o.axios)||Dh).get(t,s)];case 2:return[2,a.sent()];case 3:return a.sent(),[2,null];case 4:return[2]}})})}function sm(t){var e,n,r=0;if(t.length===0)return r;for(e=0,n=t.length;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r}j.songle.protocol=j.songle.protocol||j.fallback.protocol,j.songle.server=j.songle.protocol+"://"+j.songle.domain,j.textalive.protocol=j.textalive.protocol||j.fallback.protocol,j.textalive.server=j.textalive.protocol+"://"+j.textalive.domain,j.textalive.appToken=null,j.content.protocol=j.content.protocol||j.fallback.protocol,j.content.server=j.content.protocol+"://"+j.content.domain;var Cl=new(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}Tl(n,r),n.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"endpoint",{get:function(){return j.textalive.server+"/etc/license"},enumerable:!1,configurable:!0}),e.prototype.read=function(n,r){var i;return r===void 0&&(r=!0),C(this,void 0,void 0,function(){var o,s;return R(this,function(a){switch(a.label){case 0:return[4,W(this.endpoint,{url:n,token:sm("ta"+n),skipOptoutCheck:!!r||void 0})];case 1:return!(o=a.sent())||o.status!==200||!((i=o.data)===null||i===void 0)&&i.error?[2,{originalUrl:null,license:{code:o?o.status:404}}]:((s=o.data).license.code=o.status,s.contentType===0&&(s.css='url("'+s.contentUrl+'")'),[2,s])}})})},e}(om));function Be(t,e,n){var r;return C(this,void 0,void 0,function(){var i;return R(this,function(o){switch(o.label){case 0:e||(e={}),i={responseType:(n==null?void 0:n.responseType)||"json"},n!=null&&n.withCredentials&&(i.withCredentials=!0),i.headers={},t.indexOf(j.textalive.server)===0&&(j.textalive.appToken&&(i.headers["x-ta-app-token"]=j.textalive.appToken),j.textalive.authUser&&j.textalive.authToken&&(i.headers["x-ta-auth-user"]=j.textalive.authUser,i.headers["x-ta-auth-token"]=j.textalive.authToken)),n!=null&&n.postToken&&(i.headers["x-ta-post-token"]=n.postToken),n!=null&&n.headers&&(i.headers||(i.headers={}),i.headers=he(he({},i.headers),n.headers)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,((n==null?void 0:n.client)||((r=j.client)===null||r===void 0?void 0:r.axios)||Dh).post(t,e,i)];case 2:return[2,o.sent()];case 3:return o.sent(),[2,null];case 4:return[2]}})})}function zh(t){return typeof t=="string"&&t.indexOf("data:text/plain;base64,")===0}function zp(t){if(!zh(t))return null;var e=t.split(",")[1];return decodeURIComponent(atob(e).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Vp(t,e,n,r,i){var o=window.screenLeft===void 0?screen.left:window.screenLeft,s=window.screenTop===void 0?screen.top:window.screenTop,a=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-n/2+o,l=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-r/2+s,u=window.open(t,e,"width="+n+",height="+r+",top="+l+",left="+a+(i?","+i:""));return window.focus&&u.focus(),u}var J=new(function(){function t(){this.listeners=[],this.pollingTimeout=null}return Object.defineProperty(t.prototype,"endpoint",{get:function(){return j.textalive.server+"/"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"songleEndpoint",{get:function(){return j.songle.server+"/"},enumerable:!1,configurable:!0}),t.prototype.isLoading=function(){return!!this.userProfile},t.prototype.spoof=function(e){this.userProfile=e},t.prototype.getServerStatus=function(){return C(this,void 0,void 0,function(){return R(this,function(e){return[2,this.serverStatus||this.doGetServerStatus()]})})},t.prototype.doGetServerStatus=function(){return C(this,void 0,void 0,function(){var e;return R(this,function(n){switch(n.label){case 0:return this.serverStatusRequest||(this.serverStatusRequest=W(this.endpoint,null,{withCredentials:!0})),[4,this.serverStatusRequest];case 1:return e=n.sent(),this.serverStatusRequest=null,e&&e.status===200?(this.serverStatus=e.data,[2,this.serverStatus]):[2,null]}})})},t.prototype.getProfile=function(){return C(this,void 0,void 0,function(){return R(this,function(e){return[2,this.userProfile||this.doGetProfile()]})})},t.prototype.doGetProfile=function(){return C(this,void 0,void 0,function(){var e;return R(this,function(n){switch(n.label){case 0:return this.userProfileRequest||(this.userProfileRequest=W(this.endpoint+"profile",null,{withCredentials:!0})),[4,this.userProfileRequest];case 1:return e=n.sent(),this.userProfileRequest=null,e&&e.status===200?(this.emitUserProfile(e.data),this.userProfile=e.data,[2,this.userProfile]):[2,null]}})})},t.prototype.getMergingUsers=function(){return C(this,void 0,void 0,function(){var e;return R(this,function(n){switch(n.label){case 0:return[4,W(this.endpoint+"profile/merge",null,{withCredentials:!0})];case 1:return(e=n.sent())&&e.status===200&&e.data?[2,[e.data.user,e.data.mergeWith]]:[2,[null,null]]}})})},t.prototype.mergeUsers=function(){var e;return C(this,void 0,void 0,function(){var n,r,i,o,s,a;return R(this,function(l){switch(l.label){case 0:return[4,this.getToken()];case 1:return n=l.sent(),[4,Be(this.endpoint+"profile/merge",null,{postToken:n,withCredentials:!0})];case 2:if(!(r=l.sent())||r.status!==200||!(!((e=r.data)===null||e===void 0)&&e.success))return[2,null];for(i=r.data.user,o=0,s=this.listeners;o<s.length;o++)(a=s[o]).onUserMerged&&a.onUserMerged(i);return[2,i]}})})},t.prototype.updateUser=function(e){var n;return C(this,void 0,void 0,function(){var r,i,o,s;return R(this,function(a){switch(a.label){case 0:return[4,this.getToken()];case 1:return r=a.sent(),[4,Be(this.endpoint+"profile",e,{postToken:r,withCredentials:!0})];case 2:return(i=a.sent())&&i.status===200&&(!((n=i.data)===null||n===void 0)&&n.success)?(o=i.data.user,[4,this.getProfile()]):[2,null];case 3:return(s=a.sent()).user=o,this.emitUserProfile(s),[2,o]}})})},t.prototype.isYouTubeUser=function(e){return e&&e.user&&typeof e.user.youtubeIdString=="string"},t.prototype.isPiaproUser=function(e){return e&&e.user&&typeof e.user.piaproIdString=="string"},t.prototype.isSongleUser=function(e){return e&&e.user&&(typeof e.user.songleUserId=="number"&&e.user.songleUserId>=0||typeof e.user.songleAccessToken=="string")},t.prototype.isSpoofingSongleUser=function(e){return this.isSongleUser(e)&&(typeof e.user.id!="number"||e.user.id<0)},t.prototype.addListener=function(e){e&&this.listeners.push(e)},t.prototype.removeListener=function(e){this.listeners=this.listeners.filter(function(n){return n!==e})},t.prototype.emitUserProfile=function(e){this.userProfile=e;for(var n=0,r=this.listeners;n<r.length;n++){var i=r[n];i.onUserProfileUpdated&&i.onUserProfileUpdated(e),this.userProfile.user?i.onUserLoggedIn&&i.onUserLoggedIn(e.user):i.onUserLoggedOut&&i.onUserLoggedOut()}},t.prototype.authenticate=function(e,n){return C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,W(this.endpoint+"profile/logins/basic",null,{auth:{username:String(e),password:n},withCredentials:!0})];case 1:return(r=i.sent())&&r.status===200&&r.data?[2,r.data]:[2,null]}})})},t.prototype.loginTwitter=function(e){return this.login(e,"twitter")},t.prototype.loginGitHub=function(e){return this.login(e,"github")},t.prototype.loginYouTube=function(e){return this.login(e,"youtube")},t.prototype.loginPiapro=function(e){return this.login(e,"piapro")},t.prototype.loginSongle=function(e){return this.login(e,"songle")},t.prototype.login=function(e,n){return e&&e.preventDefault(),!!n&&(Vp(this.endpoint+"profile/logins/"+n,"TextAliveAuth",600,480,"status=no,toolbar=no,menubar=no"),this.startMonitoringAuthState(),!1)},t.prototype.logoutTwitter=function(e){return this.logout(e,"twitter")},t.prototype.logoutGitHub=function(e){return this.logout(e,"github")},t.prototype.logoutYouTube=function(e){return this.logout(e,"youtube")},t.prototype.logoutPiapro=function(e){return this.logout(e,"piapro")},t.prototype.logoutSongle=function(e){return this.logout(e,"songle")},t.prototype.logout=function(e,n){return n===void 0&&(n=null),e&&e.preventDefault(),Vp(this.endpoint+"profile/logouts/"+(n||"all"),"TextAliveAuth",600,480,"status=no,toolbar=no,menubar=no"),this.startMonitoringAuthState(),!1},t.prototype.startMonitoringAuthState=function(){var e=this;this.pollingTimeout&&(clearTimeout(this.pollingTimeout),this.pollingTimeout=null);var n=function(r){if(r.data&&r.data.textalive){if(r.source.postMessage("close",r.origin),r.data.merge)return e.getMergingUsers().then(function(i){for(var o=i[0],s=i[1],a=0,l=e.listeners;a<l.length;a++){var u=l[a];u.onUserMergeRequired&&u.onUserMergeRequired(o,s)}}).catch(function(){}),void window.removeEventListener("message",n);e.doGetProfile(),window.removeEventListener("message",n)}};window.addEventListener("message",n)},t.prototype.getToken=function(){return C(this,void 0,void 0,function(){return R(this,function(e){return this.userProfile?[2,this.userProfile.status.token]:this.token?[2,this.token]:[2,this.doGetToken()]})})},t.prototype.doGetToken=function(){var e;return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(this.endpoint+"profile/token",null,{withCredentials:!0})];case 1:return n=r.sent(),!((e=n==null?void 0:n.data)===null||e===void 0)&&e.token&&(this.token=n.data.token),[2,this.token]}})})},t}()),Rl=new(function(){function t(){}return Object.defineProperty(t.prototype,"endpoint",{get:function(){return j.textalive.server+"/text-parser/"},enumerable:!1,configurable:!0}),t.prototype.parse=function(e){return C(this,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:return[4,J.getToken()];case 1:return n=i.sent(),[4,Be(this.endpoint,{text:e},{postToken:n,withCredentials:!0})];case 2:return(r=i.sent())&&r.status===200?[2,r.data]:[2,null]}})})},t}()),am=new(function(){function t(){}return Object.defineProperty(t.prototype,"endpoint",{get:function(){return j.content.server+"/fonts"},enumerable:!1,configurable:!0}),t.prototype.listAvailableFonts=function(){return C(this,void 0,void 0,function(){var e=this;return R(this,function(n){switch(n.label){case 0:return this.data?[3,2]:[4,this.fetchInfo()];case 1:n.sent(),n.label=2;case 2:return this.data&&this.data.fontFamilies?[2,Object.keys(this.data.fontFamilies).map(function(r){return he({key:r},e.data.fontFamilies[r])})]:[2,[]]}})})},t.prototype.getFrequentChars=function(){return C(this,void 0,void 0,function(){return R(this,function(e){switch(e.label){case 0:return this.data?[3,2]:[4,this.fetchInfo()];case 1:e.sent(),e.label=2;case 2:return[2,this.data&&this.data.frequentChars||""]}})})},t.prototype.fetchInfo=function(){return C(this,void 0,void 0,function(){var e,n,r,i;return R(this,function(o){switch(o.label){case 0:return[4,W(this.endpoint+"/index.json")];case 1:if(!(e=o.sent())||e.status!==200||!e.data)return this.data=null,[2,null];for(r in this.data=e.data,n=this.data.fontUrlPrefix,this.data.fontFamilies)(i=this.data.fontFamilies[r]).typesquare||i.typekit||i.google||i.url||(i.url=n+"/"+r+"-all.css",i.compactUrl=n+"/"+r+".css");return[2]}})})},t}()),lm=new RegExp("\\b([CDEFGAB](?:b|bb)*(?:#|##|sus|maj|min|aug|m|M)*[\\d/]*(?:[CDEFGAB](?:b|bb)*(?:#|##|sus|maj|min|aug|m|M)*[\\d/]*)*\\-){2}");function $p(t,e,n){return!lm.test(t)&&!t.match(/[(].+(?:|).*[)]/)&&(!t.match(/(|).+(|)/)||e!==0&&e!==n.length-2)}function um(t){return!t.match(new RegExp("[(]?"))}var bn={},nt={},cm=function(){function t(){}return Object.defineProperty(t.prototype,"endpoint",{get:function(){return j.songle.server+"/lyrics/"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localLyricsEndpoint",{get:function(){return j.textalive.server+"/etc/lyrics"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timingEndpoint",{get:function(){return j.songle.server+"/songs/"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lyricsParserEndpoint",{get:function(){return j.songle.server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lyricsPostEndpoint",{get:function(){return j.songle.server},enumerable:!1,configurable:!0}),t.prototype.isUploaderUrl=function(e){return Bh(e)},t.prototype.parseUploaderUrl=function(e){return im(e)},t.prototype.getRecentlySynchronizedCount=function(){return C(this,void 0,void 0,function(){var e;return R(this,function(n){switch(n.label){case 0:return[4,W(this.endpoint+"recently_synchronized_count.json")];case 1:return(e=n.sent())&&e.status===200&&e.data?[2,e.data.count]:[2,-1]}})})},t.prototype.getRecentlySynchronizedList=function(e,n){return e===void 0&&(e=1),C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,W(this.endpoint+"recently_synchronized.json",he({page:e},n))];case 1:return(r=i.sent())&&r.status===200?[2,r.data]:[2,null]}})})},t.prototype.load=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(this.timingEndpoint+e+"/lyrics.json")];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.loadDetail=function(e,n){return C(this,void 0,void 0,function(){var r,i;return R(this,function(o){switch(o.label){case 0:return bn[e]&&bn[e][n]?[2,bn[e][n]]:[4,W(this.timingEndpoint+e+"/lyrics/"+(n<0?"latest":n)+".json")];case 1:return(r=o.sent())&&r.status===200?(i=r.data,bn[e]||(bn[e]={}),bn[e][i.id]=i,n<0&&(bn[e][-1]=i),[2,i]):[2,null]}})})},t.prototype.loadDiffs=function(e,n){return C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,W(this.timingEndpoint+e+"/lyrics/"+n+"/diffs.json")];case 1:return(r=i.sent())&&r.status===200?[2,r.data]:[2,null]}})})},t.prototype.loadDiff=function(e,n,r){return C(this,void 0,void 0,function(){return R(this,function(i){switch(i.label){case 0:return[4,W(this.timingEndpoint+e+"/lyrics/"+n+(r<0?"":r===0?"/original":"/diffs/"+r+"/lyrics")+".json")];case 1:return[2,i.sent().data]}})})},t.prototype.loadAllRevisionsForSong=function(e){return C(this,void 0,void 0,function(){var n,r,i,o,s,a,l,u,c,p;return R(this,function(d){switch(d.label){case 0:return[4,this.load(e)];case 1:if(!(n=d.sent()))return[2,null];r=[],i=0,o=n.lyrics,d.label=2;case 2:return i<o.length?(s=o[i],[4,this.loadDetail(e,s.id)]):[3,6];case 3:return a=d.sent(),[4,this.loadDiffs(e,a.id)];case 4:if(l=d.sent(),r.push({lyrics:a,updated_at:new Date(a.created_at)}),Array.isArray(l))for(u=0,c=l;u<c.length;u++)p=c[u],r.push({diff_id:p.id,source_id:p.source_id,lyrics:a,updated_at:new Date(p.updated_at)});d.label=5;case 5:return i++,[3,2];case 6:return[2,r.sort(function(y,v){var m=v.updated_at.getTime()-y.updated_at.getTime();return m===0?v.diff_id-y.diff_id:m})]}})})},t.prototype.getLatestRevision=function(e){return e.filter(function(n){return!(n.lyrics.processing||n.lyrics.failed)})[0]},t.prototype.fetchLocalLyricBody=function(e){return C(this,void 0,void 0,function(){var n,r,i,o;return R(this,function(s){switch(s.label){case 0:return this.verbose&&console.log(typeof e=="string"?"load locally-stored lyrics for song code":"load locally-stored lyrics for lyric id",e),n={},typeof e=="string"?n.code=e:n.lyricId=e,[4,W(this.localLyricsEndpoint+"/token",n)];case 1:return!(r=s.sent())||r.status!==200||r.data.error?[2,null]:(i=r.data.token,n.token=i,[4,W(this.localLyricsEndpoint,n)]);case 2:return(o=s.sent())&&o.status===200?(this.verbose&&console.log("loaded locally-stored lyrics with params",n),[2,o.data]):[2,null]}})})},t.prototype.fetchSongleLyricBody=function(e,n){return C(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,p,d,y;return R(this,function(v){switch(v.label){case 0:if(!(r=this.parseUploaderUrl(e)).identifier)throw new Error("unsupported lyrics url "+e);return[4,J.getProfile()];case 1:if(i=v.sent(),!J.isSongleUser(i))throw new Error("Songle authentication is required");return nt[o=e+"//"+n]?[2,nt[o]]:(J.isSpoofingSongleUser(i)&&(a=i.user,l=a.songleUserId,u=a.songleAccessToken,c=a.songleRefreshToken,s={songleUserId:l,songleAccessToken:u,songleRefreshToken:c}),[4,W(j.textalive.server+"/songle/users/"+r.user+"/uploads/"+r.identifier,s,{withCredentials:!0,responseType:"text"})]);case 2:return p=v.sent(),d=p==null?void 0:p.data,y=d?{text:d,url:e}:null,d&&(nt[o]=y),[2,y]}})})},t.prototype.fetchPiaproLyricBody=function(e,n){return C(this,void 0,void 0,function(){var r,i,o,s,a;return R(this,function(l){switch(l.label){case 0:if(!K.isPiaproUrl(e))throw new Error("unsupported lyrics url "+e);return nt[r=e+"//"+n]?[2,nt[r]]:[4,Cl.read(e,!0)];case 1:if(i=l.sent(),!Cl.isPiaproAsset(i))throw new Error("unsupported piapro lyrics url "+e);return o=zp(i.contentUrl),[4,this.parseLyricBody(o,n)];case 2:return s=l.sent(),(a=s?{text:s,artist:{name:i.authorName,url:i.authorPath?"https://piapro.jp"+i.authorPath:null},name:i.name,url:e}:null)&&(nt[r]=a),[2,a]}})})},t.prototype.fetchInternalLyricBody=function(e,n){return C(this,void 0,void 0,function(){var r;return R(this,function(i){if(r=new URL(e),typeof location>"u"||location.protocol!==r.protocol||location.hostname!==r.hostname)throw new Error("direct access not supported for lyrics url "+e);return[2,this.fetchCrossOriginLyricBody(e,n)]})})},t.prototype.fetchCrossOriginLyricBody=function(e,n){return C(this,void 0,void 0,function(){var r,i,o,s,a;return R(this,function(l){switch(l.label){case 0:return nt[r=e+"//"+n]?[2,nt[r]]:[4,W(e,null,{responseType:"text"})];case 1:return i=l.sent(),o=i==null?void 0:i.data,i&&i.status===200&&o?[4,this.parseLyricBody(o,n)]:(this.verbose&&console.error("direct access not supported for lyrics url "+e),[2,this.fetchProxiedLyricBody(e,n)]);case 2:return s=l.sent(),(a=s?{text:s,url:e}:null)&&(nt[r]=a),[2,a]}})})},t.prototype.fetchProxiedLyricBody=function(e,n){return C(this,void 0,void 0,function(){var r,i,o;return R(this,function(s){switch(s.label){case 0:return nt[r=e+"//"+n]?[2,nt[r]]:(this.verbose&&console.log("load lyrics from the external server",e),[4,Wp(this.lyricsParserEndpoint+n,function(a){return new Promise(function(l,u){a.Songle.Utils.url2Lyric(e,function(c){return l(c)},function(c){return u(c)})})},this.verbose)]);case 1:return i=s.sent(),(o=i?{text:i,url:e}:null)&&(nt[r]=o),[2,o]}})})},t.prototype.parseLyricBody=function(e,n){return C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Wp(this.lyricsParserEndpoint+n,function(o){return o.Songle.Utils.parseLyric(e)},this.verbose)];case 1:return r=i.sent(),[3,3];case 2:return i.sent(),r=function(o){return function(s){return s=function(a){var l,u=a.split(/\n/);return u.forEach(function(c,p){c.match(/^\S+\S+$/m)&&(l=p)}),l!==void 0&&l<5?u.slice(l+1).join(`
`):a}(s),(s=function(a){var l=new RegExp("[\\u4E00-\\u9FAF|\\uFF66-\\uFF9D|\\u31F0-\\u31FF]+[\\(]([\\u3041-\\u3096\\u309D-\\u309F]+)[\\)]","g");return a.replace(l,function(u,c){return c})}(s=function(a){for(var l,u,c,p,d,y=new RegExp("[(]?(.)[)]?","g");(u=y.exec(a))!==null;)c=u[1],p=new RegExp("^("+c+"[\\s\\S]+?)(?=\\n\\n[^\\u3000|\\s])","m"),(d=a.match(p))!==null&&(l=d[1].replace(new RegExp("^"+c,"m"),"").replace(new RegExp("^\\n"),"").replace(new RegExp("^\\u3000","mg"),""),a=(a=a.replace(p,function(){return l})).replace(new RegExp("[\\(]?"+c+"[\\)]?","g"),l).replace(new RegExp("^"+c,"m"),""));return a}(s=s.split(/\n/).filter($p).join(`
`)))).split(/\n/).filter(um).join(`
`).replace(/\n\n+/g,`

`).replace(/\n+$/g,`
`)}(o.replace(/^\ufeff/,"").replace(/\r/,"").split(/\n/).filter($p).filter(function(s){return!s.match(/^#/)}).join(`
`).replace(/^\s+/,""))}(e),[3,3];case 3:return[2,r]}})})},t.prototype.fetchLyricBody=function(e,n){var r,i,o=n.parserPath,s=n.directAccess;return C(this,void 0,void 0,function(){var a,l;return R(this,function(u){switch(u.label){case 0:if(zh(e))return this.verbose&&console.log("load lyrics from the data url",e),[2,{text:zp(e)}];if(this.isUploaderUrl(e))return[2,this.fetchSongleLyricBody(e,o)];if(K.isPiaproUrl(e))return[2,this.fetchPiaproLyricBody(e,o)];u.label=1;case 1:return u.trys.push([1,5,,6]),a=new URL(e),s||typeof location<"u"&&location.protocol!==a.protocol&&a.protocol!=="https:"?[3,4]:typeof location<"u"&&location.hostname!==a.hostname?[3,2]:(s=!0,[3,4]);case 2:return[4,W(this.localLyricsEndpoint+"/cors",{url:e})];case 3:l=u.sent(),s=l&&l.status===200&&((i=(r=l.data)===null||r===void 0?void 0:r.data)===null||i===void 0?void 0:i.enabled),u.label=4;case 4:return s?(this.verbose&&console.log("load lyrics directly",e),[2,this.fetchCrossOriginLyricBody(e,o)]):[3,6];case 5:return u.sent(),[3,6];case 6:return[2,this.fetchProxiedLyricBody(e,o)]}})})},t.prototype.post=function(e){return C(this,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:return n=e.forceUpdate?{url:e.lyricsUrl,force_create:"true"}:{url:e.lyricsUrl},[4,Be(this.lyricsPostEndpoint+"/songs/"+e.songId+"/lyrics.json",n)];case 1:return(r=i.sent())&&r.status===200&&r.data?[2,{success:!0,lyricsId:r.data.id}]:[2,{success:!1,error:"failed to update lyrics url"}]}})})},t.prototype.postPrivate=function(e){return C(this,void 0,void 0,function(){var n,r,i,o,s,a,l,u,c,p,d;return R(this,function(y){switch(y.label){case 0:return[4,J.getProfile()];case 1:if(n=y.sent(),!J.isSongleUser(n))throw new Error("Songle authentication is required");return J.isSpoofingSongleUser(n)?(i=n.user,o=i.songleUserId,s=i.songleAccessToken,a=i.songleRefreshToken,l={songleUserId:o,songleAccessToken:s,songleRefreshToken:a},r="?"+Object.keys(l).map(function(v){return v+"="+encodeURIComponent(l[v])}).join("&")):r="",u=e.songId,c=e.lyricsText,(p=new FormData).append("text",c),[4,Be(j.textalive.server+"/songle/me/songs/"+u+"/lyrics.json"+r,p,{withCredentials:!0})];case 2:return(d=y.sent())&&d.status===200&&d.data?[2,{success:!0,lyrics:d.data.data.lyric}]:[2,{success:!1,error:"failed to post lyrics text"}]}})})},t.prototype.update=function(e){var n;return C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,Be(this.lyricsPostEndpoint+"/songs/"+e.songCode+"/lyrics/"+e.lyricsId+"/diffs.json",e.lyricsData?{lyric:JSON.stringify(e.lyricsData)}:{source_diff_id:e.lyricsDiffId})];case 1:return r=i.sent(),[2,!((n=r==null?void 0:r.data)===null||n===void 0)&&n.lyric_diff?{success:r.status===200,lyricsId:r.data.lyric_diff.lyric_id,lyricsDiffId:r.data.lyric_diff.id}:{success:r.status===200}]}})})},t}();function Wp(t,e,n){var r,i=this;return typeof window>"u"||!(!((r=window==null?void 0:window.navigator)===null||r===void 0)&&r.userAgent)||window.navigator.userAgent.includes("Node.js")||window.navigator.userAgent.includes("jsdom")?function(o,s,a){return a&&console.log("parse lyrics: loading on Node.js",o),new Promise(function(l,u){W(o,{responseType:"text"}).then(function(c){var p=c.data,d=new Function("let g=global;global={};"+p+";let res=global;global=g"),y={};try{d.bind(y)(),l(s(y))}catch(v){u(v)}}).catch(u)})}(t,e,n):(n&&console.log("parse lyrics: loading",t),new Promise(function(o,s){try{var a=document.createElement("script"),l=null;window.module&&(l=window.module,delete window.module),a.src=t,a.onload=function(){return C(i,void 0,void 0,function(){var u,c;return R(this,function(p){switch(p.label){case 0:document.body.removeChild(a),n&&console.log("parse lyrics: load",t),window.Songle&&window.Songle.Utils&&window.Songle.Utils.url2Lyric||(l&&(window.module=l),s("url2Lyric not found")),p.label=1;case 1:return p.trys.push([1,3,4,5]),u=o,[4,e(window)];case 2:return u.apply(void 0,[p.sent()]),[3,5];case 3:return c=p.sent(),s(c),[3,5];case 4:return l&&(window.module=l),[7];case 5:return[2]}})})},a.onerror=function(u){return s(u.message)},document.body.appendChild(a)}catch(u){console.error("failed to call lyrics parser",t,u)}}))}var pm=new cm,Gt={},Sn={},dm=new(function(){function t(){}return Object.defineProperty(t.prototype,"endpoint",{get:function(){return j.textalive.server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"songleEndpoint",{get:function(){return j.songle.server},enumerable:!1,configurable:!0}),t.prototype.getSongPathFromUrl=function(e){return K.getSongPathFromUrl(e)},t.prototype.isUploaderUrl=function(e){return K.isUploaderUrl(e)},t.prototype.isUploaderPath=function(e){return K.isUploaderPath(e)},t.prototype.getUploaderGuid=function(e){return K.getUploaderGuid(e)},t.prototype.getAltSongUrlFromUploaderGuid=function(e){return K.getAltSongUrlFromUploaderGuid(e)},t.prototype.getSongUrlFromUploaderGuid=function(e){return K.getSongUrlFromUploaderGuid(e)},t.prototype.getSongUrlFromPath=function(e){return K.getSongUrlFromPath(e)},t.prototype.isYouTubeUrl=function(e){return K.isYouTubeUrl(e)},t.prototype.isNicovideoUrl=function(e){return K.isNicovideoUrl(e)},t.prototype.isVideoSiteUrl=function(e){return K.isVideoSiteUrl(e)},t.prototype.isPiaproUrl=function(e){return K.isPiaproUrl(e)},t.prototype.load=function(e){return C(this,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:return n=e.code||typeof e.id=="number"&&String(e.id)||encodeURIComponent(e.songPath),Gt[n]?[2,Gt[n]]:(Gt[n]=this.doLoad(n),[4,Gt[n]]);case 1:return r=i.sent(),this.use(r),[2,r]}})})},t.prototype.use=function(e){if(e){var n=String(e.song.id),r=e.song.code,i=this.getSongPathFromUrl(e.song.permalink);Gt[n]=Gt[r]=Gt[i]=Promise.resolve(e)}},t.prototype.clearCache=function(){Gt={},Sn={}},t.prototype.doLoad=function(e){var n;return C(this,void 0,void 0,function(){var r,i,o;return R(this,function(s){switch(s.label){case 0:return[4,W(this.songleEndpoint+"/songs/"+e+"?format=json")];case 1:return(r=s.sent())&&r.status===200?(i=r.data,this.isUploaderUrl((n=i==null?void 0:i.song)===null||n===void 0?void 0:n.permalink)?[4,this.doLoadPrivateSong(i.song.id)]:[3,3]):[2,null];case 2:if(o=s.sent())return i.status=i.status||{},i.status.owner=!0,[2,he(he({},i),{song:o})];i.status=i.status||{},i.status.owner=!1,s.label=3;case 3:return[2,i]}})})},t.prototype.doLoadPrivateSong=function(e){var n,r;return C(this,void 0,void 0,function(){var i,o,s,a,l,u,c;return R(this,function(p){switch(p.label){case 0:return[4,J.getProfile()];case 1:return i=p.sent(),J.isSongleUser(i)?(J.isSpoofingSongleUser(i)&&(s=i.user,a=s.songleUserId,l=s.songleAccessToken,u=s.songleRefreshToken,o={songleUserId:a,songleAccessToken:l,songleRefreshToken:u}),[4,W(this.endpoint+"/songle/me/songs/"+e+".json",o,{withCredentials:!0})]):[2,null];case 2:return(c=p.sent())&&c.status===200&&(!((r=(n=c.data)===null||n===void 0?void 0:n.data)===null||r===void 0)&&r.song)?[2,c.data.data.song]:[2,null]}})})},t.prototype.loadInfo=function(e,n){return C(this,void 0,void 0,function(){var r;return R(this,function(i){return r=this.cacheKey(e,n),Sn[r]||(Sn[r]=this.doLoadInfo(e,{min:!0,revisions:n==null?void 0:n.revisions})),[2,Sn[r]]})})},t.prototype.loadDetailInfo=function(e,n){return C(this,void 0,void 0,function(){var r;return R(this,function(i){return r=this.cacheKey(e,n)+"/dt",Sn[r]||(Sn[r]=this.doLoadInfo(e,{min:!1,revisions:n==null?void 0:n.revisions})),[2,Sn[r]]})})},t.prototype.cacheKey=function(e,n){var r=String(e);return n!=null&&n.revisions&&(typeof n.revisions.chord=="number"&&(r+="/cd"+n.revisions.chord),typeof n.revisions.beat=="number"&&(r+="/bt"+n.revisions.beat),typeof n.revisions.chorus=="number"&&(r+="/cr"+n.revisions.chorus)),r},t.prototype.doLoadInfo=function(e,n){var r=n===void 0?{min:!0}:n,i=r.min,o=r.revisions;return C(this,void 0,void 0,function(){var s,a;return R(this,function(l){switch(l.label){case 0:return s={min:i?1:0},typeof(o==null?void 0:o.chord)=="number"&&(s.chord_revision_id=o.chord),typeof(o==null?void 0:o.beat)=="number"&&(s.beat_revision_id=o.beat),typeof(o==null?void 0:o.chorus)=="number"&&(s.chorus_revision_id=o.chorus),[4,W(this.songleEndpoint+"/songs/"+e+"/info.json",s)];case 1:return(a=l.sent())&&a.status===200?[2,a.data]:[2,null]}})})},t.prototype.loadVocalAmplitude=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(this.songleEndpoint+"/songs/"+e+"/vamplitude.json")];case 1:return(n=r.sent())&&n.status===200&&n.data?[2,n.data]:[2,null]}})})},t.prototype.loadValenceArousal=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(this.songleEndpoint+"/songs/"+e+"/av.json")];case 1:return(n=r.sent())&&n.status===200&&n.data?[2,n.data]:[2,null]}})})},t.prototype.list=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return e===void 0&&(e={}),[4,W(this.endpoint+"/songs",e)];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.listPrivate=function(){return C(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return R(this,function(l){switch(l.label){case 0:return[4,J.getProfile()];case 1:return e=l.sent(),J.isSongleUser(e)?(J.isSpoofingSongleUser(e)&&(r=e.user,i=r.songleUserId,o=r.songleAccessToken,s=r.songleRefreshToken,n={songleUserId:i,songleAccessToken:o,songleRefreshToken:s}),[4,W(this.endpoint+"/songle/me/songs.json",he(he({},n),{private:!0}),{withCredentials:!0})]):[2,{data:null,error:"Songle authentication is required"}];case 2:return(a=l.sent())&&a.status===200?[2,a.data]:[2,{data:null,error:"private songs not found"}]}})})},t.prototype.create=function(e){return C(this,void 0,void 0,function(){return R(this,function(n){return[2,this.doCreate(e,!1)]})})},t.prototype.createPrivate=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,J.getProfile()];case 1:return n=r.sent(),J.isSongleUser(n)?[2,this.doCreate(e,!0)]:[2,{success:!1,song:null,error:"Songle authentication is required"}]}})})},t.prototype.doCreate=function(e,n){var r,i;return C(this,void 0,void 0,function(){var o,s,a,l,u;return R(this,function(c){switch(c.label){case 0:return o=e.url,s=e.name,a=e.artistName,[4,J.getToken()];case 1:return l=c.sent(),[4,Be(n?this.endpoint+"/etc/songs/private":this.endpoint+"/etc/songs",{url:o,name:s,artist:a},{postToken:l,withCredentials:!0})];case 2:return(u=c.sent())&&u.status===200?n?[2,{success:!0,song:u.data.data.song}]:[2,{success:!0,song:u.data.song}]:[2,{success:!1,error:(!((r=u==null?void 0:u.data)===null||r===void 0)&&r.data?u.data.data.message:(i=u==null?void 0:u.data)===null||i===void 0?void 0:i.message)||"failed to register a song"}]}})})},t.prototype.uploadPrivate=function(e){return C(this,void 0,void 0,function(){var n,r,i,o,s,a,l,u,c;return R(this,function(p){switch(p.label){case 0:return[4,J.getProfile()];case 1:if(n=p.sent(),!J.isSongleUser(n))throw new Error("Songle authentication is required");return J.isSpoofingSongleUser(n)?(i=n.user,o=i.songleUserId,s=i.songleAccessToken,a=i.songleRefreshToken,l={songleUserId:o,songleAccessToken:s,songleRefreshToken:a},r="?"+Object.keys(l).map(function(d){return d+"="+encodeURIComponent(l[d])}).join("&")):r="",(u=new FormData).append("file",e),[4,Be(this.endpoint+"/songle/me/uploads.json"+r,u,{withCredentials:!0})];case 2:return(c=p.sent())&&c.status===200&&c.data?[2,c.data.data]:[2,null]}})})},t.prototype.search=function(e,n){return n===void 0&&(n=!0),C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,W(this.songleEndpoint+"/songs/search.json",{q:e,lyrics:n?1:0})];case 1:return(r=i.sent())&&r.status===200&&r.data?[2,{success:!0,data:r.data}]:[2,{success:!1}]}})})},t.prototype.copySongMap=function(e){var n;return C(this,void 0,void 0,function(){var r,i,o,s;return R(this,function(a){switch(a.label){case 0:return r=e.sourceId,i=e.destinationId,o=e.types||["beat","chord","chorus","melody"],[4,Be(this.endpoint+"/songle/me/songs/"+i+"/actions/copy_music_map.json",{source_id:r,types:o},{withCredentials:!0})];case 1:return(s=a.sent())&&(!((n=s.data)===null||n===void 0)&&n.success)?[2,{success:!0}]:[2,{success:!1,error:s==null?void 0:s.data}]}})})},t.prototype.createStage=function(){var e;return C(this,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:return[4,J.getProfile()];case 1:return n=i.sent(),[4,Be(this.endpoint+"/etc/songs/stage",null,{postToken:(e=n==null?void 0:n.status)===null||e===void 0?void 0:e.token,withCredentials:!0})];case 2:return[2,((r=i.sent())==null?void 0:r.data)||null]}})})},t}()),fm=function(){function t(){}return Object.defineProperty(t.prototype,"endpoint",{get:function(){return j.textalive.server+"/templates/"},enumerable:!1,configurable:!0}),t.prototype.list=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(""+this.endpoint,e)];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.load=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(""+(this.endpoint+e))];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.loadByName=function(e){return C(this,void 0,void 0,function(){var n,r,i;return R(this,function(o){switch(o.label){case 0:return r="latest",e&&(n=e.match(/(.+)@([0-9]+)/))&&(e=n[1],r=n[2]),[4,W(this.endpoint+e+"/"+r)];case 1:return(i=o.sent())&&i.status===200?[2,i.data]:r!=="latest"?[2,this.loadByName(e)]:[2,null]}})})},t.prototype.loadForVideo=function(e,n){return n===void 0&&(n={script:!0,withoutAuthors:!0}),C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,W(this.endpoint+"for/"+e,n)];case 1:return(r=i.sent())&&r.status===200?[2,r.data]:[2,null]}})})},t.prototype.create=function(e){return C(this,void 0,void 0,function(){var n,r,i;return R(this,function(o){switch(o.label){case 0:return[4,J.getToken()];case 1:return n=o.sent(),[4,Be(this.endpoint,e,{postToken:n,withCredentials:!0})];case 2:return(r=o.sent())?r.status!==200||Array.isArray(r.data)||r.data.error?(i=Array.isArray(r.data)?{parseErrors:r.data}:r.data,[2,he(he({},i),{success:!1})]):[2,he(he({},r.data),{success:!0})]:[2,{success:!1}]}})})},t.prototype.listContributors=function(e,n){return C(this,void 0,void 0,function(){var r;return R(this,function(i){switch(i.label){case 0:return[4,W(""+this.endpoint+e+"/"+n+"/contributors")];case 1:return(r=i.sent())&&r.status===200?[2,r.data]:[2,null]}})})},t}(),Qn=new fm,hm=new(function(){function t(){}return Object.defineProperty(t.prototype,"endpoint",{get:function(){return j.textalive.server+"/videos/"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rendererEndpoint",{get:function(){return j.textalive.server+"/renderer/"},enumerable:!1,configurable:!0}),t.prototype.list=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(""+this.endpoint,e)];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.load=function(e){return C(this,void 0,void 0,function(){var n,r,i,o,s,a,l;return R(this,function(u){switch(u.label){case 0:return n={},[4,J.getProfile()];case 1:return r=u.sent(),J.isSpoofingSongleUser(r)&&(i=r.user,o=i.songleUserId,s=i.songleAccessToken,a=i.songleRefreshToken,n={songleUserId:o,songleAccessToken:s,songleRefreshToken:a}),[4,W(""+(this.endpoint+e),n,{withCredentials:!0})];case 2:return(l=u.sent())&&l.status===200?[2,l.data]:[2,null]}})})},t.prototype.create=function(e){return C(this,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:return[4,J.getToken()];case 1:return n=i.sent(),[4,Be(this.endpoint,e,{postToken:n,withCredentials:!0})];case 2:return(r=i.sent())?r.status!==200||r.data.error?[2,he(he({},r.data),{success:!1})]:[2,he(he({},r.data),{success:!0})]:[2,{success:!1}]}})})},t.prototype.delete=function(e){return C(this,void 0,void 0,function(){var n,r;return R(this,function(i){switch(i.label){case 0:return[4,J.getToken()];case 1:return n=i.sent(),[4,Be(this.endpoint+"delete",{id:e},{postToken:n,withCredentials:!0})];case 2:return(r=i.sent())&&r.status===200?[2,{success:!0,video:r.data}]:[2,{success:!1,video:null}]}})})},t.prototype.listContributors=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(""+this.endpoint+e+"/contributors",null,{withCredentials:!0})];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.listRenderings=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(this.rendererEndpoint+"list",{videoId:e},{withCredentials:!0})];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.getRenderingStatus=function(e){return C(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return[4,W(this.rendererEndpoint+"status",{id:e},{withCredentials:!0})];case 1:return(n=r.sent())&&n.status===200?[2,n.data]:[2,null]}})})},t.prototype.render=function(e,n,r){return C(this,void 0,void 0,function(){var i,o,s;return R(this,function(a){switch(a.label){case 0:return[4,J.getToken()];case 1:return i=a.sent(),o={token:i,videoId:e,quality:n},r&&(o.authentication=!0),[4,Be(this.rendererEndpoint+"render",o,{withCredentials:!0})];case 2:return(s=a.sent())&&s.status===200?[2,s.data]:[2,null]}})})},t.prototype.getDownloadInfo=function(){return C(this,void 0,void 0,function(){var e;return R(this,function(n){switch(n.label){case 0:return e={endpoint:this.rendererEndpoint+"download"},[4,J.getToken()];case 1:return[2,(e.token=n.sent(),e)]}})})},t}()),vm={asset:Cl,endpoint:j,lyrics:pm,song:dm,template:Qn,text:Rl,font:am,user:J,video:hm},Nl=function(t,e){return Nl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Nl(t,e)};function Li(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Nl(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Wu=function(){function t(){this._parent=null,this._children=[],this._previous=null,this._next=null,this._runtime=null,this._templates=[]}return Object.defineProperty(t.prototype,"video",{get:function(){return this.parent&&this.parent.video},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previous",{get:function(){return this._previous},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._data?this._data.startTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._data?this._data.endTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.endTime-this.startTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rendering",{get:function(){return this._runtime?this._runtime.rendering:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this._runtime?this._runtime.graphics:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templates",{get:function(){return this._templates.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateCount",{get:function(){return this._templates.length},enumerable:!1,configurable:!0}),t.prototype.contains=function(e){return e>=this.startTime&&e<=this.endTime},t.prototype.overlaps=function(e,n){return this.contains(e)||this.contains(n)||this.startTime<=e&&this.endTime>=n},t.prototype.progress=function(e){return this.contains(e)?(e-this.startTime)/this.duration:-1},t.prototype.maximize=function(){var e=!1,n=this.endTime,r=Math.max(this._parent===null?0:this._parent.startTime,this._previous===null?0:this._previous.endTime);r!==this.startTime&&(this.moveWithChildren(r-this.startTime),e=!0);var i=Math.min(this._parent===null?this.video.duration:this._parent.endTime,this._next===null?this.video.duration:this._next.startTime);return i!==this.endTime&&(this._data.endTime=i,e=n!==i),e},t.prototype.moveWithChildren=function(e){var n=[];for(n.push(this);n.length>0;){var r=n.pop();r._children!=null&&r._children.forEach(function(i){return n.push(i)}),r._data.startTime+=e,r._data.endTime+=e}},t.prototype.getTemplate=function(e){return e===void 0&&(e=0),e<0||e>=this._templates.length?null:this._templates[e]},t.prototype.addTemplateAt=function(e,n){this._templates.splice(n,0,e),e.assignedUnit=this},t.prototype.addTemplate=function(e){this._templates.push(e),e.assignedUnit=this},t.prototype.removeTemplates=function(){for(var e=this._templates.slice();this._templates.length>0;)this._templates.pop();return e},t.prototype.removeTemplateAt=function(e){if(e<0||e>=this._templates.length)return null;var n=this._templates.splice(e,1)[0];return n.assignedUnit=null,n},t.prototype.removeTemplate=function(e){for(var n=0;n<this._templates.length;n++){var r=this._templates[n];if(r===e)return this._templates.splice(n,1),e.assignedUnit=null,r}return null},t.prototype.getType=function(){return Je.NONE},t.prototype.toString=function(){return"RenderingUnit"},t}();function ym(t,e){return typeof e=="number"&&!isNaN(e)&&e>t?e:t}function gm(t,e){return typeof e=="number"&&!isNaN(e)&&e<t?e:t}var Os=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Li(e,t),Object.defineProperty(e.prototype,"text",{get:function(){var n="";return this.children.forEach(function(r){n+=r.text}),n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.children.reduce(function(n,r){return n===null?r.color:n===void 0||n.eq(r.color)?n:void 0},null)},set:function(n){n!==null&&this.children.forEach(function(r){r.color=n})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{set:function(n){n!==null&&this.children.forEach(function(r){r.font=n})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.children.reduce(function(n,r){var i=r.fontFamily;return n===void 0||n!==null&&n!==i?void 0:i},null)},set:function(n){this.children.forEach(function(r){r.fontFamily=n})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this.children.reduce(function(n,r){var i=r.fontStyle;return n===void 0||n!==null&&n!==i?void 0:i},null)},set:function(n){this.children.forEach(function(r){r.fontStyle=n})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.children.length<=0?0:this.children.reduce(function(n,r){return n+r.fontSize},0)/this.children.length},set:function(n){this.children.forEach(function(r){r.fontSize=n})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"advance",{get:function(){return this.children.reduce(function(n,r){return n+r.advance},0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ascent",{get:function(){return this.children.reduce(function(n,r){return Math.max(n,r.ascent)},0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"descent",{get:function(){return this.children.reduce(function(n,r){return Math.max(n,r.descent)},0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.ascent+this.descent},enumerable:!1,configurable:!0}),e.prototype.expandTime=function(n){return{startTime:gm(this.startTime,n.startTime),endTime:ym(this.endTime,n.endTime)}},e.prototype.toString=function(){return this.text},e}(Wu),Fi=function(){function t(e){this.a=0,this.r=0,this.g=0,this.b=0,this.from(e)}return Object.defineProperty(t.prototype,"value",{get:function(){return(((this.a<<8)+this.r<<8)+this.g<<8)+this.b},set:function(e){this.fromNumber(e,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return"rgb("+this.r+","+this.g+","+this.b+")"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgba",{get:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a/255+")"},enumerable:!1,configurable:!0}),t.prototype.eq=function(e){return typeof this==typeof e&&e instanceof t&&this.value===e.value},t.prototype.toString=function(e){return e===void 0&&(e=!0),e?this.rgba:this.rgb},t.prototype.from=function(e){if(e===void 0&&(e="#000"),typeof e=="object")return e?typeof e.value=="number"?void(this.value=e.value):typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"?(this.a=typeof e.a=="number"?e.a:255,this.r=e.r,this.g=e.g,void(this.b=e.b)):void 0:void 0;typeof e=="string"?this.fromString(e):typeof e=="number"&&this.fromNumber(e)},t.prototype.fromString=function(e){if(e){if(e.charAt(0)==="#"&&(e=e.substr(1)),e.length===4){var n=e.charAt(0),r=e.charAt(1),i=e.charAt(2),o=e.charAt(3);e=""+n+n+r+r+i+i+o+o}e.length===3&&(r=e.charAt(0),i=e.charAt(1),o=e.charAt(2),e=""+r+r+i+i+o+o);var s=parseInt(e,16);this.fromNumber(s,e.length===8)}},t.prototype.fromNumber=function(e,n){n===void 0&&(n=!0),isNaN(e)||(this.a=n?e>>24&255:255,this.r=e>>16&255,this.g=e>>8&255,this.b=255&e)},t}(),Vh=function(){function t(e,n,r){e===void 0&&(e="Noto Sans Japanese"),n===void 0&&(n=40),r===void 0&&(r=""),this._family=e,this._size=n,this._style=r}return Object.defineProperty(t.prototype,"family",{get:function(){return this._family},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},enumerable:!1,configurable:!0}),t.prototype.deriveFamily=function(e){return new t(e,this._size,this._style)},t.prototype.deriveStyle=function(e){return new t(this._family,this._size,e)},t.prototype.deriveSize=function(e){return new t(this._family,e,this._style)},t.prototype.clone=function(){return new t(this._family,this._size,this._style)},t.prototype.eq=function(e){return this._family===e._family&&this._size===e._size&&this._style===e._style},t.prototype.toString=function(e){e===void 0&&(e=1);var n,r=function(i){if(!i||i.length<=0)return[];for(var o=[],s="",a=!1,l=!1,u=!1,c=0,p=i;c<p.length;c++){var d=p[c];if(l?u?u=!1:d==="\\"?u=!0:d===l&&(l=!1):d==='"'||d==="'"?l=d:d===","&&(a=!0),a){var y=s.trim();y!==""&&o.push(y),s="",a=!1}else s+=d}var v=s.trim();return v!==""&&o.push(v),o}(this._family);return n=r.length<1?"":r.length>1?" "+r.join(", "):(n=r[0]).length>1&&n[0]!==n[n.length-1]||n[0]!=="'"&&n[0]!=='"'?" '"+n+"'":" "+n,this._style+(this._style.length>0?" ":"")+this._size*e+"px"+n},t}(),Oi=function(t){function e(n){var r=t.call(this)||this;return r._data=n,r._font=new Vh(n&&n.fontFamily,n&&n.fontSize,n&&n.fontStyle),r._color=new Fi,r}return Li(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._data&&this._data.char||"?"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"advance",{get:function(){return this._runtime?this._runtime.advance:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ascent",{get:function(){return this._runtime?this._runtime.ascent:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"descent",{get:function(){return this._runtime?this._runtime.descent:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(n){n===null||this.font.eq(n)||(this._font=n.clone(),this._data.fontFamily=n.family,this._data.fontSize=n.size,this._data.fontStyle=n.style,this._runtime&&this._runtime.onFontUpdate(this.font))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.font.family},set:function(n){this.font.family!==n&&(this._font=this.font.deriveFamily(n),this._data.fontFamily=n,this._runtime&&this._runtime.onFontUpdate(this.font))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this.font.style},set:function(n){this.font.style!==n&&(this._font=this.font.deriveStyle(n),this._data.fontStyle=n,this._runtime&&this._runtime.onFontUpdate(this.font))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.font.size},set:function(n){isNaN(n)||this.font.size===n||(this._font=this.font.deriveSize(n),this._data.fontSize=n,this._runtime&&this._runtime.onFontUpdate(this.font))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(n){n&&!n.eq(this.color)&&(this._color=n,this._runtime&&this._runtime.onColorUpdate(n))},enumerable:!1,configurable:!0}),e.prototype.getType=function(){return Je.CHAR},e}(Os),Al=function(t){function e(n){var r=t.call(this)||this;return r._data=n,r}return Li(e,t),e.prototype.getType=function(){return Je.GRAPHIC},e.prototype.toString=function(){return"Graphic"},e}(Wu),Ko=function(t){function e(n){var r=t.call(this)||this;return r._data=n,r}return Li(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this.firstChar?this.firstChar.startTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return this.lastChar?this.lastChar.endTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._data&&this._data.pos||""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawPos",{get:function(){return this._data&&this._data.rawPoS||""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._data&&this._data.language||""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"countDown",{get:function(){return this._data?this._data.countDown:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"countUp",{get:function(){return this._data?this._data.countUp:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialCount",{get:function(){return this._data?this._data.initialCount:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"charCount",{get:function(){return this._children.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChar",{get:function(){return this._children.length<=0?null:this._children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChar",{get:function(){return this._children.length<=0?null:this._children[this._children.length-1]},enumerable:!1,configurable:!0}),e.prototype.addChar=function(n){if(n){this._children.length>0&&(n._previous=this.lastChar,this.lastChar._next=n),this._children.push(n),n._parent=this;var r=this.expandTime(n),i=r.startTime,o=r.endTime;this._data.startTime=i,this._data.endTime=o}},e.prototype.findIndex=function(n){return n instanceof Oi?this._children.indexOf(n):-1},e.prototype.getType=function(){return Je.WORD},e}(Os),Jn=function(t){function e(n,r){var i=t.call(this)||this;return i._video=n,i._data=r,i.createUnits(),i}return Li(e,t),e.prototype.createUnits=function(){var n=this,r=this._data;r&&Array.isArray(r.words)&&r.words.forEach(function(i){if(i){var o=new Ko(i);Array.isArray(i.characters)&&i.characters.forEach(function(s){return o.addChar(new Oi(s))}),n.addWord(o)}})},Object.defineProperty(e.prototype,"children",{get:function(){return this._children.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"video",{get:function(){return this._video},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this.firstChar?this.firstChar.startTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return this.lastChar?this.lastChar.endTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordCount",{get:function(){return this._children.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"charCount",{get:function(){return this._children.reduce(function(n,r){return n+r.charCount},0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstWord",{get:function(){return this._children.length<=0?null:this._children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastWord",{get:function(){return this._children.length<=0?null:this._children[this._children.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChar",{get:function(){var n=this.firstWord;return n===null?null:n.firstChar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChar",{get:function(){var n=this.lastWord;return n===null?null:n.lastChar},enumerable:!1,configurable:!0}),e.prototype.getWord=function(n){return n<0||n>=this._children.length?null:this._children[n]},e.prototype.getChar=function(n){if(n<0)return null;for(var r=0,i=this.firstWord;;){if(!i)return null;if(r+i.children.length>n)break;r+=i.children.length,i=i.next}return i.children[n-r]},e.prototype.addWord=function(n){if(n){this._children.length>0&&(n._previous=this.lastWord,n._previous._next=n,n.firstChar._previous=n._previous.lastChar,n._previous.lastChar._next=n.firstChar),this._children.push(n),n._parent=this;var r=this.expandTime(n),i=r.startTime,o=r.endTime;this._data.startTime=i,this._data.endTime=o}},e.prototype.findIndex=function(n){if(n instanceof Ko)return this._children.indexOf(n);if(n instanceof Oi){for(var r=0,i=!1,o=0,s=this._children;o<s.length;o++){var a=s[o],l=a.findIndex(n);if(!(l<0)){r+=l,i=!0;break}r+=a.charCount}return i?r:-1}return-1},e.prototype.getType=function(){return Je.PHRASE},e}(Os);function Xt(t,e,n){if(!t||t.length<=0)return null;var r=Pi.exports.sortedIndex(t,e,function(s){return s.endTime});if(r<0)return null;if(typeof(n==null?void 0:n.endTime)=="number"){r>=t.length&&(r=t.length-1);var i=e,o=n.endTime;return t[r].overlaps(i,o)?t[r]:r<1?null:t[r-1].overlaps(i,o)?t[r-1]:null}return r>=t.length?null:n!=null&&n.loose||t[r].contains(e)?t[r]:null}var mm=function(){function t(e){this._credits=[],this._phrases=[],this._graphics=[],this.data=e||{},this.createUnits()}return Object.defineProperty(t.prototype,"credits",{get:function(){return this._credits.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"phrases",{get:function(){return this._phrases.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this._graphics.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rendering",{get:function(){return this._runtime.rendering},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.data.duration||0},set:function(e){this.data.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this.data.startTime||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this.data.endTime||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creditCount",{get:function(){return this._credits.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"phraseCount",{get:function(){return this._phrases.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphicCount",{get:function(){return this._graphics.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordCount",{get:function(){return this._phrases.reduce(function(e,n){return e+n.wordCount},0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"charCount",{get:function(){return this._phrases.reduce(function(e,n){return e+n.charCount},0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstCredit",{get:function(){return this._credits.length<=0?null:this._credits[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastCredit",{get:function(){return this._credits.length<=0?null:this._credits[this._credits.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstPhrase",{get:function(){return this._phrases.length<=0?null:this._phrases[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastPhrase",{get:function(){return this._phrases.length<=0?null:this._phrases[this._phrases.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstWord",{get:function(){var e;return((e=this.firstPhrase)===null||e===void 0?void 0:e.firstWord)||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastWord",{get:function(){var e;return((e=this.lastPhrase)===null||e===void 0?void 0:e.lastWord)||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChar",{get:function(){var e;return((e=this.firstWord)===null||e===void 0?void 0:e.firstChar)||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChar",{get:function(){var e;return((e=this.lastWord)===null||e===void 0?void 0:e.lastChar)||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstGraphic",{get:function(){return this._graphics.length<=0?null:this._graphics[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastGraphic",{get:function(){return this._graphics.length<=0?null:this._graphics[this._graphics.length-1]},enumerable:!1,configurable:!0}),t.prototype.createUnits=function(){var e,n,r=this;Array.isArray(this.data.credits)?(this.data.credits.sort(Sa),this.data.credits.forEach(function(i){return r.doAddCredit(new Jn(r,i),!1)}),this.organizeTimings((e=this.firstCredit)===null||e===void 0?void 0:e.firstChar)):this.data.credits=[],Array.isArray(this.data.phrases)?(this.data.phrases.sort(Sa),this.data.phrases.forEach(function(i){return r.doAddPhrase(new Jn(r,i),!1)}),this.organizeTimings((n=this.firstPhrase)===null||n===void 0?void 0:n.firstChar)):this.data.phrases=[],Array.isArray(this.data.graphics)?(this.data.graphics.sort(Sa),this.data.graphics.forEach(function(i){return r.doAddGraphic(new Al(i),!1)})):this.data.graphics=[]},t.prototype.organizeTimings=function(e){for(;e;)e.startTime===e.endTime&&e.maximize(),e=e.next},t.prototype.exportData=function(e){this.updateTemplateData(e);for(var n=t.exportUnitData(this.data.credits,!0),r=n.units,i=n.templateClasses,o=t.exportUnitData(this.data.phrases,!1),s=o.units,a=o.templateClasses,l=t.exportUnitData(this.data.graphics,!0),u=l.units,c=l.templateClasses,p=i.concat(a,c).filter(function(f,g,w){return w.indexOf(f)===g}),d={};p.length>0;){var y=p.shift(),v=e.getByName(y);if(v){d[y]=v.id;for(var m=0,P=e.getRequiredTemplates(v.script);m<P.length;m++){var h=P[m];d[h]||p.push(h)}}else console.log("template class not found",y)}return{credits:r,phrases:s,graphics:u,templateClasses:d}},t.exportUnitData=function(e,n){if(n===void 0&&(n=!1),!e)return{units:[],templateClasses:[]};for(var r=[],i=[],o=0,s=e;o<s.length;o++){var a=s[o],l={templates:a.templates?a.templates.map(function(h){var f=h.type;i.push(f);var g={};return Object.keys(h.value).forEach(function(w){var O=h.value[w];g[w]=typeof O=="object"?Object.assign({},O):O}),{type:f,value:g}}):[]},u=void 0;if(a.words){var c=a,p=t.exportUnitData(c.words);l.words=p.units,u=p.templateClasses}else if(a.characters){var d=a,y=t.exportUnitData(d.characters);l.characters=y.units,u=y.templateClasses}else{for(var v=0,m=["fontFamily","fontSize","fontStyle"];v<m.length;v++){var P=m[v];a[P]&&(l[P]=a[P])}u=[]}n&&(l.startTime=a.startTime,l.endTime=a.endTime),r.push(l),i=i.concat(u)}return{units:r,templateClasses:i=i.filter(function(h,f,g){return g.indexOf(h)===f})}},t.prototype.updateTemplateData=function(e){t.updateTemplateDataForUnits(e,this.firstCredit,this.data.credits),t.updateTemplateDataForUnits(e,this.firstPhrase,this.data.phrases),t.updateTemplateDataForUnits(e,this.firstGraphic,this.data.graphics)},t.updateTemplateDataForUnits=function(e,n,r){if(n&&r)for(var i=0,o=r;i<o.length;i++){var s=o[i];s.templates=[];for(var a=0;a<n.templateCount;a++){var l=n.getTemplate(a),u=e.exportInstance(l);s.templates.push(u)}if(s.words){var c=s;t.updateTemplateDataForUnits(e,n.children[0],c.words)}else if(s.characters){var p=s;t.updateTemplateDataForUnits(e,n.children[0],p.characters)}n=n.next}},t.prototype.addCredit=function(e){this.doAddCredit(e,!0)},t.prototype.doAddCredit=function(e,n){var r=this.addRenderingUnit(this._credits,e);n&&this.data.credits.splice(r,0,e._data),this._runtime&&this._runtime.addCredit(e)},t.prototype.addPhrase=function(e){this.doAddPhrase(e,!0)},t.prototype.doAddPhrase=function(e,n){var r=this.addRenderingUnit(this._phrases,e);n&&this.data.phrases.splice(r,0,e._data),this._runtime&&this._runtime.addPhrase(e)},t.prototype.addGraphic=function(e){this.doAddGraphic(e,!0)},t.prototype.doAddGraphic=function(e,n){if(e){var r=this.addRenderingUnit(this._graphics,e);n&&this.data.graphics.splice(r,0,e._data),this._runtime&&this._runtime.addGraphic(e)}},t.prototype.addRenderingUnit=function(e,n){if(n){var r=Pi.exports.sortedIndex(e,n,Gp),i=r>0?e[r-1]:null,o=r<e.length?e[r]:null;if(e.splice(r,0,n),i&&(n._previous=i,n._previous._next=n),o&&(o._previous=n,n._next=o),n instanceof Jn&&n.wordCount>0){for(var s=i;s&&!s.lastWord;)s=s.previous;for(var a=o;a&&!a.firstWord;)a=a.next;if(s&&(n.firstWord._previous=s.lastWord,s.lastWord._next=n.firstWord),a&&(n.lastWord._next=a.firstWord,a.firstWord._previous=n.lastWord),n.charCount>0){for(var l=s==null?void 0:s.lastWord;l&&l.lastChar===null;)l=l.previous;for(var u=a==null?void 0:a.firstWord;u&&u.firstChar===null;)u=u.next;l&&(n.firstChar._previous=l.lastChar,l.lastChar._next=n.firstChar),u&&(n.lastChar._next=u.firstChar,u.firstChar._previous=n.lastChar)}}return this.updateStartAndEndTime(),r}},t.prototype.removeCredit=function(e){var n=this.removeRenderingUnit(this._credits,e);return!(n<0||(this.data.credits.splice(n,1),this._runtime&&this._runtime.removeCredit(e),0))},t.prototype.removeCredits=function(){var e=this;this._runtime&&this._credits.forEach(function(n){return e._runtime.removeCredit(n)}),this._credits=[],this.data.credits.splice(0,this.data.credits.length)},t.prototype.removePhrase=function(e){var n=this.removeRenderingUnit(this._phrases,e);return!(n<0||(this.data.phrases.splice(n,1),this._runtime&&this._runtime.removePhrase(e),0))},t.prototype.removePhrases=function(){var e=this;this._runtime&&this._phrases.forEach(function(n){return e._runtime.removePhrase(n)}),this._phrases=[],this.data.phrases.splice(0,this.data.phrases.length)},t.prototype.removeGraphic=function(e){var n=this.removeRenderingUnit(this._graphics,e);return!(n<0||(this.data.graphics.splice(n,1),this._runtime&&this._runtime.removeGraphic(e),0))},t.prototype.removeGraphics=function(){var e=this;this._runtime&&this._graphics.forEach(function(n){return e._runtime.removeGraphic(n)}),this._graphics=[],this.data.graphics.splice(0,this.data.graphics.length),this.rendering.reset()},t.prototype.removeRenderingUnit=function(e,n){var r=Pi.exports.sortedIndex(e,n,Gp);if(r<0||e[r]!==n)return-1;if(e.splice(r,1),n instanceof Jn){if(n.charCount>0){for(var i=n._previous;i&&i.lastChar===null;)i=i.previous;for(var o=n._next;o&&o.firstChar===null;)o=o.next;i&&o?(i.lastChar._next=o.firstChar,o.firstChar._previous=i.lastChar):i?i.lastChar._next=null:o&&(o.firstChar._previous=null)}if(n.wordCount>0){for(i=n._previous;i&&i.lastWord===null;)i=i.previous;for(o=n._next;o&&o.firstWord===null;)o=o.next;i&&o?(i.lastWord._next=o.firstWord,o.firstWord._previous=i.lastWord):i?i.lastWord._next=null:o&&(o.firstWord._previous=null)}}n._previous&&(n._previous._next=n._next),n._next&&(n._next._previous=n._previous),this.updateStartAndEndTime()},t.prototype.updateStartAndEndTime=function(){var e,n,r,i,o,s,a,l;this.data.endTime=Math.max(((n=(e=this.lastCredit)===null||e===void 0?void 0:e.lastChar)===null||n===void 0?void 0:n.endTime)||0,((r=this.lastChar)===null||r===void 0?void 0:r.endTime)||0,((i=this.lastGraphic)===null||i===void 0?void 0:i.endTime)||0);var u=(s=(o=this.firstCredit)===null||o===void 0?void 0:o.firstChar)===null||s===void 0?void 0:s.startTime,c=(a=this.firstChar)===null||a===void 0?void 0:a.startTime,p=(l=this.firstGraphic)===null||l===void 0?void 0:l.startTime;this.data.startTime=Math.min(typeof u=="number"?u:Number.MAX_VALUE,typeof c=="number"?c:Number.MAX_VALUE,typeof p=="number"?p:Number.MAX_VALUE,this.data.endTime)},t.prototype.findIndex=function(e){if(e instanceof Jn)return(n=this._phrases.indexOf(e))>=0?n:this._credits.indexOf(e);if(e instanceof Ko){for(var n=0,r=!1,i=0,o=this._phrases;i<o.length;i++){if(!((u=(l=o[i]).findIndex(e))<0)){n+=u,r=!0;break}n+=l.wordCount}return r?n:-1}if(e instanceof Oi){n=0,r=!1;for(var s=0,a=this._phrases;s<a.length;s++){var l,u;if(!((u=(l=a[s]).findIndex(e))<0)){n+=u,r=!0;break}n+=l.charCount}return r?n:-1}return e instanceof Al?this._graphics.indexOf(e):-1},t.prototype.getCredit=function(e){return e<0||e>=this._credits.length?null:this._credits[e]},t.prototype.getPhrase=function(e){return e<0||e>=this._phrases.length?null:this._phrases[e]},t.prototype.getWord=function(e){if(e<0)return null;for(var n=0,r=this.firstPhrase;;){if(!r)return null;if(n+r.children.length>e)break;n+=r.children.length,r=r.next}return r.children[e-n]},t.prototype.getChar=function(e){if(e<0)return null;for(var n=0,r=this.firstWord;;){if(!r)return null;if(n+r.children.length>e)break;n+=r.children.length,r=r.next}return r.children[e-n]},t.prototype.getGraphic=function(e){return e<0||e>=this._graphics.length?null:this._graphics[e]},t.prototype.findCredit=function(e,n){return Xt(this._credits,e,n)},t.prototype.findPhrase=function(e,n){return Xt(this._phrases,e,n)},t.prototype.findWord=function(e,n){var r=this.findPhrase(e,n);return r?Xt(r._children,e,n):null},t.prototype.findChar=function(e,n){var r=this.findWord(e,n);return r?Xt(r._children,e,n):null},t.prototype.findGraphic=function(e,n){return Xt(this._graphics,e,n)},t.prototype.contains=function(e){return e>=this.startTime&&e<=this.endTime},t.prototype.overlaps=function(e,n){return this.contains(e)||this.contains(n)||this.startTime<=e&&this.endTime>=n},t.prototype.progress=function(e){return this.contains(e)?(e-this.startTime)/this.duration:-1},t}();function Sa(t,e){return t.startTime-e.startTime}function Gp(t){return t.startTime}var $h=function(){function t(e,n,r,i,o,s){e===void 0&&(e=1),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=0),s===void 0&&(s=0),this.setValues(e,n,r,i,o,s)}return t.prototype.setValues=function(e,n,r,i,o,s){return e===void 0&&(e=1),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=0),s===void 0&&(s=0),this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s,this},t.prototype.append=function(e,n,r,i,o,s){var a=this.a,l=this.b,u=this.c,c=this.d;return e==1&&n==0&&r==0&&i==1||(this.a=a*e+u*n,this.b=l*e+c*n,this.c=a*r+u*i,this.d=l*r+c*i),this.tx=a*o+u*s+this.tx,this.ty=l*o+c*s+this.ty,this},t.prototype.prepend=function(e,n,r,i,o,s){var a=this.a,l=this.c,u=this.tx;return this.a=e*a+r*this.b,this.b=n*a+i*this.b,this.c=e*l+r*this.d,this.d=n*l+i*this.d,this.tx=e*u+r*this.ty+o,this.ty=n*u+i*this.ty+s,this},t.prototype.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prototype.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prototype.appendTransform=function(e,n,r,i,o,s,a,l,u){var c,p,d;return o%360?(c=o*t.DEG_TO_RAD,p=Math.cos(c),d=Math.sin(c)):(p=1,d=0),s||a?(s*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),e,n),this.append(p*r,d*r,-d*i,p*i,0,0)):this.append(p*r,d*r,-d*i,p*i,e,n),(l||u)&&(this.tx-=l*this.a+u*this.c,this.ty-=l*this.b+u*this.d),this},t.prototype.prependTransform=function(e,n,r,i,o,s,a,l,u){var c,p,d;return o%360?(c=o*t.DEG_TO_RAD,p=Math.cos(c),d=Math.sin(c)):(p=1,d=0),(l||u)&&(this.tx-=l,this.ty-=u),s||a?(s*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.prepend(p*r,d*r,-d*i,p*i,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),e,n)):this.prepend(p*r,d*r,-d*i,p*i,e,n),this},t.prototype.rotate=function(e){e*=t.DEG_TO_RAD;var n=Math.cos(e),r=Math.sin(e),i=this.a,o=this.b;return this.a=i*n+this.c*r,this.b=o*n+this.d*r,this.c=-i*r+this.c*n,this.d=-o*r+this.d*n,this},t.prototype.skew=function(e,n){return e*=t.DEG_TO_RAD,n*=t.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(e),Math.cos(e),0,0),this},t.prototype.scale=function(e,n){return this.a*=e,this.b*=e,this.c*=n,this.d*=n,this},t.prototype.translate=function(e,n){return this.tx+=this.a*e+this.c*n,this.ty+=this.b*e+this.d*n,this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.prototype.invert=function(){var e=this.a,n=this.b,r=this.c,i=this.d,o=this.tx,s=e*i-n*r;return this.a=i/s,this.b=-n/s,this.c=-r/s,this.d=e/s,this.tx=(r*this.ty-i*o)/s,this.ty=-(e*this.ty-n*o)/s,this},t.prototype.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},t.prototype.equals=function(e){return this.tx===e.tx&&this.ty===e.ty&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d},t.prototype.transformPoint=function(e,n,r){return r.x=e*this.a+n*this.c+this.tx,r.y=e*this.b+n*this.d+this.ty,r},t.prototype.decompose=function(e){e===void 0&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return Math.abs(1-n/r)<1e-5?(e.rotation=r/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=n/t.DEG_TO_RAD,e.skewY=r/t.DEG_TO_RAD),e},t.prototype.copy=function(e){return this.setValues(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prototype.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.prototype.toString=function(){return"["+this.constructor.name+" (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.DEG_TO_RAD=Math.PI/180,t.identity=new t,t}(),wm=function(){function t(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.setValues(e,n)}return t.prototype.setValues=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=0),this.x=e,this.y=n,this},t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.toString=function(){return"["+this.constructor.name+" (x="+this.x+" y="+this.y+")]"},t}(),Mr=function(){function t(){this.tx=new $h,this.alpha=0,this.composite="",this.visible=!0}return t.prototype.reset=function(){},t}(),_m=function(){function t(){this.rendering=new Mr}return t.prototype.addCredit=function(e){this.doAddPhrase(e)},t.prototype.removeCredit=function(e){e._runtime=null},t.prototype.addPhrase=function(e){this.doAddPhrase(e)},t.prototype.removePhrase=function(e){e._runtime=null},t.prototype.doAddPhrase=function(e){e._runtime={graphics:{clear:function(){}},rendering:new Mr,update:function(){}};for(var n=e.firstWord;n;){n._runtime={graphics:{clear:function(){}},rendering:new Mr,update:function(){}};for(var r=n.firstChar;r&&(r._runtime={graphics:{clear:function(){}},rendering:new Mr,update:function(){},advance:0,ascent:0,descent:0,onFontUpdate:function(){},onColorUpdate:function(){}},r!==n.lastChar);)r=r.next;if(n===e.lastWord)break;n=n.next}},t.prototype.addGraphic=function(e){e._runtime={graphics:{clear:function(){}},rendering:new Mr,update:function(){}}},t.prototype.removeGraphic=function(e){e._runtime=null},t}(),Em=function(){function t(){this.wrapperTable={}}return t.prototype.isGraphics=function(){return!1},t.prototype.setCanvas=function(){return Promise.resolve()},t.prototype.createRuntime=function(e){return function(n,r,i,o){return new(i||(i=Promise))(function(s,a){function l(p){try{c(o.next(p))}catch(d){a(d)}}function u(p){try{c(o.throw(p))}catch(d){a(d)}}function c(p){var d;p.done?s(p.value):(d=p.value,d instanceof i?d:new i(function(y){y(d)})).then(l,u)}c((o=o.apply(n,r||[])).next())})}(this,void 0,void 0,function(){var n,r,i;return function(o,s){var a,l,u,c,p={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(y){return function(v){return function(m){if(a)throw new TypeError("Generator is already executing.");for(;p;)try{if(a=1,l&&(u=2&m[0]?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[2&m[0],u.value]),m[0]){case 0:case 1:u=m;break;case 4:return p.label++,{value:m[1],done:!1};case 5:p.label++,l=m[1],m=[0];continue;case 7:m=p.ops.pop(),p.trys.pop();continue;default:if(!((u=(u=p.trys).length>0&&u[u.length-1])||m[0]!==6&&m[0]!==2)){p=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){p.label=m[1];break}if(m[0]===6&&p.label<u[1]){p.label=u[1],u=m;break}if(u&&p.label<u[2]){p.label=u[2],p.ops.push(m);break}u[2]&&p.ops.pop(),p.trys.pop();continue}m=s.call(o,p)}catch(P){m=[6,P],l=0}finally{a=u=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([y,v])}}}(this,function(o){for(this.video=e,e._runtime=new _m,n=e.firstCredit;n;)e._runtime.addCredit(n),n=n.next;for(r=e.firstPhrase;r;)e._runtime.addPhrase(r),r=r.next;for(i=e.firstGraphic;i;)e._runtime.addGraphic(i),i=i.next;return[2,e._runtime]})})},t.prototype.reset=function(){var e,n;this.resetTextUnitsFrom(this.video.firstCredit),this.resetTextUnitsFrom((e=this.video.firstCredit)===null||e===void 0?void 0:e.firstWord),this.resetTextUnitsFrom((n=this.video.firstCredit)===null||n===void 0?void 0:n.firstChar),this.resetTextUnitsFrom(this.video.firstPhrase),this.resetTextUnitsFrom(this.video.firstWord),this.resetTextUnitsFrom(this.video.firstChar),this.video._runtime.rendering.reset()},t.prototype.resetTextUnitsFrom=function(e){for(;e;)e.rendering.reset(),e.graphics.clear(),e=e.next},t.prototype.update=function(){var e,n;this.updateCharsFrom((e=this.video.firstCredit)===null||e===void 0?void 0:e.firstChar),this.updateCharsFrom((n=this.video.firstPhrase)===null||n===void 0?void 0:n.firstChar)},t.prototype.updateCharsFrom=function(e){for(;e;)e._runtime.update(),e=e.next},t.prototype.updateStageTx=function(){},t}();function bm(t){if(t!==void 0&&typeof t!="function"){if(typeof t!="object")return t;if(t===null)return null;if(t instanceof Fi)return{type:"Color",value:{r:t.r,g:t.g,b:t.b,a:t.a}};throw new Error}}function Sm(t,e){if(typeof t!="object"||t===null)return t;if(t.type&&e[t.type]){var n;if(t.type==="Color"){var r=new Fi;r.r=Number(t.value.r),r.g=Number(t.value.g),r.b=Number(t.value.b),r.a=Number(t.value.a),n=r}else{for(var i=new e[t.type],o=0,s=Object.keys(t.value);o<s.length;o++){var a=s[o];i[a]=t.value[a]}n=i}return n}}var B,U,Sr,Il,_,Oe,ni,Gu,Yu,V,zt,Di,Mn,jt,Hu,Vt,qu,ri,pe,Ke,Et=function(t,e){return U=String(t),Sr=U.length,function(n){for(var r in B=n||{},Yp)Object.prototype.hasOwnProperty.call(B,r)||(B[r]=Yp[r]);Il=B.sourceFile||null}(e),Mn=1,_=jt=0,Di=!0,Ti(),function(n){Hu=Vt=_,B.locations&&(qu=new Bn),ri=Ke=null,pe=[],xr();var r=n||Pe(),i=!0;for(n||(r.body=[]);V!==Ju;){var o=dt();r.body.push(o),i&&ec(o)&&Bl(!0),i=!1}return z(r,"Program")}(B.program)},Yp={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function Y(t,e){var n=function(i,o){for(var s=1,a=0;;){es.lastIndex=a;var l=es.exec(i);if(!(l&&l.index<o))break;++s,a=l.index+l[0].length}return{line:s,column:o-a}}(U,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=_,r}var Wh=[],xs={type:"num"},Gh={type:"regexp"},Qu={type:"string"},Pr={type:"name"},Ju={type:"eof"},jl={keyword:"break"},Ul={keyword:"case",beforeExpr:!0},Yh={keyword:"catch"},Hh={keyword:"continue"},qh={keyword:"debugger"},Qh={keyword:"default"},Jh={keyword:"do",isLoop:!0},Xh={keyword:"else",beforeExpr:!0},Kh={keyword:"finally"},Zh={keyword:"for",isLoop:!0},Xu={keyword:"function"},ev={keyword:"if"},tv={keyword:"return",beforeExpr:!0},Ll={keyword:"switch"},nv={keyword:"throw",beforeExpr:!0},rv={keyword:"try"},Fl={keyword:"var"},Dl={keyword:"while",isLoop:!0},iv={keyword:"with"},ov={keyword:"new",beforeExpr:!0},sv={keyword:"this"},av={keyword:"null",atomValue:null},lv={keyword:"true",atomValue:!0},uv={keyword:"false",atomValue:!1},Zo={keyword:"in",binop:7,beforeExpr:!0},Pm={break:jl,case:Ul,catch:Yh,continue:Hh,debugger:qh,default:Qh,do:Jh,else:Xh,finally:Kh,for:Zh,function:Xu,if:ev,return:tv,switch:Ll,throw:nv,try:rv,var:Fl,while:Dl,with:iv,null:av,true:lv,false:uv,new:ov,in:Zo,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:sv,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Ku={type:"[",beforeExpr:!0},Zu={type:"]"},xi={type:"{",beforeExpr:!0},Or={type:"}"},Ut={type:"(",beforeExpr:!0},Ot={type:")"},hn={type:",",beforeExpr:!0},At={type:";",beforeExpr:!0},ki={type:":",beforeExpr:!0},cv={type:"."},pv={type:"?",beforeExpr:!0},dv={binop:10,beforeExpr:!0},fv={isAssign:!0,beforeExpr:!0},kn={isAssign:!0,beforeExpr:!0},Om={postfix:!0,prefix:!0,isUpdate:!0},Hp={prefix:!0,beforeExpr:!0},hv={binop:1,beforeExpr:!0},vv={binop:2,beforeExpr:!0},xm={binop:3,beforeExpr:!0},km={binop:4,beforeExpr:!0},Tm={binop:5,beforeExpr:!0},Cm={binop:6,beforeExpr:!0},Rm={binop:7,beforeExpr:!0},Nm={binop:8,beforeExpr:!0},Am={binop:9,prefix:!0,beforeExpr:!0},Im={binop:10,beforeExpr:!0};function Mi(t){t=t.split(" ");var e="",n=[];e:for(var r=0;r<t.length;++r){for(var i=0;i<n.length;++i)if(n[i][0].length==t[r].length){n[i].push(t[r]);continue e}n.push([t[r]])}function o(a){if(a.length==1)return e+="return str === "+JSON.stringify(a[0])+";";e+="switch(str){";for(var l=0;l<a.length;++l)e+="case "+JSON.stringify(a[l])+":";e+="return true}return false;"}if(n.length>3){for(n.sort(function(a,l){return l.length-a.length}),e+="switch(str.length){",r=0;r<n.length;++r){var s=n[r];e+="case "+s[0].length+":",o(s)}e+="}"}else o(t);return new Function("str",e)}var Xn,jm=Mi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Um=Mi("class enum extends super const export import"),yv=Mi("implements interface let package private protected public static yield"),ks=Mi("eval arguments"),Lm=Mi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Fm=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,gv="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",mv=new RegExp("["+gv+"]"),Dm=new RegExp("["+gv+"------------------------------------------------------------------------------------------------------------------------------------------]"),Ts=/[\n\r\u2028\u2029]/,es=/\r\n|[\n\r\u2028\u2029]/g,ts=function(t){return t<65?t===36:t<91||(t<97?t===95:t<123||t>=170&&mv.test(String.fromCharCode(t)))},qp=function(t){return t<48?t===36:t<58||!(t<65)&&(t<91||(t<97?t===95:t<123||t>=170&&Dm.test(String.fromCharCode(t))))};function Bn(){this.line=Mn,this.column=_-jt}function _e(t,e){ni=_,B.locations&&(Yu=new Bn),V=t,Ti(),zt=e,Di=t.beforeExpr}function Mm(){var t,e=B.onComment&&B.locations&&new Bn,n=_,r=U.indexOf("*/",_+=2);if(r===-1&&Y(_-2,"Unterminated comment"),_=r+2,B.locations)for(es.lastIndex=n;(t=es.exec(U))&&t.index<_;)++Mn,jt=t.index+t[0].length;B.onComment&&B.onComment(!0,U.slice(n+2,r),n,_,e,B.locations&&new Bn)}function Ml(){for(var t=_,e=B.onComment&&B.locations&&new Bn,n=U.charCodeAt(_+=2);_<Sr&&n!==10&&n!==13&&n!==8232&&n!==8233;)++_,n=U.charCodeAt(_);B.onComment&&B.onComment(!1,U.slice(t+2,_),t,_,e,B.locations&&new Bn)}function Ti(){for(;_<Sr;){var t=U.charCodeAt(_);if(t===32)++_;else if(t===13)++_,(e=U.charCodeAt(_))===10&&++_,B.locations&&(++Mn,jt=_);else if(t===10||t===8232||t===8233)++_,B.locations&&(++Mn,jt=_);else if(t>8&&t<14)++_;else if(t===47){var e;if((e=U.charCodeAt(_+1))===42)Mm();else{if(e!==47)break;Ml()}}else if(t===160)++_;else{if(!(t>=5760&&Fm.test(String.fromCharCode(t))))break;++_}}}function xr(t){if(t?_=Oe+1:Oe=_,B.locations&&(Gu=new Bn),t)return Qp();if(_>=Sr)return _e(Ju);var e=U.charCodeAt(_);if(ts(e)||e===92)return Xp();var n=function(i){switch(i){case 46:return function(){var s=U.charCodeAt(_+1);return s>=48&&s<=57?Jp(!0):(++_,_e(cv))}();case 40:return++_,_e(Ut);case 41:return++_,_e(Ot);case 59:return++_,_e(At);case 44:return++_,_e(hn);case 91:return++_,_e(Ku);case 93:return++_,_e(Zu);case 123:return++_,_e(xi);case 125:return++_,_e(Or);case 58:return++_,_e(ki);case 63:return++_,_e(pv);case 48:var o=U.charCodeAt(_+1);if(o===120||o===88)return function(){_+=2;var s=ii(16);return s==null&&Y(Oe+2,"Expected hexadecimal number"),ts(U.charCodeAt(_))&&Y(_,"Identifier directly after number"),_e(xs,s)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Jp(!1);case 34:case 39:return function(s){_++;for(var a="";;){_>=Sr&&Y(Oe,"Unterminated string constant");var l=U.charCodeAt(_);if(l===s)return++_,_e(Qu,a);if(l===92){l=U.charCodeAt(++_);var u=/^[0-7]+/.exec(U.slice(_,_+3));for(u&&(u=u[0]);u&&parseInt(u,8)>255;)u=u.slice(0,-1);if(u==="0"&&(u=null),++_,u)Ke&&Y(_-2,"Octal literal in strict mode"),a+=String.fromCharCode(parseInt(u,8)),_+=u.length-1;else switch(l){case 110:a+=`
`;break;case 114:a+="\r";break;case 120:a+=String.fromCharCode(xo(2));break;case 117:a+=String.fromCharCode(xo(4));break;case 85:a+=String.fromCharCode(xo(8));break;case 116:a+="	";break;case 98:a+="\b";break;case 118:a+="\v";break;case 102:a+="\f";break;case 48:a+="\0";break;case 13:U.charCodeAt(_)===10&&++_;case 10:B.locations&&(jt=_,++Mn);break;default:a+=String.fromCharCode(l)}}else l!==13&&l!==10&&l!==8232&&l!==8233||Y(Oe,"Unterminated string constant"),a+=String.fromCharCode(l),++_}}(i);case 47:return function(s){var a=U.charCodeAt(_+1);return Di?(++_,Qp()):a===61?we(kn,2):we(dv,1)}();case 37:case 42:return U.charCodeAt(_+1)===61?we(kn,2):we(Im,1);case 124:case 38:return function(s){var a=U.charCodeAt(_+1);return a===s?we(s===124?hv:vv,2):a===61?we(kn,2):we(s===124?xm:Tm,1)}(i);case 94:return U.charCodeAt(_+1)===61?we(kn,2):we(km,1);case 43:case 45:return function(s){var a=U.charCodeAt(_+1);return a===s?a==45&&U.charCodeAt(_+2)==62&&Ts.test(U.slice(Vt,_))?(_+=3,Ml(),Ti(),xr()):we(Om,2):a===61?we(kn,2):we(Am,1)}(i);case 60:case 62:return function(s){var a=U.charCodeAt(_+1),l=1;return a===s?(l=s===62&&U.charCodeAt(_+2)===62?3:2,U.charCodeAt(_+l)===61?we(kn,l+1):we(Nm,l)):a==33&&s==60&&U.charCodeAt(_+2)==45&&U.charCodeAt(_+3)==45?(_+=4,Ml(),Ti(),xr()):(a===61&&(l=U.charCodeAt(_+2)===61?3:2),we(Rm,l))}(i);case 61:case 33:return function(s){return U.charCodeAt(_+1)===61?we(Cm,U.charCodeAt(_+2)===61?3:2):we(s===61?fv:Hp,1)}(i);case 126:return we(Hp,1)}return!1}(e);if(n===!1){var r=String.fromCharCode(e);if(r==="\\"||mv.test(r))return Xp();Y(_,"Unexpected character '"+r+"'")}return n}function we(t,e){var n=U.slice(_,_+e);_+=e,_e(t,n)}function Qp(){for(var t,e,n=_;;){_>=Sr&&Y(n,"Unterminated regular expression");var r=U.charAt(_);if(Ts.test(r)&&Y(n,"Unterminated regular expression"),t)t=!1;else{if(r==="[")e=!0;else if(r==="]"&&e)e=!1;else if(r==="/"&&!e)break;t=r==="\\"}++_}var i=U.slice(n,_);++_;var o=wv();return o&&!/^[gmsiy]*$/.test(o)&&Y(n,"Invalid regexp flag"),_e(Gh,new RegExp(i,o))}function ii(t,e){for(var n=_,r=0,i=0,o=e??1/0;i<o;++i){var s,a=U.charCodeAt(_);if((s=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++_,r=r*t+s}return _===n||e!=null&&_-n!==e?null:r}function Jp(t){var e=_,n=!1,r=U.charCodeAt(_)===48;t||ii(10)!==null||Y(e,"Invalid number"),U.charCodeAt(_)===46&&(++_,ii(10),n=!0);var i=U.charCodeAt(_);i!==69&&i!==101||((i=U.charCodeAt(++_))!==43&&i!==45||++_,ii(10)===null&&Y(e,"Invalid number"),n=!0),ts(U.charCodeAt(_))&&Y(_,"Identifier directly after number");var o,s=U.slice(e,_);return n?o=parseFloat(s):r&&s.length!==1?/[89]/.test(s)||Ke?Y(e,"Invalid number"):o=parseInt(s,8):o=parseInt(s,10),_e(xs,o)}function xo(t){var e=ii(16,t);return e===null&&Y(Oe,"Bad character escape sequence"),e}function wv(){Xn=!1;for(var t,e=!0,n=_;;){var r=U.charCodeAt(_);if(qp(r))Xn&&(t+=U.charAt(_)),++_;else{if(r!==92)break;Xn||(t=U.slice(n,_)),Xn=!0,U.charCodeAt(++_)!=117&&Y(_,"Expecting Unicode escape sequence \\uXXXX"),++_;var i=xo(4),o=String.fromCharCode(i);o||Y(_-1,"Invalid Unicode escape"),(e?ts(i):qp(i))||Y(_-4,"Invalid Unicode escape"),t+=o}e=!1}return Xn?t:U.slice(n,_)}function Xp(){var t=wv(),e=Pr;return Xn||(Lm(t)?e=Pm[t]:(B.forbidReserved&&(B.ecmaVersion===3?jm:Um)(t)||Ke&&yv(t))&&Y(Oe,"The keyword '"+t+"' is reserved")),_e(e,t)}function q(){Hu=Oe,Vt=ni,qu=Yu,xr()}function Bl(t){if(Ke=t,_=Vt,B.locations)for(;_<jt;)jt=U.lastIndexOf(`
`,jt-2)+1,--Mn;Ti(),xr()}function _v(){this.type=null,this.start=Oe,this.end=null}function Ev(){this.start=Gu,this.end=null,Il!==null&&(this.source=Il)}function Pe(){var t=new _v;return B.locations&&(t.loc=new Ev),B.directSourceFile&&(t.sourceFile=B.directSourceFile),B.ranges&&(t.range=[Oe,0]),t}function cn(t){var e=new _v;return e.start=t.start,B.locations&&(e.loc=new Ev,e.loc.start=t.loc.start),B.ranges&&(e.range=[t.range[0],0]),e}function z(t,e){return t.type=e,t.end=Vt,B.locations&&(t.loc.end=qu),B.ranges&&(t.range[1]=Vt),t}function ec(t){return B.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&t.expression.value==="use strict"}function ie(t){if(V===t)return q(),!0}function ns(){return!B.strictSemicolons&&(V===Ju||V===Or||Ts.test(U.slice(Vt,Oe)))}function Pn(){ie(At)||ns()||Lt()}function de(t){V===t?q():Lt()}function Lt(){Y(Oe,"Unexpected token")}function rs(t){t.type!=="Identifier"&&t.type!=="MemberExpression"&&Y(t.start,"Assigning to rvalue"),Ke&&t.type==="Identifier"&&ks(t.name)&&Y(t.start,"Assigning to "+t.name+" in strict mode")}var Pa={kind:"loop"},Bm={kind:"switch"};function dt(){(V===dv||V===kn&&zt=="/=")&&xr(!0);var t=V,e=Pe();switch(t){case jl:case Hh:q();var n=t===jl;ie(At)||ns()?e.label=null:V!==Pr?Lt():(e.label=vn(),Pn());for(var r=0;r<pe.length;++r){var i=pe[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===pe.length&&Y(e.start,"Unsyntactic "+t.keyword),z(e,n?"BreakStatement":"ContinueStatement");case qh:return q(),Pn(),z(e,"DebuggerStatement");case Jh:return q(),pe.push(Pa),e.body=dt(),pe.pop(),de(Dl),e.test=Br(),Pn(),z(e,"DoWhileStatement");case Zh:if(q(),pe.push(Pa),de(Ut),V===At)return Oa(e,null);if(V===Fl){var o=Pe();return q(),Zp(o,!0),z(o,"VariableDeclaration"),o.declarations.length===1&&ie(Zo)?Kp(e,o):Oa(e,o)}return o=Ne(!1,!0),ie(Zo)?(rs(o),Kp(e,o)):Oa(e,o);case Xu:return q(),$l(e,!0);case ev:return q(),e.test=Br(),e.consequent=dt(),e.alternate=ie(Xh)?dt():null,z(e,"IfStatement");case tv:return ri||Y(Oe,"'return' outside of function"),q(),ie(At)||ns()?e.argument=null:(e.argument=Ne(),Pn()),z(e,"ReturnStatement");case Ll:q(),e.discriminant=Br(),e.cases=[],de(xi),pe.push(Bm);for(var s,a;V!=Or;)if(V===Ul||V===Qh){var l=V===Ul;s&&z(s,"SwitchCase"),e.cases.push(s=Pe()),s.consequent=[],q(),l?s.test=Ne():(a&&Y(Hu,"Multiple default clauses"),a=!0,s.test=null),de(ki)}else s||Lt(),s.consequent.push(dt());return s&&z(s,"SwitchCase"),q(),pe.pop(),z(e,"SwitchStatement");case nv:return q(),Ts.test(U.slice(Vt,Oe))&&Y(Vt,"Illegal newline after throw"),e.argument=Ne(),Pn(),z(e,"ThrowStatement");case rv:if(q(),e.block=Yr(),e.handler=null,V===Yh){var u=Pe();q(),de(Ut),u.param=vn(),Ke&&ks(u.param.name)&&Y(u.param.start,"Binding "+u.param.name+" in strict mode"),de(Ot),u.guard=null,u.body=Yr(),e.handler=z(u,"CatchClause")}return e.guardedHandlers=Wh,e.finalizer=ie(Kh)?Yr():null,e.handler||e.finalizer||Y(e.start,"Missing catch or finally clause"),z(e,"TryStatement");case Fl:return q(),Zp(e),Pn(),z(e,"VariableDeclaration");case Dl:return q(),e.test=Br(),pe.push(Pa),e.body=dt(),pe.pop(),z(e,"WhileStatement");case iv:return Ke&&Y(Oe,"'with' in strict mode"),q(),e.object=Br(),e.body=dt(),z(e,"WithStatement");case xi:return Yr();case At:return q(),z(e,"EmptyStatement");default:var c=zt,p=Ne();if(t===Pr&&p.type==="Identifier"&&ie(ki)){for(r=0;r<pe.length;++r)pe[r].name===c&&Y(p.start,"Label '"+c+"' is already declared");var d=V.isLoop?"loop":V===Ll?"switch":null;return pe.push({name:c,kind:d}),e.body=dt(),pe.pop(),e.label=p,z(e,"LabeledStatement")}return e.expression=p,Pn(),z(e,"ExpressionStatement")}}function Br(){de(Ut);var t=Ne();return de(Ot),t}function Yr(t){var e,n=Pe(),r=!0,i=!1;for(n.body=[],de(xi);!ie(Or);){var o=dt();n.body.push(o),r&&t&&ec(o)&&(e=i,Bl(i=!0)),r=!1}return i&&!e&&Bl(!1),z(n,"BlockStatement")}function Oa(t,e){return t.init=e,de(At),t.test=V===At?null:Ne(),de(At),t.update=V===Ot?null:Ne(),de(Ot),t.body=dt(),pe.pop(),z(t,"ForStatement")}function Kp(t,e){return t.left=e,t.right=Ne(),de(Ot),t.body=dt(),pe.pop(),z(t,"ForInStatement")}function Zp(t,e){for(t.declarations=[],t.kind="var";;){var n=Pe();if(n.id=vn(),Ke&&ks(n.id.name)&&Y(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ie(fv)?Ne(!0,e):null,t.declarations.push(z(n,"VariableDeclarator")),!ie(hn))break}return t}function Ne(t,e){var n=zl(e);if(!t&&V===hn){var r=cn(n);for(r.expressions=[n];ie(hn);)r.expressions.push(zl(e));return z(r,"SequenceExpression")}return n}function zl(t){var e=function(r){var i=function(s){return Vl(tc(),-1,s)}(r);if(ie(pv)){var o=cn(i);return o.test=i,o.consequent=Ne(!0),de(ki),o.alternate=Ne(!0,r),z(o,"ConditionalExpression")}return i}(t);if(V.isAssign){var n=cn(e);return n.operator=zt,n.left=e,q(),n.right=zl(t),rs(e),z(n,"AssignmentExpression")}return e}function Vl(t,e,n){var r=V.binop;if(r!=null&&(!n||V!==Zo)&&r>e){var i=cn(t);i.left=t,i.operator=zt;var o=V;return q(),i.right=Vl(tc(),r,n),Vl(z(i,o===hv||o===vv?"LogicalExpression":"BinaryExpression"),e,n)}return t}function tc(){if(V.prefix){var t=Pe(),e=V.isUpdate;return t.operator=zt,t.prefix=!0,Di=!0,q(),t.argument=tc(),e?rs(t.argument):Ke&&t.operator==="delete"&&t.argument.type==="Identifier"&&Y(t.start,"Deleting local variable in strict mode"),z(t,e?"UpdateExpression":"UnaryExpression")}for(var n=oi(nc());V.postfix&&!ns();)(t=cn(n)).operator=zt,t.prefix=!1,t.argument=n,rs(n),q(),n=z(t,"UpdateExpression");return n}function oi(t,e){var n;return ie(cv)?((n=cn(t)).object=t,n.property=vn(!0),n.computed=!1,oi(z(n,"MemberExpression"),e)):ie(Ku)?((n=cn(t)).object=t,n.property=Ne(),n.computed=!0,de(Zu),oi(z(n,"MemberExpression"),e)):!e&&ie(Ut)?((n=cn(t)).callee=t,n.arguments=Wl(Ot,!1),oi(z(n,"CallExpression"),e)):t}function nc(){switch(V){case sv:var t=Pe();return q(),z(t,"ThisExpression");case Pr:return vn();case xs:case Qu:case Gh:return(t=Pe()).value=zt,t.raw=U.slice(Oe,ni),q(),z(t,"Literal");case av:case lv:case uv:return(t=Pe()).value=V.atomValue,t.raw=V.keyword,q(),z(t,"Literal");case Ut:var e=Gu,n=Oe;q();var r=Ne();return r.start=n,r.end=ni,B.locations&&(r.loc.start=e,r.loc.end=Yu),B.ranges&&(r.range=[n,ni]),de(Ot),r;case Ku:return t=Pe(),q(),t.elements=Wl(Zu,!0,!0),z(t,"ArrayExpression");case xi:return function(){var i=Pe(),o=!0,s=!1;for(i.properties=[],q();!ie(Or);){if(o)o=!1;else if(de(hn),B.allowTrailingCommas&&ie(Or))break;var a,l={key:ed()},u=!1;if(ie(ki)?(l.value=Ne(!0),a=l.kind="init"):B.ecmaVersion>=5&&l.key.type==="Identifier"&&(l.key.name==="get"||l.key.name==="set")?(u=s=!0,a=l.kind=l.key.name,l.key=ed(),V!==Ut&&Lt(),l.value=$l(Pe(),!1)):Lt(),l.key.type==="Identifier"&&(Ke||s))for(var c=0;c<i.properties.length;++c){var p=i.properties[c];if(p.key.name===l.key.name){var d=a==p.kind||u&&p.kind==="init"||a==="init"&&(p.kind==="get"||p.kind==="set");d&&!Ke&&a==="init"&&p.kind==="init"&&(d=!1),d&&Y(l.key.start,"Redefinition of property")}}i.properties.push(l)}return z(i,"ObjectExpression")}();case Xu:return t=Pe(),q(),$l(t,!1);case ov:return function(){var i=Pe();return q(),i.callee=oi(nc(),!0),ie(Ut)?i.arguments=Wl(Ot,!1):i.arguments=Wh,z(i,"NewExpression")}();default:Lt()}}function ed(){return V===xs||V===Qu?nc():vn(!0)}function $l(t,e){V===Pr?t.id=vn():e?Lt():t.id=null,t.params=[];var n=!0;for(de(Ut);!ie(Ot);)n?n=!1:de(hn),t.params.push(vn());var r=ri,i=pe;if(ri=!0,pe=[],t.body=Yr(!0),ri=r,pe=i,Ke||t.body.body.length&&ec(t.body.body[0]))for(var o=t.id?-1:0;o<t.params.length;++o){var s=o<0?t.id:t.params[o];if((yv(s.name)||ks(s.name))&&Y(s.start,"Defining '"+s.name+"' in strict mode"),o>=0)for(var a=0;a<o;++a)s.name===t.params[a].name&&Y(s.start,"Argument name clash in strict mode")}return z(t,e?"FunctionDeclaration":"FunctionExpression")}function Wl(t,e,n){for(var r=[],i=!0;!ie(t);){if(i)i=!1;else if(de(hn),e&&B.allowTrailingCommas&&ie(t))break;n&&V===hn?r.push(null):r.push(Ne(!0))}return r}function vn(t){var e=Pe();return e.name=V===Pr?zt:t&&!B.forbidReserved&&V.keyword||Lt(),Di=!1,q(),z(e,"Identifier")}var bt=function(){function t(e,n){var r,i=typeof e=="string"?Et(e,t.PARSE_OPTIONS):e;this.ast=i,this.initFunc_=n,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);for(var o,s=/^step([A-Z]\w*)$/,a=Object.getOwnPropertyNames(t.prototype),l=0;l<a.length;l++){var u=a[l];typeof t.prototype[u]=="function"&&(o=u.match(s))&&(this.stepFunctions_[o[1]]=t.prototype[u].bind(this))}this.global=this.createScope(this.ast,null),this.ast=Et(this.polyfills_.join(`
`),t.PARSE_OPTIONS),this.polyfills_=void 0,this.stripLocations_(this.ast,void 0,void 0),(r=new L(this.ast,this.global)).done=!1,this.stateStack=[r],this.run(),this.value=void 0,this.ast=i,(r=new L(this.ast,this.global)).done=!1,this.stateStack.length=0,this.stateStack[0]=r,this.nodeConstructor=r.node.constructor,this.stateStack=this.stateStack,this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.UNDEFINED=void 0,this.NULL=null,this.NAN=NaN,this.TRUE=!0,this.FALSE=!1,this.STRING_EMPTY="",this.NUMBER_ZERO=0,this.NUMBER_ONE=1}return t.prototype.wrap=function(e){return e},t.prototype.unwrap=function(e,n){return e},t.prototype.appendCode=function(e){var n=this.stateStack[0];if(!n||n.node.type!=="Program")throw Error("Expecting original AST to start with a Program node.");var r=typeof e=="string"?Et(e,t.PARSE_OPTIONS):e;if(!r||r.type!=="Program")throw Error("Expecting new AST to start with a Program node.");this.populateScope_(r,n.scope);for(var i,o=0;i=r.body[o];o++)n.node.body.push(i);n.done=!1},t.prototype.step=function(){var e=this.stateStack,n=e[e.length-1];if(!n)return!1;var r=n.node,i=r.type;if(i==="Program"&&n.done)return!1;if(this.paused_)return!0;try{var o=this.stepFunctions_[i](e,n,r)}catch(s){if(s!==t.STEP_ERROR)throw s}return o&&e.push(o),!!r.end||this.step()},t.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},t.prototype.initGlobalScope=function(e){this.setProperty(e,"NaN",NaN,t.READONLY_DESCRIPTOR),this.setProperty(e,"Infinity",1/0,t.READONLY_DESCRIPTOR),this.setProperty(e,"undefined",void 0,t.READONLY_DESCRIPTOR),this.setProperty(e,"window",e,t.READONLY_DESCRIPTOR),this.setProperty(e,"this",e,t.READONLY_DESCRIPTOR),this.setProperty(e,"self",e),this.OBJECT_PROTO=new Tn(null),this.FUNCTION_PROTO=new Tn(this.OBJECT_PROTO),this.initFunction(e),this.initObject(e),e.proto=this.OBJECT_PROTO,this.setProperty(e,"constructor",this.OBJECT),this.initArray(e),this.initString(e),this.initBoolean(e),this.initNumber(e),this.initDate(e),this.initRegExp(e),this.initError(e),this.initMath(e),this.initJSON(e);var n=this,r=this.createNativeFunction(function(a){throw EvalError("Can't happen")},!1);r.eval=!0,this.setProperty(e,"eval",r),this.setProperty(e,"parseInt",this.createNativeFunction(parseInt,!1)),this.setProperty(e,"parseFloat",this.createNativeFunction(parseFloat,!1)),this.setProperty(e,"isNaN",this.createNativeFunction(isNaN,!1)),this.setProperty(e,"isFinite",this.createNativeFunction(isFinite,!1));for(var i=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],o=0;o<i.length;o++){var s=function(a){return function(l){try{return a(l)}catch(u){n.throwException(n.URI_ERROR,u.message)}}}(i[o][0]);this.setProperty(e,i[o][1],this.createNativeFunction(s,!1),t.NONENUMERABLE_DESCRIPTOR)}this.initFunc_&&this.initFunc_(this,e)},t.prototype.initFunction=function(e){var n,r=this,i=/^[A-Za-z_$][\w$]*$/;n=function(s){if(r.calledWithNew())var a=this;else a=r.createObjectProto(r.FUNCTION_PROTO);if(arguments.length)var l=String(arguments[arguments.length-1]);else l="";for(var u=[],c=0;c<arguments.length-1;c++){var p=String(arguments[c]);p.match(i)||r.throwException(r.SYNTAX_ERROR,"Invalid function argument: "+p),u.push(p)}u=u.join(", "),a.parentScope=r.global;try{var d=Et("$ = function("+u+") {"+l+"};",t.PARSE_OPTIONS)}catch(y){r.throwException(r.SYNTAX_ERROR,"Invalid code: "+y.message)}return d.body.length!==1&&r.throwException(r.SYNTAX_ERROR,"Invalid code in function body."),a.node=d.body[0].expression.right,r.setProperty(a,"length",a.node.length,t.READONLY_DESCRIPTOR),a},n.id=this.functionCounter_++,this.FUNCTION=this.createObjectProto(this.FUNCTION_PROTO),this.setProperty(e,"Function",this.FUNCTION),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO),this.FUNCTION.nativeFunc=n,this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,t.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.setProperty(this.FUNCTION_PROTO,"length",0,t.READONLY_DESCRIPTOR);var o=function(s){if(!(s&&s.isObject||r.getScope().strict))if(s==null)s=r.global;else{var a=r.createObjectProto(r.getPrototype(s));a.data=s,s=a}return s};n=function(s,a){var l=r.stateStack[r.stateStack.length-1];l.func_=this,l.funcThis_=o(s),l.arguments_=[],a!=null&&(a.isObject?l.arguments_=r.pseudoToNative(a):r.throwException(r.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),l.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",n),n=function(s,a){var l=r.stateStack[r.stateStack.length-1];l.func_=this,l.funcThis_=o(s),l.arguments_=[];for(var u=1;u<arguments.length;u++)l.arguments_.push(arguments[u]);l.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",n),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),n=function(){return this.toString()},this.setNativeFunctionPrototype(this.FUNCTION,"toString",n),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),n=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",n),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR)},t.prototype.initObject=function(e){var n,r=this;n=function(o){if(o==null)return r.calledWithNew()?this:r.createObjectProto(r.OBJECT_PROTO);if(!o.isObject){var s=r.createObjectProto(r.getPrototype(o));return s.data=o,s}return o},this.OBJECT=this.createNativeFunction(n,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT),this.setProperty(e,"Object",this.OBJECT);var i=function(o){o==null&&r.throwException(r.TYPE_ERROR,"Cannot convert '"+o+"' to object")};n=function(o){i(o);var s=o.isObject?o.properties:o;return r.nativeToPseudo(Object.getOwnPropertyNames(s))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),n=function(o){return i(o),o.isObject?r.nativeToPseudo(Object.keys(o.properties)):r.nativeToPseudo(Object.keys(o))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),n=function(o){return o===null?r.createObjectProto(null):(o!==void 0&&o.isObject||r.throwException(r.TYPE_ERROR,"Object prototype may only be an Object or null"),r.createObjectProto(o))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),n=function(o,s,a){return s=String(s),o&&o.isObject||r.throwException(r.TYPE_ERROR,"Object.defineProperty called on non-object"),a&&a.isObject||r.throwException(r.TYPE_ERROR,"Property description must be an object"),!o.properties[s]&&o.preventExtensions&&r.throwException(r.TYPE_ERROR,"Can't define property '"+s+"', object is not extensible"),r.setProperty(o,s,ReferenceError,a.properties),o},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),n=function(o,s){if(o&&o.isObject||r.throwException(r.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object"),(s=String(s))in o.properties){var a=Object.getOwnPropertyDescriptor(o.properties,s),l=o.getter[s],u=o.setter[s];(l||u)&&(a.get=l,a.set=u,delete a.value,delete a.writable);var c=r.nativeToPseudo(a);return"value"in a&&r.setProperty(c,"value",a.value),c}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),n=function(o){return i(o),r.getPrototype(o)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),n=function(o){return!!o&&!o.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),n=function(o){return o&&o.isObject&&(o.preventExtensions=!0),o},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",Tn.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",Tn.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",Tn.prototype.valueOf),n=function(o){return i(this),this.isObject?String(o)in this.properties:this.hasOwnProperty(o)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",n),n=function(o){return i(this),Object.prototype.propertyIsEnumerable.call(this.properties,o)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",n),n=function(o){for(;;){if(!(o=r.getPrototype(o)))return!1;if(o===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",n)},t.prototype.initArray=function(e){var n,r=this;n=function(i){if(r.calledWithNew())var o=this;else o=r.createObjectProto(r.ARRAY_PROTO);var s=arguments[0];if(arguments.length===1&&typeof s=="number")isNaN(t.legalArrayLength(s))&&r.throwException(r.RANGE_ERROR,"Invalid array length"),o.properties.length=s;else{for(var a=0;a<arguments.length;a++)o.properties[a]=arguments[a];o.properties.length=a}return o},this.ARRAY=this.createNativeFunction(n,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(e,"Array",this.ARRAY),n=function(i){return i&&i.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(n,!1),t.NONENUMERABLE_DESCRIPTOR),n=function(){return Array.prototype.pop.call(this.properties)},this.setNativeFunctionPrototype(this.ARRAY,"pop",n),n=function(i){return Array.prototype.push.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"push",n),n=function(){return Array.prototype.shift.call(this.properties)},this.setNativeFunctionPrototype(this.ARRAY,"shift",n),n=function(i){return Array.prototype.unshift.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"unshift",n),n=function(){return Array.prototype.reverse.call(this.properties),this},this.setNativeFunctionPrototype(this.ARRAY,"reverse",n),n=function(i,o){var s=Array.prototype.splice.apply(this.properties,arguments);return r.unwrap&&(s=s.map(r.unwrap)),r.nativeToPseudo(s)},this.setNativeFunctionPrototype(this.ARRAY,"splice",n),n=function(i,o){var s=Array.prototype.slice.call(this.properties,i,o);return r.unwrap&&(s=s.map(r.unwrap)),r.nativeToPseudo(s)},this.setNativeFunctionPrototype(this.ARRAY,"slice",n),n=function(i){return Array.prototype.join.call(this.properties,i)},this.setNativeFunctionPrototype(this.ARRAY,"join",n),n=function(i){for(var o=[],s=0,a=r.getProperty(this,"length"),l=0;l<a;l++){if(r.hasProperty(this,l)){var u=r.getProperty(this,l);o[s]=u}s++}for(l=0;l<arguments.length;l++){var c=arguments[l];if(r.isa(c,r.ARRAY))for(var p=r.getProperty(c,"length"),d=0;d<p;d++)r.hasProperty(c,d)&&(o[s]=r.getProperty(c,d)),s++;else o[s]=c}return r.unwrap&&(o=o.map(r.unwrap)),r.nativeToPseudo(o)},this.setNativeFunctionPrototype(this.ARRAY,"concat",n),n=function(i,o){return Array.prototype.indexOf.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"indexOf",n),n=function(i,o){return Array.prototype.lastIndexOf.apply(this.properties,arguments)},this.setNativeFunctionPrototype(this.ARRAY,"lastIndexOf",n),n=function(){return Array.prototype.sort.call(this.properties),this},this.setNativeFunctionPrototype(this.ARRAY,"sort",n),this.polyfills_.push("Object.defineProperty(Array.prototype, 'every',","{configurable: true, writable: true, value:","function(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var T, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","k = 0;","while (k < len) {","if (k in O && !callbackfn.call(T, O[k], k, O)) return false;","k++;","}","return true;","}","});","Object.defineProperty(Array.prototype, 'filter',","{configurable: true, writable: true, value:","function(fun/*, thisArg*/) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var t = Object(this);","var len = t.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in t) {","var val = t[i];","if (fun.call(thisArg, val, i, t)) res.push(val);","}","}","return res;","}","});","Object.defineProperty(Array.prototype, 'forEach',","{configurable: true, writable: true, value:","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var T, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","k = 0;","while (k < len) {","if (k in O) callback.call(T, O[k], k, O);","k++;","}","}","});","Object.defineProperty(Array.prototype, 'map',","{configurable: true, writable: true, value:","function(callback, thisArg) {","if (!this || typeof callback !== 'function') new TypeError;","var T, A, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","A = new Array(len);","k = 0;","while (k < len) {","if (k in O) A[k] = callback.call(T, O[k], k, O);","k++;","}","return A;","}","});","Object.defineProperty(Array.prototype, 'reduce',","{configurable: true, writable: true, value:","function(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var t = Object(this), len = t.length >>> 0, k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in t)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = t[k++];","}","for (; k < len; k++) {","if (k in t) value = callback(value, t[k], k, t);","}","return value;","}","});","Object.defineProperty(Array.prototype, 'reduceRight',","{configurable: true, writable: true, value:","function(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var t = Object(this), len = t.length >>> 0, k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in t)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = t[k--];","}","for (; k >= 0; k--) {","if (k in t) value = callback(value, t[k], k, t);","}","return value;","}","});","Object.defineProperty(Array.prototype, 'some',","{configurable: true, writable: true, value:","function(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var t = Object(this);","var len = t.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in t && fun.call(thisArg, t[i], i, t)) {","return true;","}","}","return false;","}","});","(function() {","var sort_ = Array.prototype.sort;","Array.prototype.sort = function(opt_comp) {","if (typeof opt_comp !== 'function') {","return sort_.call(this);","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp(this[j], this[j + 1]) > 0) {","var swap = this[j];","this[j] = this[j + 1];","this[j + 1] = swap;","changes++;","}","}","if (!changes) break;","}","return this;","};","})();","Object.defineProperty(Array.prototype, 'toLocaleString',","{configurable: true, writable: true, value:","function() {","var out = [];","for (var i = 0; i < this.length; i++) {","out[i] = (this[i] === null || this[i] === undefined) ? '' : this[i].toLocaleString();","}","return out.join(',');","}","});","")},t.prototype.initString=function(e){var n,r=this;n=function(s){return s=String(s),r.calledWithNew()?(this.data=s,this):s},this.STRING=this.createNativeFunction(n,!0),this.setProperty(e,"String",this.STRING),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),t.NONENUMERABLE_DESCRIPTOR);for(var i=["trim","toLowerCase","toUpperCase","toLocaleLowerCase","toLocaleUpperCase","charAt","charCodeAt","substring","slice","substr","indexOf","lastIndexOf","concat"],o=0;o<i.length;o++)this.setNativeFunctionPrototype(this.STRING,i[o],String.prototype[i[o]]);n=function(s,a,l){return a=a?r.pseudoToNative(a):void 0,l=l?r.pseudoToNative(l):void 0,String(this).localeCompare(s,a,l)},this.setNativeFunctionPrototype(this.STRING,"localeCompare",n),n=function(s,a){r.isa(s,r.REGEXP)&&(s=s.data);var l=String(this).split(s,a);return r.nativeToPseudo(l)},this.setNativeFunctionPrototype(this.STRING,"split",n),n=function(s){s=s?s.data:void 0;var a=String(this).match(s);return a?r.nativeToPseudo(a):null},this.setNativeFunctionPrototype(this.STRING,"match",n),n=function(s){return r.isa(s,r.REGEXP)&&(s=s.data),String(this).search(s)},this.setNativeFunctionPrototype(this.STRING,"search",n),n=function(s,a){return String(this).replace(s.data||s,a)},this.setNativeFunctionPrototype(this.STRING,"replace",n),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},t.prototype.initBoolean=function(e){var n,r=this;n=function(i){return i=!!i,r.calledWithNew()?(this.data=i,this):i},this.BOOLEAN=this.createNativeFunction(n,!0),this.setProperty(e,"Boolean",this.BOOLEAN)},t.prototype.initNumber=function(e){var n,r=this;n=function(s){return s=Number(s),r.calledWithNew()?(this.data=s,this):s},this.NUMBER=this.createNativeFunction(n,!0),this.setProperty(e,"Number",this.NUMBER);for(var i=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],o=0;o<i.length;o++)this.setProperty(this.NUMBER,i[o],Number[i[o]],t.READONLY_NONENUMERABLE_DESCRIPTOR);n=function(s){try{return Number(this).toExponential(s)}catch(a){r.throwException(r.ERROR,a.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",n),n=function(s){try{return Number(this).toFixed(s)}catch(a){r.throwException(r.ERROR,a.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",n),n=function(s){try{return Number(this).toPrecision(s)}catch(a){r.throwException(r.ERROR,a.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",n),n=function(s){try{return Number(this).toString(s)}catch(a){r.throwException(r.ERROR,a.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",n),n=function(s,a){return s=s?r.pseudoToNative(s):void 0,a=a?r.pseudoToNative(a):void 0,Number(this).toLocaleString(s,a)},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",n)},t.prototype.initDate=function(e){var n,r=this;n=function(s,a){if(!r.calledWithNew())return Date();var l=[null].concat([].slice.call(arguments));return this.data=new(Function.prototype.bind.apply(Date,l)),this},this.DATE=this.createNativeFunction(n,!0),this.setProperty(e,"Date",this.DATE),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),t.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),t.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),t.NONENUMERABLE_DESCRIPTOR);for(var i=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],o=0;o<i.length;o++)n=function(s){return function(a){for(var l=[],u=0;u<arguments.length;u++)l[u]=r.pseudoToNative(arguments[u]);return this.data[s].apply(this.data,l)}}(i[o]),this.setNativeFunctionPrototype(this.DATE,i[o],n)},t.prototype.initRegExp=function(e){var n,r=this;n=function(i,o){if(r.calledWithNew())var s=this;else s=r.createObjectProto(r.REGEXP_PROTO);return i=i?i.toString():"",o=o?o.toString():"",r.populateRegExp(s,new RegExp(i,o)),s},this.REGEXP=this.createNativeFunction(n,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(e,"RegExp",this.REGEXP),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,t.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,t.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,t.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",t.READONLY_NONENUMERABLE_DESCRIPTOR),n=function(i){return this.data.test(i)},this.setNativeFunctionPrototype(this.REGEXP,"test",n),n=function(i){i=i.toString(),this.data.lastIndex=Number(r.getProperty(this,"lastIndex"));var o=this.data.exec(i);if(r.setProperty(this,"lastIndex",this.data.lastIndex),o){for(var s=r.createObjectProto(r.ARRAY_PROTO),a=0;a<o.length;a++)r.setProperty(s,a,o[a]);return r.setProperty(s,"index",o.index),r.setProperty(s,"input",o.input),s}return null},this.setNativeFunctionPrototype(this.REGEXP,"exec",n)},t.prototype.initError=function(e){var n=this;this.ERROR=this.createNativeFunction(function(i){if(n.calledWithNew())var o=this;else o=n.createObject(n.ERROR);return i&&n.setProperty(o,"message",String(i),t.NONENUMERABLE_DESCRIPTOR),o},!0),this.setProperty(e,"Error",this.ERROR),this.setProperty(this.ERROR.properties.prototype,"message","",t.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",t.NONENUMERABLE_DESCRIPTOR);var r=function(i){var o=n.createNativeFunction(function(s){if(n.calledWithNew())var a=this;else a=n.createObject(o);return s&&n.setProperty(a,"message",String(s),t.NONENUMERABLE_DESCRIPTOR),a},!0);return n.setProperty(o,"prototype",n.createObject(n.ERROR)),n.setProperty(o.properties.prototype,"name",i,t.NONENUMERABLE_DESCRIPTOR),n.setProperty(e,i,o),o};this.EVAL_ERROR=r("EvalError"),this.RANGE_ERROR=r("RangeError"),this.REFERENCE_ERROR=r("ReferenceError"),this.SYNTAX_ERROR=r("SyntaxError"),this.TYPE_ERROR=r("TypeError"),this.URI_ERROR=r("URIError")},t.prototype.initMath=function(e){var n=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(e,"Math",n);for(var r=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],i=0;i<r.length;i++)this.setProperty(n,r[i],Math[r[i]],t.READONLY_NONENUMERABLE_DESCRIPTOR);var o=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"];for(i=0;i<o.length;i++)this.setProperty(n,o[i],this.createNativeFunction(Math[o[i]],!1),t.NONENUMERABLE_DESCRIPTOR)},t.prototype.initJSON=function(e){var n=this,r=n.createObjectProto(this.OBJECT_PROTO);this.setProperty(e,"JSON",r);var i=function(o){try{var s=JSON.parse(o.toString())}catch(a){n.throwException(n.SYNTAX_ERROR,a.message)}return n.nativeToPseudo(s)};this.setProperty(r,"parse",this.createNativeFunction(i,!1)),i=function(o){var s=n.pseudoToNative(o);try{var a=JSON.stringify(s)}catch(l){n.throwException(n.TYPE_ERROR,l.message)}return a},this.setProperty(r,"stringify",this.createNativeFunction(i,!1))},t.prototype.isa=function(e,n){if(e==null||!n)return!1;var r=n.properties.prototype;if(e===r)return!0;for(var i=this.getPrototype(e);i;){if(i===r)return!0;i=i.proto}return!1},t.legalArrayLength=function(e){var n=e>>>0;return n===Number(e)?n:NaN},t.legalArrayIndex=function(e){var n=e>>>0;return String(n)===String(e)&&n!==4294967295?n:NaN},t.prototype.createObject=function(e){return this.createObjectProto(e&&e.properties.prototype)},t.prototype.createObjectProto=function(e){var n=new Tn(e);return this.isa(n,this.FUNCTION)&&(this.setProperty(n,"prototype",this.createObjectProto(this.OBJECT_PROTO||null)),n.class="Function"),this.isa(n,this.ARRAY)&&(this.setProperty(n,"length",0,{configurable:!1,enumerable:!1,writable:!0}),n.class="Array"),this.isa(n,this.ERROR)&&(n.class="Error"),n},t.prototype.populateRegExp=function(e,n){e.data=n,this.setProperty(e,"lastIndex",n.lastIndex,t.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"source",n.source,t.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"global",n.global,t.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"ignoreCase",n.ignoreCase,t.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"multiline",n.multiline,t.READONLY_NONENUMERABLE_DESCRIPTOR)},t.prototype.createFunction=function(e,n){var r=this.createObjectProto(this.FUNCTION_PROTO);return r.parentScope=n,r.node=e,this.setProperty(r,"length",r.node.params.length,t.READONLY_DESCRIPTOR),r},t.prototype.createNativeFunction=function(e,n){var r=this.createObjectProto(this.FUNCTION_PROTO);return r.nativeFunc=e,e.id=this.functionCounter_++,this.setProperty(r,"length",e.length,t.READONLY_DESCRIPTOR),n?this.setProperty(r.properties.prototype,"constructor",r,t.NONENUMERABLE_DESCRIPTOR):n===!1&&(r.illegalConstructor=!0,this.setProperty(r,"prototype",void 0)),r},t.prototype.createAsyncFunction=function(e){var n=this.createObjectProto(this.FUNCTION_PROTO);return n.asyncFunc=e,e.id=this.functionCounter_++,this.setProperty(n,"length",e.length,t.READONLY_DESCRIPTOR),n},t.prototype.nativeToPseudo=function(e){if(typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e==null)return e;if(e instanceof RegExp){var n=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(n,e),n}if(e instanceof Function){var r=this;return this.createNativeFunction(function(){return r.nativeToPseudo(e.apply(r,Array.prototype.slice.call(arguments).map(function(a){return r.pseudoToNative(a)})))},void 0)}var i;if(Array.isArray(e)){i=this.createObjectProto(this.ARRAY_PROTO);for(var o=0;o<e.length;o++)o in e&&this.setProperty(i,o,this.wrap?this.wrap(e[o]):this.nativeToPseudo(e[o]))}else for(var s in i=this.createObjectProto(this.OBJECT_PROTO),e)this.setProperty(i,s,this.wrap?this.wrap(e[o]):this.nativeToPseudo(e[o]));return i},t.prototype.pseudoToNative=function(e,n){if(typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e==null)return e;if(this.isa(e,this.REGEXP))return e.data;var r,i=n||{pseudo:[],native:[]};if((s=i.pseudo.indexOf(e))!==-1)return i.native[s];if(i.pseudo.push(e),this.isa(e,this.ARRAY)){r=[],i.native.push(r);for(var o=this.getProperty(e,"length"),s=0;s<o;s++)this.hasProperty(e,s)&&(r[s]=this.unwrap?this.unwrap(this.getProperty(e,s),i):this.pseudoToNative(this.getProperty(e,s),i))}else{if(e._native)return e._native;r={},i.native.push(r);var a=void 0;for(var l in e.properties)a=e.properties[l],r[l]=this.unwrap?this.unwrap(a,i):this.pseudoToNative(a,i)}return i.pseudo.pop(),i.native.pop(),r},t.prototype.getPrototype=function(e){switch(typeof e){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return e?e.proto:null},t.prototype.getProperty=function(e,n){if(n=String(n),e==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+n+"' of "+e),n==="length"){if(this.isa(e,this.STRING))return String(e).length}else if(n.charCodeAt(0)<64&&this.isa(e,this.STRING)){var r=t.legalArrayIndex(n);if(!isNaN(r)&&r<String(e).length)return String(e)[r]}do{var i=e;if(i.properties&&n in i.properties){var o=i.getter[n];return o?(o.isGetter=!0,o):i.properties[n]}if(i._native!==void 0&&n.charAt(0)!=="_"&&typeof i._native[n]!="function")return this.wrap?this.wrap(i._native[n]):i._native[n]}while(e=this.getPrototype(e))},t.prototype.hasProperty=function(e,n){if(!e.isObject)throw TypeError("Primitive data type has no properties");if((n=String(n))==="length"&&this.isa(e,this.STRING))return!0;if(this.isa(e,this.STRING)){var r=t.legalArrayIndex(n);if(!isNaN(r)&&r<String(e).length)return!0}do{var i=e;if(i.properties&&n in i.properties)return!0;if(i._native!==void 0&&n.charAt(0)!="_"){var o=typeof i._native[n];return o!=="function"&&(o!=="undefined"||td(i._native.constructor,n))}}while(e=this.getPrototype(e));return!1},t.prototype.setProperty=function(e,n,r,i){n=String(n),e==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+n+"' of "+e),i&&("get"in i||"set"in i)&&("value"in i||"writable"in i)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var o=!this.stateStack||this.getScope().strict;if(e.isObject){if(this.isa(e,this.STRING)){var s=t.legalArrayIndex(n);if(n==="length"||!isNaN(s)&&s<String(e).length)return void(o&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+n+"' of String '"+e.data+"'"))}if(e.class==="Array"){var a=e.properties.length,l=void 0;if(n==="length"){if(r=t.legalArrayLength(r),isNaN(r)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),r<a)for(l in e.properties)l=t.legalArrayIndex(l),!isNaN(l)&&r<=l&&delete e.properties[l]}else isNaN(l=t.legalArrayIndex(n))||(e.properties.length=Math.max(a,l+1))}if(!e.preventExtensions||n in e.properties)if(i){"get"in i&&(i.get?e.getter[n]=i.get:delete e.getter[n]),"set"in i&&(i.set?e.setter[n]=i.set:delete e.setter[n]);var u={};"configurable"in i&&(u.configurable=i.configurable),"enumerable"in i&&(u.enumerable=i.enumerable),"writable"in i&&(u.writable=i.writable,delete e.getter[n],delete e.setter[n]),"value"in i?(u.value=i.value,delete e.getter[n],delete e.setter[n]):r!==ReferenceError&&(u.value=r,delete e.getter[n],delete e.setter[n]);try{Object.defineProperty(e.properties,n,u)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+n)}}else{if(r===ReferenceError)throw ReferenceError("Value not specified.");if(e._native!==void 0&&n.charAt(0)!="_"){var c=typeof e._native[n];if(c!=="function"&&(c!=="undefined"||td(e._native.constructor,n))){var p=this.unwrap?this.unwrap(r):r;return void(e._native[n]=p)}}for(var d=e;!(n in d.properties);)if(!(d=this.getPrototype(d))){d=e;break}if(d.setter&&d.setter[n])return d.setter[n];if(d.getter&&d.getter[n])o&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+n+"' of object '"+e+"' which only has a getter");else try{e.properties[n]=r}catch{o&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+n+"' of object '"+e+"'")}}else o&&this.throwException(this.TYPE_ERROR,"Can't add property '"+n+"', object is not extensible")}else o&&this.throwException(this.TYPE_ERROR,"Can't create property '"+n+"' on '"+e+"'")},t.prototype.setNativeFunctionPrototype=function(e,n,r){this.setProperty(e.properties.prototype,n,this.createNativeFunction(r,!1),t.NONENUMERABLE_DESCRIPTOR)},t.prototype.getScope=function(){var e=this.stateStack[this.stateStack.length-1].scope;if(!e)throw Error("No scope found.");return e},t.prototype.createScope=function(e,n){var r=this.createObjectProto(null);if(r.parentScope=n,n||this.initGlobalScope(r),this.populateScope_(e,r),r.strict=!1,n&&n.strict)r.strict=!0;else{var i=e.body&&e.body[0];i&&i.expression&&i.expression.type==="Literal"&&i.expression.value==="use strict"&&(r.strict=!0)}return r},t.prototype.createSpecialScope=function(e,n){if(!e)throw Error("parentScope required");var r=n||this.createObjectProto(null);return r.parentScope=e,r.strict=e.strict,r},t.prototype.getValueFromScope=function(e){for(var n=this.getScope();n&&n!==this.global;){if(e in n.properties)return n.properties[e];n=n.parentScope}if(n===this.global&&this.hasProperty(n,e))return this.getProperty(n,e);var r=this.stateStack[this.stateStack.length-1].node;r.type==="UnaryExpression"&&r.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,e+" is not defined")},t.prototype.setValueToScope=function(e,n){for(var r=this.getScope(),i=r.strict;r&&r!==this.global;){if(e in r.properties)return void(r.properties[e]=n);r=r.parentScope}if(r===this.global&&(!i||this.hasProperty(r,e)))return this.setProperty(r,e,n);this.throwException(this.REFERENCE_ERROR,e+" is not defined")},t.prototype.populateScope_=function(e,n){if(e.type==="VariableDeclaration")for(var r=0;r<e.declarations.length;r++)this.setProperty(n,e.declarations[r].id.name,void 0,t.VARIABLE_DESCRIPTOR);else{if(e.type==="FunctionDeclaration")return void this.setProperty(n,e.id.name,this.createFunction(e,n),t.VARIABLE_DESCRIPTOR);if(e.type==="FunctionExpression"||e.type==="ExpressionStatement")return}var i=e.constructor;for(var o in e){var s=e[o];if(s&&typeof s=="object")if(Array.isArray(s))for(r=0;r<s.length;r++)s[r]&&s[r].constructor===i&&this.populateScope_(s[r],n);else s.constructor===i&&this.populateScope_(s,n)}},t.prototype.stripLocations_=function(e,n,r){for(var i in n?e.start=n:delete e.start,r?e.end=r:delete e.end,e)if(e.hasOwnProperty(i)){var o=e[i];o&&typeof o=="object"&&this.stripLocations_(o,n,r)}},t.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},t.prototype.getValue=function(e){return e[0]===t.SCOPE_REFERENCE?this.getValueFromScope(e[1]):this.getProperty(e[0],e[1])},t.prototype.setValue=function(e,n){return e[0]===t.SCOPE_REFERENCE?this.setValueToScope(e[1],n):this.setProperty(e[0],e[1],n)},t.prototype.throwException=function(e,n){if(n===void 0)var r=e;else r=this.createObject(e),this.setProperty(r,"message",n,t.NONENUMERABLE_DESCRIPTOR);throw this.executeException(r),t.STEP_ERROR},t.prototype.executeException=function(e){var n,r=this.stateStack.slice();do{this.stateStack.pop();var i=this.stateStack[this.stateStack.length-1];if(i.node.type==="TryStatement")return void(i.throwValue=e)}while(i&&i.node.type!=="Program");if(this.isa(e,this.ERROR)){var o={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},s=this.getProperty(e,"name").toString(),a=this.getProperty(e,"message").valueOf();n=(o[s]||Error)(a)}else n=e.toString();throw this.stateStack=r,n},t.prototype.createGetter_=function(e,n){var r=Array.isArray(n)?n[0]:n,i=new this.nodeConstructor;i.type="CallExpression";var o=new L(i,this.stateStack[this.stateStack.length-1].scope);return o.doneCallee_=!0,o.funcThis_=r,o.func_=e,o.doneArgs_=!0,o.arguments_=[],o},t.prototype.createSetter_=function(e,n,r){var i=Array.isArray(n)?n[0]:this.global,o=new this.nodeConstructor;o.type="CallExpression";var s=new L(o,this.stateStack[this.stateStack.length-1].scope);return s.doneCallee_=!0,s.funcThis_=i,s.func_=e,s.doneArgs_=!0,s.arguments_=[r],s},t.prototype.stepArrayExpression=function(e,n,r){var i=r.elements,o=n.n_||0;for(n.array_?(this.setProperty(n.array_,o,n.value),o++):(n.array_=this.createObjectProto(this.ARRAY_PROTO),n.array_.properties.length=i.length);o<i.length;){if(i[o])return n.n_=o,new L(i[o],n.scope);o++}e.pop(),e[e.length-1].value=n.array_},t.prototype.stepAssignmentExpression=function(e,n,r){if(!n.doneLeft_){n.doneLeft_=!0;var i=new L(r.left,n.scope);return i.components=!0,i}if(!n.doneRight_){if(n.leftReference_||(n.leftReference_=n.value),n.doneGetter_&&(n.leftValue_=n.value),!n.doneGetter_&&r.operator!=="="){var o=this.getValue(n.leftReference_);if(n.leftValue_=o,o&&typeof o=="object"&&o.isGetter){o.isGetter=!1,n.doneGetter_=!0;var s=o;return this.createGetter_(s,n.leftReference_)}}return n.doneRight_=!0,new L(r.right,n.scope)}if(n.doneSetter_)return e.pop(),void(e[e.length-1].value=n.doneSetter_);var a=n.leftValue_,l=n.value;switch(r.operator){case"=":a=l;break;case"+=":a+=l;break;case"-=":a-=l;break;case"*=":a*=l;break;case"/=":a/=l;break;case"%=":a%=l;break;case"<<=":a<<=l;break;case">>=":a>>=l;break;case">>>=":a>>>=l;break;case"&=":a&=l;break;case"^=":a^=l;break;case"|=":a|=l;break;default:throw SyntaxError("Unknown assignment expression: "+r.operator)}var u=this.setValue(n.leftReference_,a);if(u)return n.doneSetter_=a,this.createSetter_(u,n.leftReference_,a);e.pop(),e[e.length-1].value=a},t.prototype.stepBinaryExpression=function(e,n,r){if(!n.doneLeft_)return n.doneLeft_=!0,new L(r.left,n.scope);if(!n.doneRight_)return n.doneRight_=!0,n.leftValue_=n.value,new L(r.right,n.scope);e.pop();var i,o=n.leftValue_,s=n.value;switch(r.operator){case"==":i=o==s;break;case"!=":i=o!=s;break;case"===":i=o===s;break;case"!==":i=o!==s;break;case">":i=o>s;break;case">=":i=o>=s;break;case"<":i=o<s;break;case"<=":i=o<=s;break;case"+":i=o+s;break;case"-":i=o-s;break;case"*":i=o*s;break;case"/":i=o/s;break;case"%":i=o%s;break;case"&":i=o&s;break;case"|":i=o|s;break;case"^":i=o^s;break;case"<<":i=o<<s;break;case">>":i=o>>s;break;case">>>":i=o>>>s;break;case"in":s&&s.isObject||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+s+"'"),i=this.hasProperty(s,o);break;case"instanceof":this.isa(s,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"Right-hand side of instanceof is not an object"),i=!!o.isObject&&this.isa(o,s);break;default:throw SyntaxError("Unknown binary operator: "+r.operator)}e[e.length-1].value=i},t.prototype.stepBlockStatement=function(e,n,r){var i=n.n_||0,o=r.body[i];if(o)return n.n_=i+1,new L(o,n.scope);e.pop()},t.prototype.stepBreakStatement=function(e,n,r){e.pop();var i=null;for(r.label&&(i=r.label.name);n&&n.node.type!=="CallExpression"&&n.node.type!=="NewExpression";){if(i){if(n.labels&&n.labels.indexOf(i)!==-1)return}else if(n.isLoop||n.isSwitch)return;n=e.pop()}throw SyntaxError("Illegal break statement")},t.prototype.stepCallExpression=function(e,n,r){if(!n.doneCallee_){n.doneCallee_=1;var i=new L(r.callee,n.scope);return i.components=!0,i}if(n.doneCallee_===1){n.doneCallee_=2;var o=n.value;if(Array.isArray(o)){if(n.func_=this.getValue(o),o[0]!==t.SCOPE_REFERENCE&&(n.funcThis_=o[0]),(o=n.func_)&&typeof o=="object"&&o.isGetter)return o.isGetter=!1,n.doneCallee_=1,this.createGetter_(o,n.value)}else n.func_=o;n.arguments_=[],n.n_=0}if(o=n.func_,!n.doneArgs_){if(n.n_!==0&&n.arguments_.push(n.value),r.arguments[n.n_])return new L(r.arguments[n.n_++],n.scope);r.type==="NewExpression"?(o.illegalConstructor&&this.throwException(this.TYPE_ERROR,o+" is not a constructor"),n.funcThis_=this.createObject(o),n.isConstructor=!0):n.funcThis_===void 0&&(n.funcThis_=n.scope.strict?void 0:this.global),n.doneArgs_=!0}if(n.doneExec_)e.pop(),n.isConstructor&&typeof n.value!="object"?e[e.length-1].value=n.funcThis_:e[e.length-1].value=n.value;else{n.doneExec_=!0,o&&o.isObject||(console.log("non-function called",o,n),this.throwException(this.TYPE_ERROR,o+" is not a function"));var s=o.node;if(s){for(var a=this.createScope(s.body,o.parentScope),l=0;l<s.params.length;l++){var u=s.params[l].name,c=n.arguments_.length>l?n.arguments_[l]:void 0;this.setProperty(a,u,c)}var p=this.createObjectProto(this.ARRAY_PROTO);for(l=0;l<n.arguments_.length;l++)this.setProperty(p,l,n.arguments_[l]);this.setProperty(a,"arguments",p);var d=s.id&&s.id.name;return d&&this.setProperty(a,d,o),this.setProperty(a,"this",n.funcThis_,t.READONLY_DESCRIPTOR),n.value=void 0,new L(s.body,a)}if(o.eval){var y=n.arguments_[0];if(typeof y=="string"){try{var v=Et(y.toString(),t.PARSE_OPTIONS)}catch(f){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+f.message)}var m=new this.nodeConstructor;return m.type="EvalProgram_",m.body=v.body,this.stripLocations_(m,r.start,r.end),(a=n.scope).strict?a=this.createScope(v,a):this.populateScope_(v,a),this.value=void 0,new L(m,a)}n.value=y}else if(o.nativeFunc)n.funcThis_!==void 0&&n.funcThis_._native!==void 0?n.value=o.nativeFunc.call(n.funcThis_,n.arguments_):n.value=o.nativeFunc.apply(n.funcThis_,n.arguments_);else{if(o.asyncFunc){var P=this,h=n.arguments_.concat(function(f){n.value=f,P.paused_=!1});return this.paused_=!0,void o.asyncFunc.apply(n.funcThis_,h)}this.throwException(this.TYPE_ERROR,o.class+" is not a function")}}},t.prototype.stepCatchClause=function(e,n,r){if(!n.done_){n.done_=!0;var i=this.createSpecialScope(n.scope);return this.setProperty(i,r.param.name,n.throwValue),new L(r.body,i)}e.pop()},t.prototype.stepConditionalExpression=function(e,n,r){var i=n.mode_||0;if(i===0)return n.mode_=1,new L(r.test,n.scope);if(i===1){n.mode_=2;var o=!!n.value;if(o&&r.consequent)return new L(r.consequent,n.scope);if(!o&&r.alternate)return new L(r.alternate,n.scope);this.value=void 0}e.pop(),r.type==="ConditionalExpression"&&(e[e.length-1].value=n.value)},t.prototype.stepContinueStatement=function(e,n,r){e.pop();var i=null;for(r.label&&(i=r.label.name),n=e[e.length-1];n&&n.node.type!=="CallExpression"&&n.node.type!=="NewExpression";){if(n.isLoop&&(!i||n.labels&&n.labels.indexOf(i)!==-1))return;e.pop(),n=e[e.length-1]}throw SyntaxError("Illegal continue statement")},t.prototype.stepDebuggerStatement=function(e,n,r){e.pop()},t.prototype.stepDoWhileStatement=function(e,n,r){if(r.type==="DoWhileStatement"&&n.test_===void 0&&(n.value=!0,n.test_=!0),!n.test_)return n.test_=!0,new L(r.test,n.scope);if(n.value){if(r.body)return n.test_=!1,n.isLoop=!0,new L(r.body,n.scope)}else e.pop()},t.prototype.stepEmptyStatement=function(e,n,r){e.pop()},t.prototype.stepEvalProgram_=function(e,n,r){var i=n.n_||0,o=r.body[i];if(o)return n.n_=i+1,new L(o,n.scope);e.pop(),e[e.length-1].value=this.value},t.prototype.stepExpressionStatement=function(e,n,r){if(!n.done_)return n.done_=!0,new L(r.expression,n.scope);e.pop(),this.value=n.value},t.prototype.stepForInStatement=function(e,n,r){if(!n.doneInit_&&(n.doneInit_=!0,r.left.declarations&&r.left.declarations[0].init))return n.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer."),new L(r.left,n.scope);if(!n.doneObject_)return n.doneObject_=!0,n.variable_||(n.variable_=n.value),new L(r.right,n.scope);if(n.isLoop||(n.isLoop=!0,n.object_=n.value,n.visited_=Object.create(null)),n.name_===void 0){e:do{if(n.object_&&n.object_.isObject){n.props_||(n.props_=Object.getOwnPropertyNames(n.object_.properties));do var i=n.props_.shift();while(i&&(n.visited_[i]||!Object.prototype.hasOwnProperty.call(n.object_.properties,i)));if(i&&(n.visited_[i]=!0,Object.prototype.propertyIsEnumerable.call(n.object_.properties,i))){n.name_=i;break e}}else if(n.object_!==null){n.props_||(n.props_=Object.getOwnPropertyNames(n.object_));do i=n.props_.shift();while(i&&n.visited_[i]);if(i){n.visited_[i]=!0,n.name_=i;break e}}n.object_=this.getPrototype(n.object_),n.props_=null}while(n.object_!==null);if(n.object_===null)return void e.pop()}if(!n.doneVariable_){n.doneVariable_=!0;var o=r.left;if(o.type!=="VariableDeclaration"){n.variable_=null;var s=new L(o,n.scope);return s.components=!0,s}n.variable_=[t.SCOPE_REFERENCE,o.declarations[0].id.name]}if(n.variable_||(n.variable_=n.value),!n.doneSetter_){n.doneSetter_=!0;var a=n.name_,l=this.setValue(n.variable_,a);if(l)return this.createSetter_(l,n.variable_,a)}return n.name_=void 0,n.doneVariable_=!1,n.doneSetter_=!1,r.body?new L(r.body,n.scope):void 0},t.prototype.stepForStatement=function(e,n,r){var i=n.mode_||0;if(i===0){if(n.mode_=1,r.init)return new L(r.init,n.scope)}else if(i===1){if(n.mode_=2,r.test)return new L(r.test,n.scope)}else if(i===2){if(n.mode_=3,!r.test||n.value)return n.isLoop=!0,new L(r.body,n.scope);e.pop()}else if(i===3&&(n.mode_=1,r.update))return new L(r.update,n.scope)},t.prototype.stepFunctionDeclaration=function(e,n,r){e.pop()},t.prototype.stepFunctionExpression=function(e,n,r){e.pop(),e[e.length-1].value=this.createFunction(r,n.scope)},t.prototype.stepIdentifier=function(e,n,r){if(e.pop(),n.components)e[e.length-1].value=[t.SCOPE_REFERENCE,r.name];else{var i=this.getValueFromScope(r.name);if(i&&typeof i=="object"&&i.isGetter){i.isGetter=!1;for(var o=n.scope;!this.hasProperty(o,r.name);)o=o.parentScope;var s=i;return this.createGetter_(s,this.global)}e[e.length-1].value=i}},t.prototype.stepIfStatement=function(e,n,r){return this.stepConditionalExpression(e,n,r)},t.prototype.stepLabeledStatement=function(e,n,r){e.pop();var i=n.labels||[];i.push(r.label.name);var o=new L(r.body,n.scope);return o.labels=i,o},t.prototype.stepLiteral=function(e,n,r){e.pop();var i=r.value;if(i instanceof RegExp){var o=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(o,i),i=o}e[e.length-1].value=i},t.prototype.stepLogicalExpression=function(e,n,r){if(r.operator!=="&&"&&r.operator!=="||")throw SyntaxError("Unknown logical operator: "+r.operator);if(!n.doneLeft_)return n.doneLeft_=!0,new L(r.left,n.scope);if(n.doneRight_)e.pop(),e[e.length-1].value=n.value;else{if(!(r.operator==="&&"&&!n.value||r.operator==="||"&&n.value))return n.doneRight_=!0,new L(r.right,n.scope);e.pop(),e[e.length-1].value=n.value}},t.prototype.stepMemberExpression=function(e,n,r){if(!n.doneObject_)return n.doneObject_=!0,new L(r.object,n.scope);var i;if(r.computed){if(!n.doneProperty_)return n.object_=n.value,n.doneProperty_=!0,new L(r.property,n.scope);i=n.value}else n.object_=n.value,i=r.property.name;if(e.pop(),n.components)e[e.length-1].value=[n.object_,i];else{var o=this.getProperty(n.object_,i);if(o&&typeof o=="object"&&o.isGetter){o.isGetter=!1;var s=o;return this.createGetter_(s,n.object_)}e[e.length-1].value=o}},t.prototype.stepNewExpression=function(e,n,r){return this.stepCallExpression(e,n,r)},t.prototype.stepObjectExpression=function(e,n,r){var i=n.n_||0,o=r.properties[i];if(n.object_){var s=o.key;if(s.type==="Identifier")var a=s.name;else{if(s.type!=="Literal")throw SyntaxError("Unknown object structure: "+s.type);a=s.value}n.properties_[a]||(n.properties_[a]={}),n.properties_[a][o.kind]=n.value,n.n_=++i,o=r.properties[i]}else n.object_=this.createObjectProto(this.OBJECT_PROTO),n.properties_=Object.create(null);if(o)return new L(o.value,n.scope);for(var l in n.properties_){var u=n.properties_[l];if("get"in u||"set"in u){var c={configurable:!0,enumerable:!0,get:u.get,set:u.set};this.setProperty(n.object_,l,null,c)}else this.setProperty(n.object_,l,u.init)}e.pop(),e[e.length-1].value=n.object_},t.prototype.stepProgram=function(e,n,r){var i=n.n_||0,o=r.body[i];if(o)return n.done=!1,n.n_=i+1,new L(o,n.scope);n.done=!0},t.prototype.stepReturnStatement=function(e,n,r){if(r.argument&&!n.done_)return n.done_=!0,new L(r.argument,n.scope);var i=n.value,o=e.length-1;for(n=e[o];n.node.type!=="CallExpression"&&n.node.type!=="NewExpression";){if(n.node.type!=="TryStatement"&&e.splice(o,1),--o<0)throw SyntaxError("Illegal return statement");n=e[o]}n.value=i},t.prototype.stepSequenceExpression=function(e,n,r){var i=n.n_||0,o=r.expressions[i];if(o)return n.n_=i+1,new L(o,n.scope);e.pop(),e[e.length-1].value=n.value},t.prototype.stepSwitchStatement=function(e,n,r){if(!n.test_)return n.test_=1,new L(r.discriminant,n.scope);for(n.test_===1&&(n.test_=2,n.switchValue_=n.value);;){var i=n.index_||0,o=r.cases[i];if(n.matched_||!o||o.test)if(o||n.matched_||!n.defaultCase_){if(!o)return void e.pop();if(!n.matched_&&!n.tested_&&o.test)return n.tested_=!0,new L(o.test,n.scope);if(n.matched_||n.value===n.switchValue_){n.matched_=!0;var s=n.n_||0;if(o.consequent[s])return n.isSwitch=!0,n.n_=s+1,new L(o.consequent[s],n.scope)}n.tested_=!1,n.n_=0,n.index_=i+1}else n.matched_=!0,n.index_=n.defaultCase_;else n.defaultCase_=i,n.index_=i+1}},t.prototype.stepThisExpression=function(e,n,r){e.pop(),e[e.length-1].value=this.getValueFromScope("this")},t.prototype.stepThrowStatement=function(e,n,r){if(!n.done_)return n.done_=!0,new L(r.argument,n.scope);this.throwException(n.value)},t.prototype.stepTryStatement=function(e,n,r){if(!n.doneBlock_)return n.doneBlock_=!0,new L(r.block,n.scope);if(n.throwValue&&!n.doneHandler_&&r.handler){n.doneHandler_=!0;var i=new L(r.handler,n.scope);return i.throwValue=n.throwValue,n.throwValue=null,i}if(!n.doneFinalizer_&&r.finalizer)return n.doneFinalizer_=!0,new L(r.finalizer,n.scope);n.throwValue?this.executeException(n.throwValue):e.pop()},t.prototype.stepUnaryExpression=function(e,n,r){if(!n.done_){n.done_=!0;var i=new L(r.argument,n.scope);return i.components=r.operator==="delete",i}e.pop();var o=n.value;if(r.operator==="-")o=-o;else if(r.operator==="+")o=+o;else if(r.operator==="!")o=!o;else if(r.operator==="~")o=~o;else if(r.operator==="delete"){var s=!0;if(Array.isArray(o)){var a=o[0];a===t.SCOPE_REFERENCE&&(a=n.scope);var l=String(o[1]);try{delete a.properties[l]}catch{n.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+l+"' of '"+a+"'"):s=!1}}o=s}else if(r.operator==="typeof")o=o&&o.class==="Function"?"function":typeof o;else{if(r.operator!=="void")throw SyntaxError("Unknown unary operator: "+r.operator);o=void 0}e[e.length-1].value=o},t.prototype.stepUpdateExpression=function(e,n,r){if(!n.doneLeft_){n.doneLeft_=!0;var i=new L(r.argument,n.scope);return i.components=!0,i}if(n.leftSide_||(n.leftSide_=n.value),n.doneGetter_&&(n.leftValue_=n.value),!n.doneGetter_){var o=this.getValue(n.leftSide_);if(n.leftValue_=o,o&&typeof o=="object"&&o.isGetter){o.isGetter=!1,n.doneGetter_=!0;var s=o;return this.createGetter_(s,n.leftSide_)}}if(n.doneSetter_)return e.pop(),void(e[e.length-1].value=n.doneSetter_);var a;if(o=Number(n.leftValue_),r.operator==="++")a=o+1;else{if(r.operator!=="--")throw SyntaxError("Unknown update expression: "+r.operator);a=o-1}var l=r.prefix?a:o,u=this.setValue(n.leftSide_,a);if(u)return n.doneSetter_=l,this.createSetter_(u,n.leftSide_,a);e.pop(),e[e.length-1].value=l},t.prototype.stepVariableDeclaration=function(e,n,r){var i=r.declarations,o=n.n_||0,s=i[o];for(n.init_&&s&&(this.setValueToScope(s.id.name,n.value),n.init_=!1,s=i[++o]);s;){if(s.init)return n.n_=o,n.init_=!0,new L(s.init,n.scope);s=i[++o]}e.pop()},t.prototype.stepWithStatement=function(e,n,r){if(!n.doneObject_)return n.doneObject_=!0,new L(r.object,n.scope);if(!n.doneBody_){n.doneBody_=!0;var i=this.createSpecialScope(n.scope,n.value);return new L(r.body,i)}e.pop()},t.prototype.stepWhileStatement=function(e,n,r){return this.stepDoWhileStatement(e,n,r)},t.PARSE_OPTIONS={ecmaVersion:5},t.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},t.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},t.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},t.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},t.STEP_ERROR={},t.SCOPE_REFERENCE={},t.toStringCycles_=[],t}(),Tn=function(){function t(e){this.proto=null,this.isObject=!0,this.class="Object",this.data=null,this._native=void 0,this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=e}return t.prototype.toString=function(){if(this.class==="Array"){(i=bt.toStringCycles_).push(this);try{for(var e=[],n=0;n<this.properties.length;n++){var r=this.properties[n];e[n]=r&&r.isObject&&i.indexOf(r)!==-1?"...":r}}finally{i.pop()}return e.join(",")}if(this.class==="Error"){var i;if((i=bt.toStringCycles_).indexOf(this)!==-1)return"[object Error]";var o,s=void 0,a=this;do if("name"in a.properties){o=a.properties.name;break}while(a=a.proto);a=this;do if("message"in a.properties){s=a.properties.message;break}while(a=a.proto);i.push(this);try{o=o&&o.toString(),s=s&&s.toString()}finally{i.pop()}return s?o+": "+s:String(o)}return this.data!==null?String(this.data):"[object "+this.class+"]"},t.prototype.valueOf=function(){return this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data},t}(),L=function(t,e){this.node=t,this.scope=e},td=function(t,e){for(var n=t;n&&n.prototype;){if(Object.getOwnPropertyNames(n.prototype).indexOf(e)>=0)return!0;n=Object.getPrototypeOf(n)}return!1};function nd(t,e){var n={},r=Et(t,{locations:!0,onComment:function(a,l,u,c,p,d){n[d.line]=l}});if(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="FunctionDeclaration")throw new Error("JavaScript program should only have one function definition");var i=r.body[0].body.body,o=[],s=[];return i.forEach(function(a){if(a.type==="ExpressionStatement"){var l=a.expression;if(l.type==="AssignmentExpression"&&l.operator==="="&&l.left.type==="MemberExpression"&&l.left.object.type==="ThisExpression"&&l.left.property.type==="Identifier"){for(var u=[],c=l.loc.start.line-1;c>=0&&n[c]!==void 0;c--)u.push(n[c]);if(!(u.length<=0)){var p=l.left.property.name;if(!(Array.isArray(e)&&e.indexOf(p)>=0)&&l.right.type!=="FunctionExpression"){var d=function(y,v,m){var P={name:y,title:{},className:null,proposed:!1,initialValue:null};if(v.forEach(function(O){var x=O.indexOf("@ui ");if(x>=0)P.description=O.substring(x+4).trim();else{var k=O.indexOf("@title ");if(k>=0){var T=O.substring(k+7).trim();T.indexOf("@ja ")===0?P.title.ja=T.substring(4).trim():P.title.default=T}else if(O.indexOf("@proposed")>=0)P.proposed=!0;else{var H=O.indexOf("@comment ");if(H>=0){var I=O.substring(H+9).trim();return P.comment||(P.comment={}),void(I.indexOf("@ja ")===0?P.comment.ja=I.substring(4).trim():P.comment.default=I)}}}}),!P.description&&!P.comment)return null;if(P.proposed||P.comment)return P;var h=P.description.indexOf("("),f=P.description.indexOf(")",h);if(!(h<0||f<0)){P.className=P.description.substr(0,h);try{var g=new bt("["+P.description.substr(h+1,f-h-1)+"]"),w=Date.now();for(g.unwrap=null,g.wrap=null;g.step()&&!(Date.now()-w>100););P.params=g.pseudoToNative(g.value)}catch{}return P.params||(P.params=[]),P}}(p,u);s.push(l),d&&o.push(d)}}}}}),{widgets:o,fields:s,ast:r}}function xa(t,e){if(e===void 0&&(e=-1),!t)return{dependencyAtCursor:null,dependencies:[]};for(var n=[],r=null,i=(typeof t=="string"?Et(t,bt.PARSE_OPTIONS):t).body[0].body.body.slice(0);i.length>0;){var o=i.shift();if(o!=null){if(o.type!=="CallExpression")o.expression&&i.push(o.expression),o.object&&i.push(o.object),o.property&&i.push(o.property),o.name&&typeof name!="string"&&i.push(o.name),o.left&&i.push(o.left),o.right&&i.push(o.right),o.id&&i.push(o.id),o.init&&i.push(o.init),o.callee&&i.push(o.callee),o.body&&Array.isArray(o.body)&&i.push.apply(i,o.body),o.declarations&&Array.isArray(o.declarations)&&i.push.apply(i,o.declarations),o.arguments&&Array.isArray(o.arguments)&&i.push.apply(i,o.arguments),o.params&&Array.isArray(o.params)&&i.push.apply(i,o.params);else if(o.callee.name&&o.callee.name==="require"){var s=o.arguments;if(s&&Array.isArray(s)&&s.length===1){var a=s[0];if(a.type==="Literal"){var l=a.value;n.push(l),o.start&&o.end&&o.start<=e&&o.end>=e&&(r=l)}}}}}return{dependencyAtCursor:r,dependencies:n}}bt.Object=Tn,bt.State=L;var is=function(){return is=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},is.apply(this,arguments)};function lo(t,e,n){if(n||arguments.length===2)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function rd(t){return typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t==null}var zr={type:"ExpressionStatement",start:null,end:null,expression:{type:"CallExpression",start:null,end:null,expression:null,arguments:null},arguments:null},zm=function(){function t(e,n,r){r===void 0&&(r=null),this.wrapperTable=e,this.ignoredPropNames=n,this.wrapMethodParameter=r,this.verbose=!1,this.initialize()}return t.prototype.initialize=function(){var e=this,n=new bt("",function(r,i){e.globalScope=i});this.interpreter=n,this.interpreter.wrap=function(r){return e.wrap(r)},this.interpreter.unwrap=function(r,i){return e.unwrap(r,i)},this.wrappers={},Object.keys(this.wrapperTable).forEach(function(r){return e.wrapClass(e.wrapperTable[r],r)})},t.prototype.createGlobalFunction=function(e,n){var r,i=this,o=n.func,s=n.raw,a=n.isConstructor,l=n.async,u=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];var d=o(s?c:c.map(function(y,v){return v<c.length-1||!l?i.unwrap(y):y}));return s?d:i.wrap(d)};r=l?this.interpreter.createAsyncFunction(u):this.interpreter.createNativeFunction(u,a),this.interpreter.setProperty(this.globalScope,e,r)},t.prototype.createFunction=function(e,n){return n===void 0&&(n=!1),this.interpreter.createNativeFunction(e,n)},t.prototype.setProperty=function(e,n,r){this.interpreter.setProperty(e,n,this.wrap(r))},t.prototype.setRawProperty=function(e,n,r){this.interpreter.setProperty(e,n,r)},t.prototype.getProperty=function(e,n){return this.unwrap(this.interpreter.getProperty(e,n))},t.prototype.getRawProperty=function(e,n){return this.interpreter.getProperty(e,n)},t.prototype.prepareRun=function(e){var n;n=typeof e=="string"?Et(e,bt.PARSE_OPTIONS):e;var r=this.interpreter.createScope(n,this.globalScope);return this.interpreter.stateStack=[{node:n,scope:r,done:!1}],r},t.prototype.newStatementFor=function(e){return Et("new "+e+"();",bt.PARSE_OPTIONS)},t.prototype.prepareNewInstance=function(e,n){var r=this.interpreter.createScope(Et("",bt.PARSE_OPTIONS),n);return this.interpreter.stateStack=[{node:e,scope:r,thisExpression:r}],r},t.prototype.exec=function(e,n,r,i){var o=this,s=this.interpreter;zr.expression.arguments=[];var a=[];return r.forEach(function(l){zr.expression.arguments.push(null),a.push(o.wrap(l))}),s.stateStack=[{node:{type:"Program",body:[zr]},scope:this.globalScope,done:!0,n_:1},{node:zr,scope:this.globalScope,done_:!0},{node:zr.expression,doneCallee_:2,doneArgs_:!0,arguments_:a,funcThis_:e,func_:s.getProperty(e,n),scope:e,n_:a.length,value:[e,n]}],this.run(700,"call a method ("+e.className+"."+n+(i||"")+")")},t.prototype.run=function(e,n){var r=this.interpreter,i=Date.now(),o=!1;try{for(;r.step();)if(Date.now()-i>e){o=!0;break}}catch(a){throw this.verbose&&console.log(r.stateStack),typeof a=="string"&&(a=new Error(a)),r.stateStack.length>0&&(a.node=r.stateStack[r.stateStack.length-1].node),a}if(o){var s=new Error("timeout: spent too long time (> "+e+"ms) to "+n);throw r.stateStack.length>0&&(s.node=r.stateStack[0].node),s}return this.interpreter.value},t.prototype.cleanupProperties=function(e){if(!e)return null;for(var n in this.ignoredPropNames.forEach(function(r){e.properties[r]!==void 0&&delete e.properties[r]}),e.properties)this.cleanupProperty(e.properties[n])||delete e.properties[n];return e.properties},t.prototype.cleanupProperty=function(e){if(rd(e))return!0;var n=e;if(n._native)return!0;var r=this.globalScope.properties;if(n.parent===r.Array){for(var i=n.length,o=0;o<n.length;o++)this.cleanupProperty(n.properties[o])||(delete n.properties[o],i--);return n.length=i,i>0}if(n.parent===r.Object){var s=!0;for(var a in n.properties)this.cleanupProperty(n.properties[a])?s=!1:delete n.properties[a];return!s}return!1},t.prototype.restoreProperties=function(e,n){n&&(e.properties=is(is({},e.properties),n))},t.prototype.wrap=function(e){if(typeof e=="object"&&e!==null&&e.constructor!==void 0&&typeof e.constructor.className=="string"){var n=e.constructor.className,r=this.wrappers[n];if(r===void 0)return;var i=this.interpreter.createObject(r);return i._native=e,i}return this.verbose&&(rd(e)||Array.isArray(e)||console.log("wrap complex obj:",String(e))),this.interpreter.nativeToPseudo(e)},t.prototype.unwrap=function(e,n){return typeof e=="object"&&e!==null&&e._native?e._native:this.interpreter.pseudoToNative(e,n)},t.prototype.wrapClass=function(e,n){this.verbose&&console.log("--- wrapping "+n+" ---"),e.className=n;var r=this,i=this.interpreter.createNativeFunction(function(o){var s,a;if(s=r.interpreter.calledWithNew()?this:r.interpreter.createObjectProto(i.properties.prototype),o!==void 0)if(Array.isArray(o))for(var l=0;l<o.length;l++)a[l]=r.unwrap(o[l]);else a=r.unwrap(o);if(e){var u=Object.create(e.prototype),c=e.apply(u,[null].concat(a).splice(1));s._native=c!==null&&typeof c=="object"?c:u}return s});return this.interpreter.setProperty(this.globalScope,n,i),this.wrapStaticMembers(i,e),this.wrapInstanceMembers(i,e),this.wrappers[n]=i,i},t.prototype.wrapStaticMembers=function(e,n){var r=this,i=function(a){var l=a;if(o.interpreter.setProperty(e,a,ReferenceError,{get:function(){return r.wrap(n[l])},set:function(c){return n[l]=r.unwrap(c)}}),o.verbose){var u=void 0;try{u=typeof n[l]}catch{u="not accessible"}console.log("static "+l+" ("+u+")")}},o=this;for(var s in n)i(s)},t.prototype.wrapInstanceMembers=function(e,n){for(var r,i=new n,o=0,s=lo(lo([],Object.keys(i),!0),function(c){for(var p=c,d=[];p&&p.prototype;)d=lo(lo([],d,!0),Object.getOwnPropertyNames(p.prototype),!0),p=Object.getPrototypeOf(p);return d}(n),!0).filter(function(c,p,d){return d.indexOf(c)===p});o<s.length;o++){var a=s[o];if(a!=="constructor"&&!this.interpreter.hasProperty(e,a)&&!this.interpreter.hasProperty(e.properties.prototype,a)&&a.charAt(0)!=="_"){if(this.verbose){var l=void 0;try{l=typeof i[a]}catch{l="not accessible"}r=a+" ("+l+")"}try{if(typeof i[a]=="function"){var u=function(c,p){return function(d){var y;return p.wrap((y=this._native)[c].apply(y,d.map(function(v){var m=p.unwrap(v);return p.wrapMethodParameter?p.wrapMethodParameter(e,m):m})))}}(a,this);this.interpreter.setProperty(e.properties.prototype,a,this.interpreter.createNativeFunction(u)),this.verbose&&(r+=" native method")}}catch{}this.verbose&&console.log(r)}}},t}();function uo(t){var e=parseFloat(t);return isNaN(e)?0:e}function mt(t){var e;if(!(!((e=window==null?void 0:window.location)===null||e===void 0)&&e.search))return null;for(var n=0,r=window.location.search.substring(1).split("&");n<r.length;n++){var i=r[n].split("=");if(decodeURIComponent(i[0])===t)return decodeURIComponent(i[1])}return null}var Gl=function(t,e){return Gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Gl(t,e)};function Rr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Gl(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qe=function(){return qe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qe.apply(this,arguments)};function E(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(u){try{l(r.next(u))}catch(c){o(c)}}function a(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(p){p(c)})).then(s,a)}l((r=r.apply(t,e||[])).next())})}function b(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(p){c=[6,p],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function id(t,e,n){if(n||arguments.length===2)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var co,Vm=[0,0,0,0],$m=function(){function t(){this._position=0,this._wait=50,this.update=this.update.bind(this)}return Object.defineProperty(t.prototype,"wait",{get:function(){return this._wait},set:function(e){this._wait=e,this._isPlaying&&this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){if(!this.isPlaying)return this._position;var e=this.basePosition.position+(Date.now()-this.basePosition.time);return Math.min(e,this.player.video.duration)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var n=e.player,r=e.updater,i=e.emitter;return E(this,void 0,void 0,function(){return b(this,function(o){return this.player=n,this.updateMediaPosition=r,this.emitter=i,[2]})})},t.prototype.play=function(){this.start(),this.emitter.onPlay()},t.prototype.stop=function(){this.clearInterval(),this._isPlaying=!1,this.seek(0),this.pause(),this.emitter.onStop()},t.prototype.pause=function(){this.clearInterval(),this._isPlaying=!1,this.emitter.onPause()},t.prototype.seek=function(e){var n=this;this._position=e,this.updateMediaPosition(e).then(function(){n.emitter.onSeek(e),n.emitter.onSeekComplete(e)}),this.isPlaying&&this.start()},t.prototype.dispose=function(){this.clearInterval()},t.prototype.clearInterval=function(){window.clearInterval(this.intervalId)},t.prototype.start=function(){this.clearInterval(),this._isPlaying=!0,this.basePosition={time:Date.now(),position:this._position},this.intervalId=window.setInterval(this.update,this.wait)},t.prototype.update=function(){this.player.video||this.stop();var e=this.basePosition.position+(Date.now()-this.basePosition.time);this._position=Math.min(e,this.player.video.duration),this.updateMediaPosition(this.position),this._position>=this.player.video.duration&&this.stop()},t}();function Wm(){return E(this,void 0,void 0,function(){return b(this,function(t){return co&&co.Player?[2,co]:typeof window>"u"?[2,Oh(()=>import("./main-e6c42246.js").then(e=>e.m),[])]:window.Songle&&window.Songle.Player?[2,window.Songle]:[2,new Promise(function(e){var n=!1;window.onSongleAPIReady=function(r){n=!0,e(co=r)},setTimeout(function(){if(!n){var r=[];document.querySelectorAll("script").forEach(function(o){var s=o.getAttribute("src");s&&s.indexOf("songle.jp/v2/api.js")>=0&&r.push(o)}),r.forEach(function(o){return o.parentElement.removeChild(o)});var i=document.createElement("script");i.src="https://api.songle.jp/v2/api.js",document.head.appendChild(i)}},1e3)})]})})}var Gm=function(){function t(e){e===void 0&&(e={}),this.options=e,this.wait=50,this.volumeListener={onVolumeUpdate:this.onVolumeUpdate.bind(this)},this.resetProps()}return Object.defineProperty(t.prototype,"songlePlayer",{get:function(){return this._songlePlayer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return!!this._songlePlayer&&this._songlePlayer.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"withSync",{get:function(){var e,n;return!(!(!((e=this.options)===null||e===void 0)&&e.accessToken)&&!(!((n=this.options)===null||n===void 0)&&n.secretToken))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){var e;if(!this._songlePlayer)return 0;if(this.lastPosition>0&&this.lastTime>0)return Date.now()+this.lastPosition-this.lastTime;var n=this._songlePlayer.positionTime;if(((e=this._songlePlayer.media)===null||e===void 0?void 0:e.dispatcherName)==="songle-api-html-media-element-media"){var r=this.lastTime,i=this.lastPosition,o=void 0;if(r>0){var s=Date.now()-r;o=Math.max(0,this.wait-s)}else o=this.wait;i===0&&n>=500?n=0:r===0&&n-i>=800&&(n=i+o)}return n},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var n,r,i,o=e.player,s=e.updater,a=e.emitter,l=e.altSourceUrl;return E(this,void 0,void 0,function(){var u,c,p;return b(this,function(d){switch(d.label){case 0:return this.player&&this.player.removeListener(this.volumeListener),this.player=o,this.player.addListener(this.volumeListener),this.updateMediaPosition=s,this.emitter=a,this._songlePlayer?[3,2]:[4,this.initializeSonglePlayer()];case 1:d.sent(),d.label=2;case 2:return u=this.options.headless,c=l||this.options.altSourceUrls&&((n=this.player.data.song)===null||n===void 0?void 0:n.permalink)&&this.options.altSourceUrls[(r=this.player.data.song)===null||r===void 0?void 0:r.permalink]||void 0,K.isUploaderUrl(c)&&(c=K.getAltSongUrlFromUploaderGuid(K.getUploaderGuid(K.getSongPathFromUrl(c)))),(p=((i=this.player.data.song)===null||i===void 0?void 0:i.permalink)||c)===c&&(c=void 0),[4,this._songlePlayer.useMedia(p,{headless:u,altSourceUrl:c})];case 3:return d.sent(),this.ignoreSonglePlayerEvents=!0,this._songlePlayer.volume=0*(1-this.player.volume/100)+100*this.player.volume/100,this._songlePlayer.play(),this._songlePlayer.stop(),this.ignoreSonglePlayerEvents=!1,this.resetProps(),[2]}})})},t.prototype.resetProps=function(){this.lastPosition=0,this.lastTime=0,this.elapsedTimes=[]},t.prototype.initializeSonglePlayer=function(){var e;return E(this,void 0,void 0,function(){var n,r,i,o,s,a,l,u=this;return b(this,function(c){switch(c.label){case 0:return n=this.options,r=n.accessToken,i=n.secretToken,(s=this.options.songle)?[3,2]:[4,Wm()];case 1:s=c.sent(),c.label=2;case 2:return(o=s).System&&(o.System.showLicense=!1),a=(e=this.options)===null||e===void 0?void 0:e.autoUseMedia,this._songlePlayer=this.withSync?new o.SyncPlayer({mediaElement:this.player.mediaSourceElement,accessToken:r,secretToken:i,autoUseMedia:a}):new o.Player({mediaElement:this.player.mediaSourceElement}),l=!1,this._songlePlayer.on("play",function(){u.ignoreSonglePlayerEvents||(l=!1,u.handler||(u.startPolling(),u.emitter.onPlay()))}),this._songlePlayer.on("pause",function(){return E(u,void 0,void 0,function(){return b(this,function(p){switch(p.label){case 0:return this.ignoreSonglePlayerEvents?[2]:(l=!1,this.stopPolling(),this.emitter.onPause(),this.stopping?(this.stopping=!1,[4,this.updateMediaPosition(0)]):[3,2]);case 1:p.sent(),this.resetProps(),this.emitter.onStop(),p.label=2;case 2:return[2]}})})}),this._songlePlayer.on("finish",function(){return E(u,void 0,void 0,function(){return b(this,function(p){switch(p.label){case 0:return l=!1,this.handler?(this.stopPolling(),[4,this.updateMediaPosition(0)]):[3,2];case 1:p.sent(),this.emitter.onStop(),p.label=2;case 2:return[2]}})})}),this._songlePlayer.on("seek",function(p){var d=p.data;return E(u,void 0,void 0,function(){return b(this,function(y){switch(y.label){case 0:return this._songlePlayer.isPlaying?[3,2]:(l=!1,[4,this.updateMediaPosition(d.positionTime)]);case 1:return y.sent(),this.emitter.onSeekComplete(d.positionTime),[3,4];case 2:return l=!0,[4,this.updateMediaPosition(this._songlePlayer.positionTime)];case 3:y.sent(),y.label=4;case 4:return[2]}})})}),this._songlePlayer.on("mediaSeek",function(){l&&(u.emitter.onSeekComplete(u.position),l=!1)}),this.withSync&&(this._songlePlayer.on("mediaPlay",function(){u.handler||(u.startPolling(),u.emitter.onPlay())}),this._songlePlayer.on("mediaFinish",function(){u.handler&&(u.stopPolling(),u.emitter.onStop())})),[2]}})})},t.prototype.play=function(){if(this._songlePlayer)return this._songlePlayer.play();this.emitter.onPlay()},t.prototype.stop=function(){if(this._songlePlayer)return this.stopping=this._songlePlayer.isPlaying,this._songlePlayer.stop();this.emitter.onStop()},t.prototype.pause=function(){if(this._songlePlayer)return this.stopping=!1,this._songlePlayer.pause();this.emitter.onPause()},t.prototype.seek=function(e){var n=this;this._songlePlayer?(this._songlePlayer.seekTo(e),this.emitter.onSeek(e)):this.updateMediaPosition(e).then(function(){n.emitter.onSeek(e)})},t.prototype.startPolling=function(){var e,n=this;if(this.lastTime>0){var r=Date.now()-this.lastTime;e=Math.max(0,this.wait-r)}else e=this.wait;this.handler=setTimeout(function(){return E(n,void 0,void 0,function(){var i,o,s,a,l,u,c,p,d;return b(this,function(y){switch(y.label){case 0:return o=(i=this).lastTime,s=i.lastPosition,a=this._songlePlayer.positionTime,l=!1,((d=this._songlePlayer.media)===null||d===void 0?void 0:d.dispatcherName)==="songle-api-html-media-element-media"&&(s===0&&a>=500?(a=0,l=!0):o===0&&a-s>=800&&(a=s+e,l=!0)),u=o>0?Date.now()-o:e,this.updateElapsedTimes(u),c=s>0?s+u:a,p=Math.abs(a-c),(c=p>2*this.wait?a:c<=a?.5*(c+a):Math.max(s,a))<this.lastPosition&&(this.lastPosition-c>5*this.wait||(c=this.lastPosition)),l||(this.lastTime=Date.now()),this.lastPosition=c,[4,this.updateMediaPosition(c)];case 1:return y.sent(),this.handler&&this.startPolling(),[2]}})})},e)},t.prototype.updateElapsedTimes=function(e){if(this.elapsedTimes.unshift(e),this.elapsedTimes=this.elapsedTimes.slice(0,10),this.elapsedTimes.length>=10){var n=this.elapsedTimes.reduce(function(r,i){return r+i})/10;n>5*this.wait&&(this.player.stageScale=Math.max(.25,.9*this.player.stageScale),this.elapsedTimes=[]),n<1.2*this.wait&&this.player.stageScale<1&&(this.player.stageScale=Math.min(1,this.player.stageScale/.9),this.elapsedTimes=[])}},t.prototype.stopPolling=function(){var e;if(this.handler){if(clearTimeout(this.handler),this._songlePlayer)if(((e=this._songlePlayer.media)===null||e===void 0?void 0:e.dispatcherName)==="songle-api-html-media-element-media"){var n=this.lastTime,r=this.lastPosition,i=Date.now()-n;this.lastPosition=r+i}else this.lastPosition=this._songlePlayer.positionTime;this.lastTime=0}this.handler=null},t.prototype.dispose=function(){this.player&&this.player.removeListener(this.volumeListener),this._songlePlayer&&(this._songlePlayer.stop(),this._songlePlayer=null)},t.prototype.onVolumeUpdate=function(e){this._songlePlayer&&(this._songlePlayer.volume=e)},t}(),Ym=function(){function t(e){this.listeners=[],this.throttleInterval=e&&e.throttleInterval?Number(e.throttleInterval):100}return t.prototype.onVideoLoad=function(e,n){this.listeners.forEach(function(r){return r.onVideoLoad&&r.onVideoLoad(e,n)})},t.prototype.onSongLoad=function(e,n){this.listeners.forEach(function(r){return r.onSongLoad&&r.onSongLoad(e,n)})},t.prototype.onSongMapLoad=function(e,n){this.listeners.forEach(function(r){return r.onSongMapLoad&&r.onSongMapLoad(e,n)})},t.prototype.onSongInfoLoad=function(e,n){var r=!1;this.listeners.forEach(function(i){i.onSongInfoLoad&&(i.onSongInfoLoad(e,n),r=!0)}),r&&console.warn('[TextAlive API] "onSongInfoLoad" event is deprecated; use "onSongMapLoad" event instead')},t.prototype.onVocalAmplitudeLoad=function(e,n){this.listeners.forEach(function(r){return r.onVocalAmplitudeLoad&&r.onVocalAmplitudeLoad(e,n)})},t.prototype.onValenceArousalLoad=function(e,n){this.listeners.forEach(function(r){return r.onValenceArousalLoad&&r.onValenceArousalLoad(e,n)})},t.prototype.onLyricsLoad=function(e,n){this.listeners.forEach(function(r){return r.onLyricsLoad&&r.onLyricsLoad(e,n)})},t.prototype.onTextLoad=function(e,n){this.listeners.forEach(function(r){return r.onTextLoad&&r.onTextLoad(e,n)})},t.prototype.onAppLoad=function(e){this.listeners.forEach(function(n){return n.onAppLoad&&n.onAppLoad(e)})},t.prototype.onAppReady=function(e){this.listeners.forEach(function(n){return n.onAppReady&&n.onAppReady(e)})},t.prototype.onAppParameterUpdate=function(e,n){this.listeners.forEach(function(r){return r.onAppParameterUpdate&&r.onAppParameterUpdate(e,n)})},t.prototype.onAppMediaChange=function(e,n){this.listeners.forEach(function(r){return r.onAppMediaChange&&r.onAppMediaChange(e,n)})},t.prototype.onTemplateUpdate=function(e){this.listeners.forEach(function(n){return n.onTemplateUpdate&&n.onTemplateUpdate(e)})},t.prototype.onTemplateCommit=function(e){this.listeners.forEach(function(n){return n.onTemplateCommit&&n.onTemplateCommit(e)})},t.prototype.onTemplatesLoad=function(e,n){this.listeners.forEach(function(r){return r.onTemplatesLoad&&r.onTemplatesLoad(e,n)})},t.prototype.onFontsLoad=function(e,n){this.listeners.forEach(function(r){return r.onFontsLoad&&r.onFontsLoad(e,n)})},t.prototype.onVideoReady=function(e){this.listeners.forEach(function(n){return n.onVideoReady&&n.onVideoReady(e)})},t.prototype.onTimerReady=function(e){this.listeners.forEach(function(n){return n.onTimerReady&&n.onTimerReady(e)})},t.prototype.onStageElementSet=function(e){this.listeners.forEach(function(n){return n.onStageElementSet&&n.onStageElementSet(e)})},t.prototype.onMediaElementSet=function(e){this.listeners.forEach(function(n){return n.onMediaElementSet&&n.onMediaElementSet(e)})},t.prototype.onTimeUpdate=function(e){var n=this;this.listeners.forEach(function(r){return r.onTimeUpdate&&r.onTimeUpdate(e)}),this.position=e,this.throttledTimeUpdate||(this.throttledTimeUpdate=new Promise(function(r,i){setTimeout(function(){n.onThrottledTimeUpdate(n.position),n.throttledTimeUpdate=null,r()},n.throttleInterval)}))},t.prototype.onThrottledTimeUpdate=function(e){this.listeners.forEach(function(n){return n.onThrottledTimeUpdate&&n.onThrottledTimeUpdate(e)})},t.prototype.onBackgroundGraphicsUpdate=function(e){this.listeners.forEach(function(n){return n.onBackgroundGraphicsUpdate&&n.onBackgroundGraphicsUpdate(e)})},t.prototype.onMediaSeek=function(e){this.listeners.forEach(function(n){return n.onMediaSeek&&n.onMediaSeek(e)})},t.prototype.onVideoSeekStart=function(){this.listeners.forEach(function(e){return e.onVideoSeekStart&&e.onVideoSeekStart()})},t.prototype.onVideoSeekEnd=function(){this.listeners.forEach(function(e){return e.onVideoSeekEnd&&e.onVideoSeekEnd()})},t.prototype.onVideoSeek=function(e){this.listeners.forEach(function(n){return n.onVideoSeek&&n.onVideoSeek(e)})},t.prototype.onPlay=function(){this.listeners.forEach(function(e){return e.onPlay&&e.onPlay()})},t.prototype.onPause=function(){this.listeners.forEach(function(e){return e.onPause&&e.onPause()})},t.prototype.onSeek=function(e){this.listeners.forEach(function(n){return n.onSeek&&n.onSeek(e)})},t.prototype.onSeekComplete=function(e){this.listeners.forEach(function(n){return n.onSeekComplete&&n.onSeekComplete(e)})},t.prototype.onStop=function(){this.listeners.forEach(function(e){return e.onStop&&e.onStop()})},t.prototype.onDispose=function(){this.listeners.forEach(function(e){return e.onDispose&&e.onDispose()})},t.prototype.onResize=function(e){this.listeners.forEach(function(n){return n.onResize&&n.onResize(e)})},t.prototype.onVolumeUpdate=function(e){this.listeners.forEach(function(n){return n.onVolumeUpdate&&n.onVolumeUpdate(e)})},t.prototype.addListener=function(e){!e||this.listeners.indexOf(e)>=0||this.listeners.push(e)},t.prototype.removeListener=function(e){var n=!1;return this.listeners=this.listeners.filter(function(r){var i=r===e;return n=n||i,!i}),n},t}(),Hm=function(){function t(e,n,r){var i=this;this.player=e,this.manager=n,this.emitter=r,this._defaultBackgroundCss=null,this._background=null,e.addListener({onStageElementSet:function(o){return i.doUpdateBackground(i.background)}})}return Object.defineProperty(t.prototype,"background",{get:function(){return this._background},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultBackgroundCss",{get:function(){return this._defaultBackgroundCss?this._defaultBackgroundCss:""},set:function(e){this._defaultBackgroundCss=e,this.updateBackground(this._background)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._background!==null},enumerable:!1,configurable:!0}),t.prototype.settingBackground=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){switch(n.label){case 0:return[4,this.doSetBackground(e)];case 1:return[2,n.sent()&&this.doUpdateBackground(e)]}})})},t.prototype.setBackground=function(e){return E(this,void 0,void 0,function(){var n;return b(this,function(r){switch(r.label){case 0:return[4,this.doSetBackground(e)];case 1:return[2,(n=r.sent())&&this.updateBackground(n)]}})})},t.prototype.doSetBackground=function(e){return E(this,void 0,void 0,function(){var n,r,i;return b(this,function(o){switch(o.label){case 0:return n=e&&e.originalUrl?e.originalUrl:"",this.manager.isBackgroundColorAsset(e)?[2,{css:n,originalUrl:n}]:this.manager.isBackgroundPiaproImageAsset(e)?[4,this.manager.read(n)]:[3,2];case 1:return(r=o.sent())&&r.url&&this.manager.checkBackgroundImageLicense(r.license)?(r.originalUrl=n,e&&(r.x=e.x,r.y=e.y),[2,r]):[2,{css:"",originalUrl:n,x:e?e.x:void 0,y:e?e.y:void 0,license:r?r.license:void 0}];case 2:return this.manager.isBackgroundSpecialImageAsset(e)?[2,{css:'url("https://api.textalive.jp/images/backgrounds/snowmiku2016/'+(i=/^snowmiku2016-([0-9]{2})$/.exec(n))[1]+'.jpg")',contentUrl:"https://api.textalive.jp/images/backgrounds/snowmiku2016/"+i[1]+".jpg",url:"https://snowmiku.com/2016/info_chara.html",name:"SNOW MIKU 2016",authorName:"",originalUrl:n,x:e?e.x:void 0,y:e?e.y:void 0,defaultY:0}]:[2,{originalUrl:null,css:"",x:e?e.x:void 0,y:e?e.y:void 0}]}})})},t.prototype.updateBackground=function(e){return!!this.doUpdateBackground(e)&&(this.emitter&&this.emitter.onBackgroundGraphicsUpdate&&this.emitter.onBackgroundGraphicsUpdate(e),!0)},t.prototype.doUpdateBackground=function(e){if(!e)return!1;if(!this.player.stageElement)return this._background=e,!0;var n=this.player.stageElement.style;return e.css.length<=0?n.background=this.defaultBackgroundCss:n.background=e.css,typeof e.x=="number"||this._background&&typeof this._background.x=="number"?(typeof e.x!="number"&&(e.x=this._background.x),n.backgroundPositionX=n.backgroundPositionX+"%"):n.backgroundPositionX=typeof e.defaultX=="number"?e.defaultX+"%":"center",typeof e.y=="number"||this._background&&typeof this._background.y=="number"?(typeof e.y!="number"&&(e.y=this._background.y),n.backgroundPositionY=n.backgroundPositionY+"%"):n.backgroundPositionY=typeof e.defaultY=="number"?e.defaultY+"%":"center",n.backgroundSize="cover",this._background=e,!0},t.prototype.export=function(){if(!this.background||!this.background.originalUrl)return null;var e={originalUrl:this.background.originalUrl};return this.background.x!==void 0&&(e.x=this.background.x),this.background.y!==void 0&&(e.y=this.background.y),e},t.prototype.exportPartialVideoEntry=function(e){return{background:this.export()}},t}();function qm(t,e,n){return E(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,p,d,y,v,m,P;return b(this,function(h){switch(h.label){case 0:if(r={loaded:[],failed:[]},typeof window>"u"||!window.document||!window.document.head)return r.failed=t.slice(),[2,r];for(i=n.split("").filter(function(f,g,w){return w.indexOf(f)===g}).sort(),o=!0,s=0,i.forEach(function(f){var g=e.indexOf(f,s);o=o&&g>=0,s=g}),a=window.document.head,l=[],u=0;u<a.children.length;u++)(c=a.children.item(u)).tagName.toLowerCase()==="link"&&c.getAttribute("rel")==="stylesheet"&&l.push(c.getAttribute("href"));p=[],d=[],y=[],t.forEach(function(f){if(f.google)y.push(f.key);else{var g=o&&f.compactUrl||f.url;l.includes(g)||(d.push(f.en),p.push(g))}}),v={classes:!1,active:null,inactive:null,fontactive:function(f){r.loaded.push(t.find(function(g){return g.en===f})),r.failed=r.failed.filter(function(g){return g.en!==f})},fontinactive:function(f){r.failed.push(t.find(function(g){return g.en===f}))},timeout:5e3},y.length>0&&(v.google={families:y}),d.length>0&&(v.custom={families:d,urls:p}),h.label=1;case 1:return h.trys.push([1,5,,6]),(P=typeof window<"u"&&(window==null?void 0:window.WebFont))?[3,3]:[4,Oh(()=>import("./webfontloader-2a4655c2.js").then(f=>f.w),[])];case 2:P=h.sent(),h.label=3;case 3:return m=P,[4,new Promise(function(f){v.active=v.inactive=f,m.load(v)})];case 4:case 5:return h.sent(),[3,6];case 6:return[2,r]}})})}function Qm(t,e){return E(this,void 0,void 0,function(){var n,r,i,o,s,a,l,u;return b(this,function(c){switch(c.label){case 0:if(n={loaded:[],failed:[]},!(typeof window<"u"&&window.document&&window.document.head&&window.Ts&&window.Ts.loadFontAsync))return n.failed=t.slice(),[2,n];for(r=window.document.head,i={},o=function(p){var d=r.children.item(p);if(d.tagName.toLowerCase()!=="style"||d.getAttribute("type")!=="text/css"||d.getAttribute("rel")!=="stylesheet"||!d.hasAttribute("data-cssName"))return"continue";var y=d.getAttribute("data-cssName");if(i[y]===void 0)return i[y]=new Set(d.getAttribute("data-text")),{value:void 0};d.getAttribute("data-text").split("").forEach(function(v){return i[y].add(v)})},s=0;s<r.children.length;s++)if(typeof(a=o(s))=="object")return[2,a.value];return l=window.Ts,u=[],t.forEach(function(p){var d=new Set(e+p.en+p.ja);i[p.en]&&i[p.en].forEach(function(y){return d.delete(y)}),d.size<=0?n.loaded.push(p):u.push(new Promise(function(y){return function(v,m,P,h,f){var g=m.en;v.loadFontAsync({cssName:g,text:h,outputType:"json",callback:function(w){try{(function(O,x,k){var T=JSON.parse(k),H=JSON.parse(T.res),I=document.createElement("style");I.setAttribute("data-cssName",O),I.setAttribute("data-text",x),I.setAttribute("type","text/css"),I.setAttribute("rel","stylesheet"),I.innerHTML="@font-face {font-family: '"+H.fontFamily+"';font-weight: "+H["font-weight"]+";src: url(data:font/woff;base64,"+H.src+");}",document.head.appendChild(I)})(g,h,w.data),P.loaded.push(m)}catch{P.failed.push(m)}f()}})}(l,p,n,Array.from(d.values()).join(""),y)}))}),[4,Promise.all(u)];case 1:return c.sent(),[2,n]}})})}var ka=function(t){function e(n,r){var i=this.constructor,o=t.call(this,n)||this;return o.fonts=r,Object.setPrototypeOf(o,i.prototype),o}return Rr(e,t),e}(Error),Jm=function(){function t(e,n,r){this.fontInfoManager=e,this.textFetcher=n,this.listener=r,this._failed=[],this._loaded=[]}return Object.defineProperty(t.prototype,"failed",{get:function(){return this._failed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),t.prototype.loadAll=function(){return E(this,void 0,void 0,function(){var e;return b(this,function(n){switch(n.label){case 0:return[4,this.listAvailableFonts()];case 1:return e=n.sent(),[2,this.loadFonts(e)]}})})},t.prototype.loadForVideo=function(e){return E(this,void 0,void 0,function(){var n,r;return b(this,function(i){switch(i.label){case 0:return(n=this.listFontFamiliesInVideo(e))?[4,this.listAvailableFonts()]:(this.listener&&this.listener.onFontsLoad&&this.listener.onFontsLoad(this.loaded),[2,Promise.resolve(this.loaded)]);case 1:return r=i.sent(),[2,this.loadFonts(r.filter(function(o){return n.indexOf(o.en)>=0}))]}})})},t.prototype.listFontFamiliesInVideo=function(e){if(!e||!e.phrases)return null;var n=[];return e.phrases.forEach(function(r){return r.words.forEach(function(i){return i.characters.forEach(function(o){return n.push(o.fontFamily)})})}),n.filter(function(r,i,o){return o.indexOf(r)===i})},t.prototype.listAvailableFonts=function(){return E(this,void 0,void 0,function(){return b(this,function(e){return[2,this.fontInfoManager.listAvailableFonts()]})})},t.prototype.isLoading=function(){return!!this.queue},t.prototype.load=function(e){return E(this,void 0,void 0,function(){var n,r;return b(this,function(i){switch(i.label){case 0:return n=[],r=[],e.forEach(function(o){typeof o=="string"?n.push(o):r.push(o)}),[4,this.fontInfoManager.listAvailableFonts()];case 1:return i.sent().forEach(function(o){n.indexOf(o.key)>=0&&r.push(o)}),[2,this.loadFonts(r)]}})})},t.prototype.loadFonts=function(e){return E(this,void 0,void 0,function(){var n=this;return b(this,function(r){return this.queue?(this.listener&&this.listener.onFontsLoad&&this.listener.onFontsLoad(null,new ka("Failed to load some fonts because there is an ongoing font loding process",this.failed.slice())),[2,this.loaded]):(this.queue=this.doLoad(e).then(function(i){return n.queue=null,i}),[2,this.queue])})})},t.prototype.doLoad=function(e){return E(this,void 0,void 0,function(){var n,r,i,o,s=this;return b(this,function(a){switch(a.label){case 0:return n=[],r=[],[4,this.fontInfoManager.getFrequentChars()];case 1:return i=a.sent(),e.forEach(function(l){l.typesquare||l.typekit||n.push(l),l.typesquare&&r.push(l)}),o=(this.textFetcher&&this.textFetcher()||"").split("").filter(function(l,u,c){return c.indexOf(l)===u}).sort().join(""),[2,Promise.all([qm(n,i,o),Qm(r,o)]).then(function(l){var u=l[0],c=l[1],p=u.loaded.concat(c.loaded);if(s.addLoadedFonts(p),u.failed.length>0||c.failed.length>0){var d=u.failed.concat(c.failed);s.addFailedFonts(d),s.listener&&s.listener.onFontsLoad&&s.listener.onFontsLoad(null,new ka("Failed to load some fonts",s.failed.slice()))}else s.listener&&s.listener.onFontsLoad&&s.listener.onFontsLoad(p);return s.loaded}).catch(function(l){return s.listener&&s.listener.onFontsLoad&&s.listener.onFontsLoad(null,new ka(l,s.failed.slice())),s.loaded})]}})})},t.prototype.addLoadedFonts=function(e){var n=this;this._loaded=this.loaded.concat(e.filter(function(r){return n.failed.findIndex(function(i){return i.key===r.key})<0}))},t.prototype.addFailedFonts=function(e){var n=this;this._failed=this.failed.concat(e.filter(function(r){return n.failed.findIndex(function(i){return i.key===r.key})<0}))},t}(),Cs=function(){function t(){}return Object.defineProperty(t.prototype,"duration",{get:function(){return this.endTime-this.startTime},enumerable:!1,configurable:!0}),t.prototype.contains=function(e){return e>=this.startTime&&e<=this.endTime},t.prototype.overlaps=function(e,n){return this.contains(e)||this.contains(n)||this.startTime<=e&&this.endTime>=n},t.prototype.progress=function(e){return this.contains(e)?this.startTime===this.endTime?0:(e-this.startTime)/(this.endTime-this.startTime):-1},t}(),bv=function(t){function e(){var n=t.call(this)||this;return n.previous=n.next=null,n}return Rr(e,t),Object.defineProperty(e.prototype,"endTime",{get:function(){return this.next?this.next.startTime:this.startTime},enumerable:!1,configurable:!0}),e}(Cs),Xm=function(t){function e(){var n=t.call(this)||this;return n.previous=n.next=null,n}return Rr(e,t),e}(Cs),Sv=function(t){function e(){var n=t.call(this)||this;return n.previous=n.next=null,n}return Rr(e,t),e}(Cs),Km=function(t){function e(){var n=t.call(this)||this;return n.previous=n.next=null,n}return Rr(e,t),e}(Cs),Zm=function(){function t(e){var n=e.analysis,r=e.info;this.beats=[],this.chords=[],this.segments=[],this.voice=[],this._revisions={beatId:r.beatRevisionId,chordId:r.chordRevisionId,repetitiveSegmentId:r.chorusRevisionId},this.parseBeats(n.beats),this.parseSegments(n.repetitive_segment),this.parseChords(n.chords),n.voice&&this.parseVoice(n.voice)}return Object.defineProperty(t.prototype,"revisions",{get:function(){return this._revisions},enumerable:!1,configurable:!0}),t.prototype.parseBeats=function(e){var n=this;if(Array.isArray(e)&&Array.isArray(e[0])){var r=null,i=0;e[0].forEach(function(o){var s=new bv;s.startTime=1e3*o[0],s.length=o[2],s.position=o[3],s.previous=r,r!==null&&(r.next=s),s.index=i++,n.beats.push(s),r=s}),r!==null&&(r.next=null)}},t.prototype.parseChords=function(e){var n=this;if(Array.isArray(e)){var r=null,i=0;e.forEach(function(o){var s=new Xm;s.startTime=1e3*o[0],s.endTime=1e3*o[1],s.name=o[2],s.previous=r,r!==null&&(r.next=s),s.index=i++,n.chords.push(s),r=s}),r!==null&&(r.next=null)}},t.prototype.parseSegments=function(e){var n=this;Array.isArray(e)&&e.forEach(function(r){var i={chorus:!!r.chorus,duration:10*r.segment_length,segments:null},o=null,s=0;i.segments=r.start_frames.map(function(a){var l=new Sv;return l.startTime=10*a,l.endTime=l.startTime+i.duration,l.previous=o,o!==null&&(o.next=l),l.index=s++,o=l,l}),o!==null&&(o.next=null),n.segments.push(i)})},t.prototype.parseVoice=function(e){var n=this;Array.isArray(e)&&e.forEach(function(r){var i=[],o=null,s=0,a=0;r.forEach(function(l){var u=new Km;u.startTime=a,u.endTime=u.startTime+10*l[1],u.f0=l[0][0],u.initialF0=l[0][1],u.previous=o,o!==null&&(o.next=u),u.index=s++,i.push(u),o=u,a=u.endTime}),o!==null&&(o.next=null),n.voice.push(i)})},t}();function od(t,e,n){for(var r=n&&typeof e!="number"?n(e):e,i=0,o=t.length;i<o;){var s=i+o>>>1;(n?n(t[s]):t[s])<r?i=s+1:o=s}return i}var sd=function(){function t(e){var n=e.song,r=e.analysis,i=e.vocalAmplitude,o=e.maxVocalAmplitude,s=e.valenceArousal;this._song=n,this._analysis=r,this._vocalAmplitude=i,this._maxVocalAmplitude=o,this._valenceArousal=s}return Object.defineProperty(t.prototype,"song",{get:function(){return this._song},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"analysis",{get:function(){return this._analysis},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vocalAmplitude",{get:function(){return this._vocalAmplitude},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxVocalAmplitude",{get:function(){return this._maxVocalAmplitude},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valenceArousal",{get:function(){return this._valenceArousal},enumerable:!1,configurable:!0}),t.prototype.getChoruses=function(){var e;if(!this._analysis)return[];var n=this._analysis.segments.filter(function(r){return r.chorus});return n.length<=0?[]:((e=n[0].segments)===null||e===void 0?void 0:e.slice())||[]},t.prototype.findChorus=function(e,n){var r=[];if(this._analysis){var i=this._analysis.segments.filter(function(o){return o.chorus});if(i.length<=0)return null;r=i[0].segments}return Xt(r,e,n)},t.prototype.findChorusBetween=function(e,n){return this.findChorus(e,{endTime:n})},t.prototype.getBeats=function(){var e;return this._analysis&&((e=this._analysis.beats)===null||e===void 0?void 0:e.slice())||[]},t.prototype.findBeat=function(e,n){return this._analysis?Xt(this._analysis.beats,e,n):null},t.prototype.getChords=function(){var e;return this._analysis&&((e=this._analysis.chords)===null||e===void 0?void 0:e.slice())||[]},t.prototype.findChord=function(e,n){return this._analysis?Xt(this._analysis.chords,e,n):null},t.prototype.getVocalFrequency=function(e){var n;if(!Array.isArray((n=this._analysis)===null||n===void 0?void 0:n.voice))return-1;var r=this._analysis.voice[0];if(r.length<=0)return-1;var i=od(r,e,function(o){return o.endTime});return r[i].contains(e)?r[i].f0:-1},t.prototype.getVocalAmplitude=function(e){var n=this._vocalAmplitude,r=Math.round(e/10);return!Array.isArray(this._vocalAmplitude)||r<0||r>=n.length?-1:this._vocalAmplitude[r]},t.prototype.getMaxVocalAmplitude=function(){return typeof this._maxVocalAmplitude=="number"?this._maxVocalAmplitude:-1},t.prototype.getValenceArousal=function(e){var n=this._valenceArousal;if(!n)return null;var r=od(n.seq,e,function(c){return 1e3*c.t[1]});if(r<0)return{a:n.seq[0].a,v:n.seq[0].v};if(r+1>=n.seq.length||e<1e3*n.seq[r+1].t[0])return{a:n.seq[Math.min(r,n.seq.length-1)].a,v:n.seq[Math.min(r,n.seq.length-1)].v};var i=n.seq[r],o=n.seq[r+1],s=e/1e3,a=o.t[0],l=i.t[1],u=l-a;return{a:(i.a*(l-s)+o.a*(s-a))/u,v:(i.v*(l-s)+o.v*(s-a))/u}},t.prototype.getMedianValenceArousal=function(){var e=this._valenceArousal;return e?e.stats.median:null},t}(),ad=function(){function t(e,n,r){this.songManager=e,this.options=r,this.listener=n}return Object.defineProperty(t.prototype,"song",{get:function(){return this._song},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"analysis",{get:function(){return this._analysis},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vocalAmplitude",{get:function(){return this._vocalAmplitude},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxVocalAmplitude",{get:function(){return this._maxVocalAmplitude},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valenceArousal",{get:function(){return this._valenceArousal},enumerable:!1,configurable:!0}),t.prototype.loadSong=function(e,n){var r,i,o;return E(this,void 0,void 0,function(){var s,a;return b(this,function(l){switch(l.label){case 0:return typeof e=="number"&&e<0||!e?(this.onSongLoad(null,new Error("Neither Songle ID or code provided")),[2,null]):[4,this.songManager.load(typeof e=="number"?{id:e}:{code:e})];case 1:return s=l.sent(),this.onSongLoad(s,s?void 0:new Error("Song data not found")),s?(a={chord:n==null?void 0:n.chordId,beat:n==null?void 0:n.beatId,chorus:n==null?void 0:n.repetitiveSegmentId},[4,Promise.all([!((r=this.options)===null||r===void 0)&&r.vocalFrequencyEnabled?this.loadSongDetailInfo(s.song.code,{revisions:a}):this.loadSongInfo(s.song.code,{revisions:a}),!((i=this.options)===null||i===void 0)&&i.vocalAmplitudeEnabled?this.loadVocalAmplitude(s.song.code):Promise.resolve(null),!((o=this.options)===null||o===void 0)&&o.valenceArousalEnabled?this.loadValenceArousal(s.song.code):Promise.resolve(null)])]):[2,null];case 2:return l.sent(),[2,new sd(this)]}})})},t.prototype.onSongLoad=function(e,n){this._song=e,this.listener&&this.listener.onSongLoad&&this.listener.onSongLoad(e,n)},t.prototype.loadSongInfo=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,this.songManager.loadInfo(String(e),n)];case 1:return r=i.sent(),this.onSongMapLoad(r,r?void 0:new Error("Song analysis data not found")),[2,r]}})})},t.prototype.loadSongDetailInfo=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,this.songManager.loadDetailInfo(String(e),n)];case 1:return r=i.sent(),this.onSongMapLoad(r,r?void 0:new Error("Song analysis data not found")),[2,r]}})})},t.prototype.mockSongInfo=function(e){var n=function(r){for(var i=r.beat,o=r.chorusSegment,s=r.duration,a=[],l=0;60*l/i.bpm<s/1e3;)a.push([60*l/i.bpm,1,i.length,l%i.length+1,1]),l++;return{beats:[a],chords:null,repetitive_segment:[{chorus:!0,index:0,segment_length:o.duration/10,start_frames:o.startTimes.map(function(u){return u/10})}],voice:null}}(e);return this._song=null,this.onSongMapLoad({analysis:n,info:null}),new sd(this)},t.prototype.onSongMapLoad=function(e,n){var r,i;this._analysis=new Zm(e),!((r=this.listener)===null||r===void 0)&&r.onSongMapLoad&&this.listener.onSongMapLoad(this._analysis,n),!((i=this.listener)===null||i===void 0)&&i.onSongInfoLoad&&this.listener.onSongInfoLoad(e,n)},t.prototype.loadVocalAmplitude=function(e){var n;return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,this.songManager.loadVocalAmplitude(String(e))];case 1:return r._vocalAmplitude=i.sent(),this._maxVocalAmplitude=Math.max.apply(Math,this._vocalAmplitude),!((n=this.listener)===null||n===void 0)&&n.onVocalAmplitudeLoad&&this.listener.onVocalAmplitudeLoad(this._vocalAmplitude,this._vocalAmplitude?void 0:new Error("Vocal amplitude data not found")),[2,this._vocalAmplitude]}})})},t.prototype.loadValenceArousal=function(e){var n;return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,this.songManager.loadValenceArousal(String(e))];case 1:return r._valenceArousal=i.sent(),!((n=this.listener)===null||n===void 0)&&n.onValenceArousalLoad&&this.listener.onValenceArousalLoad(this._valenceArousal,this._valenceArousal?void 0:new Error("Valence arousal data not found")),[2,this._valenceArousal]}})})},t}(),e1=function(){function t(e,n,r){this.managers=e,this.listener=n,this.options=r}return t.prototype.loadRawText=function(e){var n;return n=!e.phrases||e.phrases.length<0?"":e.phrases.map(function(r){return r.words.map(function(i){return i.characters.map(function(o){return o.char}).join("")}).join("")}).join(""),this.onTextLoad({text:n}),{lyricsId:-1,lyrics:null,lyricsBody:{text:n,artist:null,name:null,url:null}}},t.prototype.loadLyrics=function(e){var n=e.songCode,r=e.lyricId,i=r===void 0?-1:r,o=e.lyricDiffId,s=o===void 0?-1:o,a=e.altLyricsUrl,l=e.directAccess;return E(this,void 0,void 0,function(){var u,c,p,d;return b(this,function(y){switch(y.label){case 0:return i<=0?(i===0?this.onLyricsLoad(null,new Error("Lyrics not loaded")):this.onLyricsLoad(null,new Error("Lyrics not found")),[2,null]):[4,this.managers.lyrics.loadDiff(n,i,s)];case 1:return(u=y.sent())!=null&&u.data?(c=qe(qe({},u),{processing:!1,failed:!1,id:i,diff:{id:s}}),this.onLyricsLoad(c),a||l?[3,3]:[4,this.managers.lyrics.fetchLocalLyricBody(i)]):(this.onLyricsLoad(null,new Error("Lyrics timing information not found")),[2,null]);case 2:p=y.sent(),y.label=3;case 3:if(p!=null&&p.text)return[3,7];y.label=4;case 4:return y.trys.push([4,6,,7]),[4,this.loadLyricsText(u,{altLyricsUrl:a,directAccess:l})];case 5:return p=y.sent(),[3,7];case 6:return d=y.sent(),this.onTextLoad(null,d),[3,7];case 7:return p&&this.onTextLoad(p),[2,{lyricsId:c.id,lyrics:c,lyricsBody:p}]}})})},t.prototype.loadLyricsText=function(e,n){var r=n===void 0?{}:n,i=r.altLyricsUrl,o=r.directAccess;return E(this,void 0,void 0,function(){var s,a,l=this;return b(this,function(u){switch(u.label){case 0:return s=this.options&&typeof this.options.lyricsFetchTimeout=="number"&&this.options.lyricsFetchTimeout>=0,a=this.managers.lyrics.fetchLyricBody(i||e.url,{parserPath:e.parser_path,directAccess:o}),[4,s?Promise.race([a,new Promise(function(c,p){return setTimeout(function(){return p(new Error("Fetching lyrics text timeout"))},l.options.lyricsFetchTimeout)})]):a];case 1:return[2,u.sent()]}})})},t.prototype.onLyricsLoad=function(e,n){this.listener&&this.listener.onLyricsLoad&&this.listener.onLyricsLoad(e,n)},t.prototype.onTextLoad=function(e,n){this.listener&&this.listener.onTextLoad&&this.listener.onTextLoad(e,n)},t}(),t1=function(){function t(e){var n=e.video;this._video=n}return Object.defineProperty(t.prototype,"video",{get:function(){return this._video},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._video.json},enumerable:!1,configurable:!0}),t}(),Yt=function(){function t(e,n){this.managers=e,this.listener=n,this.listener=n}return Object.defineProperty(t.prototype,"video",{get:function(){return this._video},enumerable:!1,configurable:!0}),t.prototype.onVideoLoad=function(e,n){var r=e?Object.assign(e,n):null;return r&&(typeof r.json=="string"?r.json=JSON.parse(r.json):typeof r.json=="object"&&r.json!==null||(r.json={}),typeof r.config=="string"?r.config=JSON.parse(r.config):typeof r.config=="object"&&r.config!==null||(r.config={})),this._video=r,this.listener&&this.listener.onVideoLoad&&this.listener.onVideoLoad(r),new t1({video:r})},t.prototype.createFromVideoId=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,this.managers.video.load(e)];case 1:return r=i.sent(),[2,this.onVideoLoad(r,n)]}})})},t.prototype.createFromVideo=function(e,n){return this.onVideoLoad(e,n)},t.prototype.createFromSongUrl=function(e,n){return E(this,void 0,void 0,function(){return b(this,function(r){return[2,this.createFromSongPath(this.managers.song.getSongPathFromUrl(e),n)]})})},t.prototype.createFromSongPath=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,this.managers.song.load({songPath:e})];case 1:return(r=i.sent())?[2,this.createFromSong(r.song,n)]:[2,null]}})})},t.prototype.createFromSongId=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,this.managers.song.load({id:e})];case 1:return(r=i.sent())?[2,this.createFromSong(r.song,n)]:[2,null]}})})},t.prototype.createFromSongCode=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,this.managers.song.load({code:e})];case 1:return(r=i.sent())?[2,this.createFromSong(r.song,n)]:[2,null]}})})},t.prototype.createFromSong=function(e,n){var r;return E(this,void 0,void 0,function(){var i,o,s,a,l,u;return b(this,function(c){switch(c.label){case 0:return i=n==null?void 0:n.lyricId,o=n==null?void 0:n.lyricDiffId,typeof i!="number"||i<0?[4,this.managers.lyrics.load(e.code)]:[3,4];case 1:return s=c.sent(),(l=s&&!s.status.failed&&!s.status.processing&&Array.isArray(s.lyrics)&&s.lyrics.length>0)?[4,this.managers.lyrics.loadDetail(e.code,s.lyrics[0].id)]:[3,3];case 2:l=c.sent(),c.label=3;case 3:(a=l)&&(i=a.id,o=(r=a.diff)===null||r===void 0?void 0:r.id),c.label=4;case 4:return typeof i!="number"&&(i=-1),typeof o!="number"&&(o=-1),u={id:-1,sourceId:-1,sourceOriginId:-1,songleId:e.id,songleCode:e.code,lyricId:i,lyricDiffId:o,title:null,log:null,background:null,config:null,json:null,synthJson:null,author:null,createdDate:null,accessCount:-1,altUrl:null},[2,this.onVideoLoad(u,n)]}})})},t.prototype.createFromText=function(e,n){return E(this,void 0,void 0,function(){var r,i,o,s,a,l;return b(this,function(u){switch(u.label){case 0:return[4,this.managers.text.parse(e)];case 1:return r=u.sent(),i=r&&r.status==="success"?this.createVideoDataFromParsedText(r,e):this.createVideoDataFromText(e),o=i[i.length-1],s=o&&o.words[o.words.length-1],a=s&&s.characters[s.characters.length-1],l=a?a.endTime:0,[2,this.createFromJSON({phrases:i,startTime:0,endTime:l,duration:l},n)]}})})},t.prototype.createFromJSON=function(e,n){var r={id:-1,sourceId:-1,sourceOriginId:-1,songleId:-1,lyricId:-1,lyricDiffId:-1,title:null,log:null,background:null,config:null,json:e,synthJson:null,author:null,createdDate:null,accessCount:-1,altUrl:null};return this.onVideoLoad(r,n)},t.prototype.createVideoDataFromParsedText=function(e,n){var r=0,i=n.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/);return e.result.map(function(o,s){return{words:o.map(function(a){return{characters:i[s].substr(a.startPosition,a.wordLength).split("").map(function(l){return{char:l,startTime:300*r,endTime:300*++r}}),pos:a.PoS,rawPoS:a.rawPoS,language:a.language}}),templates:[{type:"DefaultAlignment"}]}})},t.prototype.createVideoDataFromText=function(e){for(var n,r={characters:[]},i={words:[r],templates:[{type:"DefaultAlignment"}]},o=0,s=[i],a=0;a<e.length;a++){var l=e.charAt(a);l!==`
`?l!==" "?(n={char:l,startTime:300*o,endTime:300*++o},r.characters.push(n)):(r={characters:[]},i.words.push(r)):(i={words:[r={characters:[]}],templates:[{type:"DefaultAlignment"}]},s.push(i))}return r.characters.length<=0&&i.words.pop(),i.words.length<=0&&s.pop(),s},t}(),kt=function(){function t(e,n,r){var i=this;n===void 0&&(n=null),this.managers=e,this.listener=n,this.options=r,this.fontLoader=new Jm(e.font,function(){return i.text},n)}return Object.defineProperty(t.prototype,"permalink",{get:function(){var e;return"https://textalive.jp"+(!((e=this.song)===null||e===void 0)&&e.permalink?"/songs/"+encodeURIComponent(K.getSongPathFromUrl(this.song.permalink)):"")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){var e;return(e=this.videoProvider)===null||e===void 0?void 0:e.video},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"song",{get:function(){var e,n;return(n=(e=this.songProvider)===null||e===void 0?void 0:e.song)===null||n===void 0?void 0:n.song},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"songStatus",{get:function(){var e,n;return(n=(e=this.songProvider)===null||e===void 0?void 0:e.song)===null||n===void 0?void 0:n.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"songMap",{get:function(){var e;return(e=this.songProvider)===null||e===void 0?void 0:e.analysis},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lyricsId",{get:function(){var e,n;return(n=(e=this.textProvider)===null||e===void 0?void 0:e.lyrics)===null||n===void 0?void 0:n.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lyrics",{get:function(){var e;return(e=this.textProvider)===null||e===void 0?void 0:e.lyrics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lyricsBody",{get:function(){var e;return(e=this.textProvider)===null||e===void 0?void 0:e.lyricsBody},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){var e,n;return(n=(e=this.textProvider)===null||e===void 0?void 0:e.lyricsBody)===null||n===void 0?void 0:n.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fonts",{get:function(){return this.fontLoader},enumerable:!1,configurable:!0}),t.prototype.createFromVideoId=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,new Yt(this.managers,this.listener).createFromVideoId(e,n)];case 1:return r.videoProvider=i.sent(),[2,this.videoProvider]}})})},t.prototype.createFromVideo=function(e,n){return this.videoProvider=new Yt(this.managers,this.listener).createFromVideo(e,n),this.videoProvider},t.prototype.createFromSongUrl=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,new Yt(this.managers,this.listener).createFromSongUrl(e,n)];case 1:return r.videoProvider=i.sent(),[2,this.videoProvider]}})})},t.prototype.createFromSongPath=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,new Yt(this.managers,this.listener).createFromSongPath(e,n)];case 1:return r.videoProvider=i.sent(),[2,this.videoProvider]}})})},t.prototype.createFromSongId=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,new Yt(this.managers,this.listener).createFromSongId(e,n)];case 1:return r.videoProvider=i.sent(),[2,this.videoProvider]}})})},t.prototype.createFromSongCode=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,new Yt(this.managers,this.listener).createFromSongCode(e,n)];case 1:return r.videoProvider=i.sent(),[2,this.videoProvider]}})})},t.prototype.createFromText=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return r=this,[4,new Yt(this.managers,this.listener).createFromText(e,n)];case 1:return r.videoProvider=i.sent(),[2,this.videoProvider]}})})},t.prototype.createFromJSON=function(e,n){return this.videoProvider=new Yt(this.managers,this.listener).createFromJSON(e,n),this.videoProvider},t.prototype.finalize=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){switch(n.label){case 0:return this.video?[4,this.loadSong()]:[2,null];case 1:return n.sent(),[4,this.loadText(e)];case 2:return n.sent(),[4,this.loadFonts()];case 3:return n.sent(),[2]}})})},t.prototype.mockSongInfo=function(e){this.songProvider=new ad(this.managers.song,this.listener,this.options).mockSongInfo(e)},t.prototype.loadSong=function(){return E(this,void 0,void 0,function(){var e;return b(this,function(n){switch(n.label){case 0:return e=this,[4,new ad(this.managers.song,this.listener,this.options).loadSong(this.video.songleCode||this.video.songleId,this.video)];case 1:return e.songProvider=n.sent(),[2]}})})},t.prototype.loadText=function(e){var n,r;return E(this,void 0,void 0,function(){var i,o,s,a,l,u,c,p;return b(this,function(d){switch(d.label){case 0:return i=this.video,o=i.lyricId,s=i.lyricDiffId,a=this.song?this.song.code:null,l=new e1(this.managers,this.listener,this.options),!a&&o<0?(u=l.loadRawText((n=this.videoProvider)===null||n===void 0?void 0:n.data),[3,3]):[3,1];case 1:return c=(e==null?void 0:e.altLyricsUrl)||void 0,p=(e==null?void 0:e.lyricsDirectAccess)||void 0,[4,l.loadLyrics({songCode:a,lyricId:o,lyricDiffId:s,altLyricsUrl:c,directAccess:p})];case 2:u=d.sent(),d.label=3;case 3:return this.textProvider=u,u!=null&&u.lyrics&&(!((r=u==null?void 0:u.lyricsBody)===null||r===void 0)&&r.text)&&this.importLyrics(),[2]}})})},t.prototype.loadFonts=function(){var e,n,r;return E(this,void 0,void 0,function(){return b(this,function(i){return typeof this.video.id=="number"&&this.video.id>=0?(this.fontLoader.loadForVideo((e=this.videoProvider)===null||e===void 0?void 0:e.data),[2]):Array.isArray((n=this.options)===null||n===void 0?void 0:n.fontFamilies)?(this.fontLoader.load(this.options.fontFamilies),[2]):((r=this.options)===null||r===void 0?void 0:r.fontFamilies)===null?(this.fontLoader.loadAll(),[2]):[2]})})},t.prototype.importLyrics=function(){var e=this.text.replace(/[\s\r\n]/g,""),n=0,r={phrases:this.lyrics.data.map(function(i){return{words:i.map(function(o){return{characters:o.map(function(s){return{char:e.charAt(n++),startTime:1e3*s.start_time,endTime:1e3*s.end_time}})}})}})};this.video.json&&Array.isArray(this.video.json.phrases)?this.video.json.phrases.forEach(function(i,o){i.words.forEach(function(s,a){s.characters.forEach(function(l,u){var c=r.phrases[o].words[a].characters[u];l.char=c.char,l.startTime=c.startTime,l.endTime=c.endTime})})}):this.video.json=r},t.prototype.getChoruses=function(){var e;return(e=this.songProvider)===null||e===void 0?void 0:e.getChoruses()},t.prototype.findChorus=function(e,n){var r;return(r=this.songProvider)===null||r===void 0?void 0:r.findChorus(e,n)},t.prototype.findChorusBetween=function(e,n){var r;return(r=this.songProvider)===null||r===void 0?void 0:r.findChorusBetween(e,n)},t.prototype.getBeats=function(){var e;return(e=this.songProvider)===null||e===void 0?void 0:e.getBeats()},t.prototype.findBeat=function(e,n){var r;return(r=this.songProvider)===null||r===void 0?void 0:r.findBeat(e,n)},t.prototype.getChords=function(){var e;return(e=this.songProvider)===null||e===void 0?void 0:e.getChords()},t.prototype.findChord=function(e,n){var r;return(r=this.songProvider)===null||r===void 0?void 0:r.findChord(e,n)},t.prototype.getVocalFrequency=function(e){var n;return(n=this.songProvider)===null||n===void 0?void 0:n.getVocalFrequency(e)},t.prototype.getVocalAmplitude=function(e){var n;return(n=this.songProvider)===null||n===void 0?void 0:n.getVocalAmplitude(e)},t.prototype.getMaxVocalAmplitude=function(){var e;return(e=this.songProvider)===null||e===void 0?void 0:e.getMaxVocalAmplitude()},t.prototype.getValenceArousal=function(e){var n;return(n=this.songProvider)===null||n===void 0?void 0:n.getValenceArousal(e)},t.prototype.getMedianValenceArousal=function(){var e;return(e=this.songProvider)===null||e===void 0?void 0:e.getMedianValenceArousal()},t}(),n1=function(){function t(e,n){this.player=e,this.listener=n,this.initialize()}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options?qe({},this._options):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"author",{get:function(){return this._author},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"managed",{get:function(){return!!this._host},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"songUrl",{get:function(){return this._songUrl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"songOptions",{get:function(){return this._songOptions},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parameters",{get:function(){return this._parameters},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnecting",{get:function(){return!!this.connecting},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e,n,r,i;return E(this,void 0,void 0,function(){return b(this,function(o){switch(o.label){case 0:return this._options=(n=(e=this.player)===null||e===void 0?void 0:e.options)===null||n===void 0?void 0:n.app,this._options&&(this._options=qe({},this._options),this._name=(r=this._options)===null||r===void 0?void 0:r.appName,this._author=(i=this._options)===null||i===void 0?void 0:i.appAuthor,this._options.token&&(j.textalive.appToken=this._options.token)),this._parameters={},this.parseQueryString(),this.initializeServerConnection(),typeof window<"u"&&this._options?[4,this.connect()]:[3,2];case 1:o.sent(),this.initializePlayerListener(),this.initializeMessageListener(),o.label=2;case 2:return this._songUrl&&this.createFromSongUrl(),[2]}})})},t.prototype.initializeServerConnection=function(){var e,n,r,i,o,s;return E(this,void 0,void 0,function(){var a,l,u,c,p;return b(this,function(d){switch(d.label){case 0:return[4,J.getServerStatus()];case 1:return a=d.sent(),l=(a==null?void 0:a.lang)==="ja",j.textalive.appToken&&(a!=null&&a.app)&&(a.app.data&&(this._name=(e=a.app.data)===null||e===void 0?void 0:e.name,this._author=(r=(n=a.app)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r.author,u=(o=(i=a.app)===null||i===void 0?void 0:i.data)===null||o===void 0?void 0:o.status,this._status=typeof u=="number"?u:-1),this._server={version:a.version,message:a.app.message,error:a.app.error},!this._server.error)?(c=this._server.message?`
`+this._server.message:"",console.info(l?"[TextAlive API]  v"+j.client.version+"  v"+(this._server.version||"0.0.0")+" "+c:"[TextAlive API] App API client v"+j.client.version+" connected to server v"+(this._server.version||"0.0.0")+c),this.listener.onAppLoad(this),[2]):(p=!((s=this._server)===null||s===void 0)&&s.error?`
`+this._server.error:"",console.warn(l?"[TextAlive API]  https://developer.textalive.jp "+p:"[TextAlive API] This app requires a valid app token to run properly. You could get a token from https://developer.textalive.jp."+p),this.listener.onAppLoad(null,p),[2])}})})},t.prototype.initializePlayerListener=function(){var e=this;this.playerListener={onVideoReady:function(n){e._host&&window.parent.postMessage({kind:"ta_video",options:{lyrics:!!e.player.data.lyrics,duration:e.player.video.duration}},"*")},onThrottledTimeUpdate:function(n){e._host&&window.parent.postMessage({kind:"ta_position",options:{position:n}},"*")},onPlay:function(){e._host&&window.parent.postMessage({kind:"ta_status",options:{status:"play"}},"*")},onPause:function(){e._host&&window.parent.postMessage({kind:"ta_status",options:{status:"pause"}},"*")},onStop:function(){e._host&&window.parent.postMessage({kind:"ta_status",options:{status:"stop"}},"*")},onDispose:function(){e.dispose()}},this.player.addListener(this.playerListener)},t.prototype.initializeMessageListener=function(){var e=this;this.messageListener=function(n){if(n.data.kind&&/^ta_/.test(n.data.kind)){var r=e.player;switch(n.data.kind.substring(3)){case"status":switch(n.data.options.status){case"play":r.requestPlay();break;case"pause":r.requestPause();break;case"stop":r.requestStop()}break;case"seek":r.requestMediaSeek(n.data.options.position);break;case"parameter":var i=n.data.options,o=i.name,s=i.value;e.parameters[o]=s,e.listener.onAppParameterUpdate(o,s);break;case"media":e._songUrl=n.data.options.url,e._songOptions=n.data.options.options||{},r.requestStop();var a=e.createFromSongUrl();e.listener.onAppMediaChange(e._songUrl,a)}}},window.addEventListener("message",this.messageListener)},t.prototype.createFromSongUrl=function(){var e,n=this._songOptions;return n&&(e={video:{}},n.altLyricsUrl&&(e.altLyricsUrl=n.altLyricsUrl),n.lyricsDirectAccess&&(e.lyricsDirectAccess=n.lyricsDirectAccess),n.lyricId&&(e.video.lyricId=n.lyricId),n.lyricDiffId&&(e.video.lyricDiffId=n.lyricDiffId),n.chordId&&(e.video.chordId=n.chordId),n.beatId&&(e.video.beatId=n.beatId),n.repetitiveSegmentId&&(e.video.repetitiveSegmentId=n.repetitiveSegmentId)),this.player.createFromSongUrl(this._songUrl,e)},t.prototype.parseQueryString=function(){var e=mt("ta_app_token");e&&(j.textalive.appToken=e),this._songUrl=mt("ta_song_url"),this._songOptions={};var n=mt("ta_lyric_id");n&&(this._songOptions.lyricId=parseInt(n),isNaN(this._songOptions.lyricId)&&delete this._songOptions.lyricId);var r=mt("ta_lyric_diff_id");r&&(this._songOptions.lyricDiffId=parseInt(r),isNaN(this._songOptions.lyricDiffId)&&delete this._songOptions.lyricDiffId);var i=mt("ta_alt_lyrics_url");i&&(this._songOptions.altLyricsUrl=i);var o=mt("ta_lyrics_direct_access");o&&(this._songOptions.lyricsDirectAccess=o==="true",this._songOptions.lyricsDirectAccess||delete this._songOptions.lyricsDirectAccess);var s=mt("ta_chord_id");s&&(this._songOptions.chordId=parseInt(s),isNaN(this._songOptions.chordId)&&delete this._songOptions.chordId);var a=mt("ta_beat_id");a&&(this._songOptions.beatId=parseInt(a),isNaN(this._songOptions.beatId)&&delete this._songOptions.beatId);var l=mt("ta_repetitive_segment_id");l&&(this._songOptions.repetitiveSegmentId=parseInt(l),isNaN(this._songOptions.repetitiveSegmentId)&&delete this._songOptions.repetitiveSegmentId)},t.prototype.connect=function(){return E(this,void 0,void 0,function(){var e,n=this;return b(this,function(r){switch(r.label){case 0:return this.connecting?[2,this.connecting]:typeof window<"u"&&this.options&&window.parent&&window!==window.parent?[3,2]:[4,new Promise(function(i){return setTimeout(i,1)})];case 1:return r.sent(),this.listener.onAppReady(this),[2,!1];case 2:return this.connecting=Promise.race([new Promise(function(i){e=function(o){o.data.kind&&/^ta_/.test(o.data.kind)&&o.data.kind.substring(3)==="ack"&&(window.removeEventListener("message",e),n._host=o.data.options,i(!0))},window.addEventListener("message",e)}),E(n,void 0,void 0,function(){var i;return b(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<5?(window.parent.postMessage({kind:"ta_connect",options:this.options},"*"),[4,new Promise(function(s){return setTimeout(s,200)})]):[3,4];case 2:if(o.sent(),this._host)return[3,4];o.label=3;case 3:return i++,[3,1];case 4:return!this._host&&e&&window.removeEventListener("message",e),[2,!!this._host]}})})]),this.connecting.finally(function(){n.connecting=null,n.listener.onAppReady(n)}),[2,this.connecting]}})})},t.prototype.dispose=function(){typeof window<"u"&&this.options&&(this.player.removeListener(this.playerListener),window.removeEventListener("message",this.messageListener)),this._host=null,this.player=null},t}();function r1(t){return t}function i1(t){return t<-1?t=-1:t>1&&(t=1),function(e){return t==0?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}}function Bi(t){return function(e){return Math.pow(e,t)}}function zi(t){return function(e){return 1-Math.pow(1-e,t)}}function Vi(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}var o1=Bi(2),s1=zi(2),a1=Vi(2),l1=Bi(3),u1=zi(3),c1=Vi(3),p1=Bi(4),d1=zi(4),f1=Vi(4),h1=Bi(5),v1=zi(5),y1=Vi(5);function g1(t){return 1-Math.cos(t*Math.PI/2)}function m1(t){return Math.sin(t*Math.PI/2)}function w1(t){return-.5*(Math.cos(Math.PI*t)-1)}function Pv(t){return function(e){return e*e*((t+1)*e-t)}}var _1=Pv(1.7);function Ov(t){return function(e){return--e*e*((t+1)*e+t)+1}}var E1=Ov(1.7);function xv(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}var b1=xv(1.7);function S1(t){return-(Math.sqrt(1-t*t)-1)}function P1(t){return Math.sqrt(1- --t*t)}function O1(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function kv(t){return 1-rc(1-t)}function rc(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function x1(t){return t<.5?.5*kv(2*t):.5*rc(2*t-1)+.5}function Tv(t,e){var n=2*Math.PI;return function(r){if(r==0||r==1)return r;var i=e/n*Math.asin(1/t);return-t*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/e)}}var k1=Tv(1,.3);function Cv(t,e){var n=2*Math.PI;return function(r){if(r==0||r==1)return r;var i=e/n*Math.asin(1/t);return t*Math.pow(2,-10*r)*Math.sin((r-i)*n/e)+1}}var T1=Cv(1,.3);function Rv(t,e){var n=2*Math.PI;return function(r){var i=e/n*Math.asin(1/t);return(r*=2)<1?t*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/e)*-.5:t*Math.pow(2,-10*(r-=1))*Math.sin((r-i)*n/e)*.5+1}}var C1=Rv(1,.3*1.5),ld=Object.freeze({__proto__:null,linear:r1,get:i1,getPowIn:Bi,getPowOut:zi,getPowInOut:Vi,quadIn:o1,quadOut:s1,quadInOut:a1,cubicIn:l1,cubicOut:u1,cubicInOut:c1,quartIn:p1,quartOut:d1,quartInOut:f1,quintIn:h1,quintOut:v1,quintInOut:y1,sineIn:g1,sineOut:m1,sineInOut:w1,getBackIn:Pv,backIn:_1,getBackOut:Ov,backOut:E1,getBackInOut:xv,backInOut:b1,circIn:S1,circOut:P1,circInOut:O1,bounceIn:kv,bounceOut:rc,bounceInOut:x1,getElasticIn:Tv,elasticIn:k1,getElasticOut:Cv,elasticOut:T1,getElasticInOut:Rv,elasticInOut:C1}),R1=function(){function t(){this.cursor=-1,this.widgets=[],this.instances=[],this.model={id:-1,type:Je.NONE,sourceId:-1,author:null,originalAuthor:null,className:null,createdDate:null}}return Object.defineProperty(t.prototype,"id",{get:function(){return this.model?this.model.id:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"script",{get:function(){return this.model?this.model.script:null},enumerable:!1,configurable:!0}),t}(),N1=function(){},A1=function(){function t(e,n){this.onTemplateLoad=n,this._emitter=null,this._loaded=null,this._loading=null,this.verbose=!1,this._emitter=e,this.clear()}return Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){return this._loading},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this._loaded={},this._loading={}},t.prototype.loadLatest=function(e){return e===void 0&&(e=100),E(this,void 0,void 0,function(){var n;return b(this,function(r){switch(r.label){case 0:return[4,Qn.list({maxResults:e,withoutAuthors:!0,withoutOriginalAuthors:!0,script:!0})];case 1:return(n=r.sent())&&n.list?(this.verbose&&console.log("--- loading template classes ---"),[2,this.registerMany(n.list)]):[2]}})})},t.prototype.loadForVideo=function(e){return E(this,void 0,void 0,function(){var n,r=this;return b(this,function(i){switch(i.label){case 0:return[4,Qn.loadForVideo(e)];case 1:return(n=i.sent())&&n.list?(this.verbose&&console.log("--- loading template classes for vid:"+e+" ---"),[4,this.registerMany(n.list)]):[2,null];case 2:return[2,i.sent().map(function(o){return o?r.getByName(o):null})]}})})},t.prototype.loadByNames=function(e){return E(this,void 0,void 0,function(){var n,r=this;return b(this,function(i){switch(i.label){case 0:return!Array.isArray(e)||e.length<=0?[2,[]]:(this.verbose&&console.log("--- loading template classes ---"),[4,Promise.all(e.map(function(o){return r.doLoadByName(o)}))]);case 1:return(n=i.sent())&&this._emitter.onTemplatesLoad(n.filter(function(o){return!!o}).map(function(o){return o.className})),[2,n]}})})},t.prototype.loadByName=function(e){return E(this,void 0,void 0,function(){var n,r;return b(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.doLoadByName(e)];case 1:return n=i.sent(),this._emitter.onTemplatesLoad([n.className]),[2,n];case 2:return r=i.sent(),this._emitter.onTemplatesLoad(null,r),[2,null];case 3:return[2]}})})},t.prototype.doLoadByName=function(e){return E(this,void 0,void 0,function(){var n,r,i=this;return b(this,function(o){return(n=this.getByName(e))!==null?[2,n]:this._loading[e]?[2,this._loading[e]]:(r=new Promise(function(s){return Qn.loadByName(e).then(function(a){return i.onTemplateLoad(a)}).then(s)}),this._loading[e]=r,r.finally(function(){return delete i._loading[e]}),[2,r])})})},t.prototype.loadById=function(e){return E(this,void 0,void 0,function(){var n,r,i;return b(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.doLoadById(e)];case 1:return n=o.sent(),r=null,[3,3];case 2:return i=o.sent(),r=i,[3,3];case 3:return this._emitter.onTemplatesLoad(n?[n.className]:null,r),[2,n]}})})},t.prototype.doLoadById=function(e){return E(this,void 0,void 0,function(){var n,r,i=this;return b(this,function(o){return(n=this.getById(e))?[2,n]:this._loading[e]?[2,this._loading[e]]:(r=new Promise(function(s){return Qn.load(e).then(function(a){return i.onTemplateLoad(a)}).then(s)}),this._loading[e]=r,r.finally(function(){return delete i._loading[e]}),[2,r])})})},t.prototype.registerMany=function(e){return E(this,void 0,void 0,function(){var n,r,i=this;return b(this,function(o){switch(o.label){case 0:return n=e.map(function(s){var a=i.onTemplateLoad(s);return i._loading[s.className]=a,i._loading[s.className+"@"+s.id]=a,a}),[4,Promise.all(n.map(function(s){return s.then(function(a){return a.className}).catch(function(a){return null})}))];case 1:return r=o.sent().filter(function(s){return!!s}),this._emitter.onTemplatesLoad(r),[2,r]}})})},t.prototype.commit=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,Qn.create({sourceId:e.model.sourceId,script:e.model.script,log:n})];case 1:return(r=i.sent()).success&&(e.model.id=r.id,this._emitter.onTemplateCommit(e.className)),[2,r]}})})},t.prototype.getByName=function(e,n){var r;if(n===void 0&&(n=!1),e&&(r=e.match(/(.+)@([0-9]+)/))){e=r[1];var i=parseInt(r[2]);if(!this._loaded[e])return null;var o=this._loaded[e].model;if(o.id!==i){if(!n)return null;this.verbose&&console.log("[warning] template "+e+" version "+i+" is requested but "+o.id+" is used")}}return this._loaded[e]?this._loaded[e]:null},t.prototype.getById=function(e){var n=null;for(var r in this._loaded)if(this._loaded[r].model.id===e){n=this._loaded[r];break}return n},t}(),I1={Matrix2D:$h,Point:wm,Color:Fi,Font:Vh,RenderingUnit:Wu,TextUnit:Os,Graphic:Al,Phrase:Jn,Word:Ko,Char:Oi,Beat:bv,RepetitiveSegment:Sv},j1=["headTime","tailTime","insomnia"],ud=["animate","getAssignedUnit","name","type"],U1=function(){function t(e,n,r){this._emitter=null,this._player=null,this.interpreter=null,this.unsafeAcceleration=!1,this._verbose=!1,this.ignoreVersion=!1,this.rawConsole=!1,this._player=e,this._emitter=n,this.unsafeAcceleration=r,this.loader=new A1(n,this.register.bind(this)),e.addListener({onVideoReady:this.onVideoReady.bind(this)})}return Object.defineProperty(t.prototype,"verbose",{get:function(){return this._verbose},set:function(e){this._verbose=this.loader.verbose=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return!!this.interpreter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loaded",{get:function(){return this.loader.loaded},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;if(!this.ready){var n=function(o){var s=o.player,a=o.ignoredPropNames,l=o.rawConsole,u=o.templateGetter,c=s.graphics.wrapperTable,p=new zm(qe(qe({},I1),c),a,function(v,m){return s.graphics.isGraphics(v)&&m instanceof Fi?m.toString():m}),d={require:{func:function(v){if(!(v.length<1||typeof v[0]!="string")){var m=v[0],P=u(m);return P===null?void 0:P.functionDefinition}},raw:!0,isConstructor:!0},print:{func:function(v){s.isEditing&&console.log.apply(console,v)},raw:l},findChorus:{func:function(v){return v.length<1||typeof v[0]!="number"?null:s.findChorus(v[0])}},findBeat:{func:function(v){return v.length<1||typeof v[0]!="number"?null:s.findBeat(v[0])}},getVocalFrequency:{func:function(v){return v.length<1||typeof v[0]!="number"?null:s.getVocalFrequency(v[0])}},getVocalAmplitude:{func:function(v){return v.length<1||typeof v[0]!="number"?-1:s.getVocalAmplitude(v[0])}},getMaxVocalAmplitude:{func:function(v){return s.getMaxVocalAmplitude()}},getValenceArousal:{func:function(v){return v.length<1||typeof v[0]!="number"?null:s.getValenceArousal(v[0])}},getMedianValenceArousal:{func:function(v){return s.getMedianValenceArousal()}}};Object.keys(Je).forEach(function(v){p.setProperty(p.globalScope,v,Je[v]),d[v]={value:Je[v]}}),Object.keys(ld).forEach(function(v){var m=ld[v];v.indexOf("get")!==0&&(d[v]={func:m})});var y=Object.keys(p.wrapperTable);return y&&y.forEach(function(v){return d[v]={cls:p.wrapperTable[v]}}),Object.keys(d).forEach(function(v){var m=d[v];m.func?p.createGlobalFunction(v,m):m.value&&p.setProperty(p.globalScope,v,m.value)}),{interpreter:p,unsafeGlobalScope:d}}({player:this._player,ignoredPropNames:ud,rawConsole:this.rawConsole,templateGetter:function(o){return e.getByName(o,!0)}}),r=n.interpreter,i=n.unsafeGlobalScope;this.unsafeGlobalScope=i,this.interpreter=r,this.onVideoReady(this._player.video)}},t.prototype.getByName=function(e,n){return n===void 0&&(n=!1),this.loader.getByName(e,n)},t.prototype.getById=function(e){return this.loader.getById(e)},t.prototype.clear=function(){this.loader.clear()},t.prototype.loadLatest=function(e){return e===void 0&&(e=100),E(this,void 0,void 0,function(){return b(this,function(n){return this.ready||this.initialize(),[2,this.loader.loadLatest(e)]})})},t.prototype.loadForVideo=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){return this.ready||this.initialize(),[2,this.loader.loadForVideo(e)]})})},t.prototype.loadByNames=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){return this.ready||this.initialize(),[2,this.loader.loadByNames(e)]})})},t.prototype.loadByName=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){return this.ready||this.initialize(),[2,this.loader.loadByName(e)]})})},t.prototype.loadById=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){return this.ready||this.initialize(),[2,this.loader.loadById(e)]})})},t.prototype.commit=function(e,n){return E(this,void 0,void 0,function(){return b(this,function(r){return[2,this.loader.commit(e,n)]})})},t.prototype.register=function(e){return E(this,void 0,void 0,function(){var n,r,i,o,s,a,l,u=this;return b(this,function(c){switch(c.label){case 0:if(!e)return[2,null];if(typeof e.sourceId=="number"){if(n=e,!(r=this.createClass(e.script)))return[2,null]}else r=e;i=xa(r.ast).dependencies,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(i.map(function(p){var d=u.getByName(p,u.ignoreVersion);return d?Promise.resolve(d):u.loadByName(p)}))];case 2:return c.sent(),this.verbose&&console.log("load dependencies for",r.className,i),[3,4];case 3:return o=c.sent(),this.verbose&&console.error("failed loading dependencies for",r.className,o),[3,4];case 4:try{if(s=void 0,n?(s=this.newRawInstance(r),r.model=n):s=this.createModel(r),!s)throw new Error("failed to create a template instance");return[2,this.registerClass(r)]}catch(p){throw a=void 0,n&&(delete(l=qe({},n)).script,a=l),{error:p.message,stack:p.stack,cause:a}}return[2]}})})},t.prototype.updateClassScript=function(e,n){var r=this.createClass(n);return this.updateClass(e,r)},t.prototype.registerClass=function(e){if(!e)return null;if(this.loader.loaded[e.className]){this.verbose&&console.log("updating",e.className,e.model.id);var n=this.updateClass(this.loader.loaded[e.className],e);return this.verbose&&console.log("updated",n.className,n.id),n}return this.loader.loaded[e.className]=e,this.verbose&&console.log("loaded",e.className,e.model.id),e},t.prototype.updateClass=function(e,n){var r=e,i=n;if(!i)return null;if(r.model.script===i.model.script)return this.verbose&&console.log("no diff for",r.className),r;if(!this.createModel(i))return null;if(r.className!==i.className){var o=this.getByName(i.className);if(!o)return i.cursor=r.cursor,this.loader.loaded[i.className]=i,this.verbose&&console.log("create",i.className),i;r=o}return r.newStatement=i.newStatement,r.widgets=i.widgets,r.scope=i.scope,r.functionDefinition=i.functionDefinition,r.newStatement=i.newStatement,r.unsafeConstructorGenerator=i.unsafeConstructorGenerator,r.ast=i.ast,r.cursor<0&&(r.cursor=i.cursor),i.id>=0?(this.verbose&&console.log("replace",i.className,r.id,i.id),r.model=i.model):(this.verbose&&console.log("update",i.className,r.id,i.id),r.model.type=i.model.type,r.model.className=i.model.className,r.model.prettyName=i.model.prettyName,r.model.script=i.model.script,r.model.createdDate=null,r.id>=0&&(r.model.sourceId=r.model.id,r.model.id=-1)),i=r,this.updateInstances(r.instances.slice(),i),this._emitter.onTemplateUpdate(i.className),i},t.prototype.createModel=function(e){var n=this.newRawInstance(e);if(n===null)return!1;if(e.id>=0)return!0;var r=n.templateInstance,i=e.model.script;return e.model={id:-1,sourceId:-1,className:e.className,prettyName:r?this.interpreter.getProperty(r,"name"):n.unsafeTemplateInstance.name,type:r?this.interpreter.getProperty(r,"type"):n.unsafeTemplateInstance.type,script:i,author:null,originalAuthor:null,createdDate:null},n},t.prototype.updateInstances=function(e,n){var r=this;e.forEach(function(i){try{r.updateInstance(i,n)}catch{console.log("failed updating template for",i.assignedUnit,":",n)}}),this._player.isPlaying||this._player.requestStageUpdate()},t.prototype.createClass=function(e){var n=this;this.ready||this.initialize();var r=new R1;r.model={id:-1,sourceId:-1,className:null,prettyName:null,type:0,script:e,author:null,originalAuthor:null,createdDate:null};var i=nd(e,ud),o=i.ast,s=i.widgets;if(r.ast=o,r.widgets=s,r.className=r.ast.body[0].id.name,r.scope=this.interpreter.prepareRun(r.ast),this.interpreter.run(1e3,"to define "+r.className),r.functionDefinition=this.interpreter.getRawProperty(r.scope,r.className),r.newStatement=this.interpreter.newStatementFor(r.className),this.unsafeAcceleration){var a=Object.keys(this.unsafeGlobalScope),l="return function(props){var "+Object.keys(this.getGlobalProperties()).map(function(d){return d+"=props."+d}).join(",")+";"+e+"return "+r.className+";}",u=new(Function.bind.apply(Function,id(id([void 0],a,!1),[l],!1))),c=function(d){var y=n.getByName(d);return y?y.unsafeConstructorGenerator(n.getGlobalProperties()):null},p=a.map(function(d){if(d==="require")return c;var y=n.unsafeGlobalScope[d];return y.func?function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];return y.func(v)}:y.cls||y.value});r.unsafeConstructorGenerator=u.apply({},p)}return r},t.prototype.getGlobalProperties=function(){var e;return{width:this._player.videoWidth,height:this._player.videoHeight,margin:this._player.margin,duration:((e=this._player.video)===null||e===void 0?void 0:e.duration)||0}},t.prototype.newRawInstance=function(e){var n=e,r=new N1;if(this.unsafeAcceleration){var i=new(n.unsafeConstructorGenerator(this.getGlobalProperties()));r.unsafeTemplateInstance=i}else{this.interpreter.prepareNewInstance(n.newStatement,n.scope);var o=this.interpreter.run(700,"to instantiate "+n.className);r.templateInstance=o,r.templateInstance._nativeInstance=r}return r.templateClass=n,r.ignore=!1,r},t.prototype.setProperty=function(e,n,r){this.unsafeAcceleration?e.unsafeTemplateInstance[n]=r:this.interpreter.setProperty(e.templateInstance,n,r)},t.prototype.getProperty=function(e,n){return this.unsafeAcceleration?e.unsafeTemplateInstance[n]:this.interpreter.getProperty(e.templateInstance,n)},t.prototype.exportInstance=function(e){for(var n={},r=0,i=e.templateClass.widgets.map(function(l){return l.name}).concat(j1);r<i.length;r++){var o=i[r],s=this.getProperty(e,o);try{var a=bm(s);a!==void 0&&(n[o]=a)}catch{console.error("cannot export "+e.templateClass.className+"."+o,s,"assigned to",e.assignedUnit)}}return{type:e.templateClass.className,value:n}},t.prototype.importInstances=function(e,n){try{this.importPhraseTemplates(e.firstCredit,n.credits),this.importPhraseTemplates(e.firstPhrase,n.phrases);for(var r=n.graphics,i=e.firstGraphic,o=0;i!==null;){var s=r[o++];this.importTemplates(i,s.templates),i=i.next}}catch(a){return console.error("restoring templates failed",a),!1}return!0},t.prototype.importPhraseTemplates=function(e,n){if(Array.isArray(n))for(var r=0;e;){var i=n[r++];this.importTemplates(e,i.templates);for(var o=e.firstWord,s=0;s<e.wordCount;s++){var a=i.words[s];this.importTemplates(o,a.templates);for(var l=o.firstChar,u=0;u<o.charCount;u++){var c=a.characters[u];this.importTemplates(l,c.templates),l=l.next}o=o.next}if(n.length<r+1)break;e=e.next}},t.prototype.importTemplates=function(e,n){if(Array.isArray(n))for(var r=0,i=n;r<i.length;r++){var o=i[r],s=this.importInstance(o);s&&e.addTemplate(s)}},t.prototype.importInstance=function(e){var n=this.getByName(e.type),r=this.newInstance(n);if(!r||!e.value)return null;for(var i=0,o=Object.keys(e.value);i<o.length;i++){var s=o[i],a=Sm(e.value[s],this.interpreter.wrapperTable);a!==void 0&&this.setProperty(r,s,a)}return r},t.prototype.updateInstance=function(e,n){var r=e,i=n,o=this.newRawInstance(i),s=r.templateInstance,a=this.interpreter.cleanupProperties(s);r.templateClass!==i&&(this.disposeInstance(r),i.instances.push(r)),r.templateClass=i,r.scope=o.scope,r.templateInstance=o.templateInstance,r.ignore=o.ignore,this.interpreter.restoreProperties(r.templateInstance,a),this.attachGetAssignedUnitMethod(r)},t.prototype.newInstance=function(e){var n;try{if((n=this.newRawInstance(e))===null)return null}catch{return null}return this.attachGetAssignedUnitMethod(n),e.instances.push(n),n},t.prototype.attachGetAssignedUnitMethod=function(e){var n=this;if(this.unsafeAcceleration)e.unsafeTemplateInstance.getAssignedUnit=function(){return e.assignedUnit};else{var r=this.interpreter.createFunction(function(){return n.interpreter.wrap(e.assignedUnit)});this.interpreter.setRawProperty(e.templateInstance,"getAssignedUnit",r)}},t.prototype.disposeInstance=function(e){var n=e.templateClass;n.instances=n.instances.filter(function(r){return r!==e})},t.prototype.disposeInstances=function(e){var n=this;if(Array.isArray(e))e.forEach(function(i){return n.disposeInstance(i)});else{var r=e;[r.firstCredit,r.firstPhrase,r.firstWord,r.firstChar,r.firstGraphic].forEach(function(i){for(;i;)n.disposeInstances(i.removeTemplates()),i=i.next})}},t.prototype.setTemplate=function(e,n){this.removeTemplates(e),e.addTemplate(n)},t.prototype.clearTemplate=function(e){this.removeTemplates(e)},t.prototype.removeTemplateAt=function(e,n){var r=e.removeTemplateAt(n);r&&this.disposeInstance(r)},t.prototype.removeTemplates=function(e){var n=e.removeTemplates();this.disposeInstances(n)},t.prototype.getRequiredTemplates=function(e){return xa(e).dependencies},t.prototype.getRequiredTemplateAt=function(e,n){return xa(e,n).dependencyAtCursor},t.prototype.exec=function(e,n,r){if(e.unsafeTemplateInstance){var i=e.unsafeTemplateInstance;return i[n].apply(i,r)}var o=this.interpreter.exec(e.templateInstance,n,r,e.assignedUnit?" assigned to "+e.assignedUnit.toString():"");return this.interpreter.unwrap(o)},t.prototype.declareVariable=function(e,n,r,i){return this.updateClassScript(e,function(o,s,a,l){try{var u=nd(o),c=u.ast,p=u.fields,d=p[p.length-1],y=o.match(/(\r\n|[\n\v\f\r\x85\u2028\u2029])/),v=y?y.pop():`
`,m=o.split(v),P=d?Array(d.loc.start.column+1).join(" "):"  ",h=d?d.loc.end.line:0;if(h<=0){var f=c.body[0].body,g=m[f.loc.start.line-1],w=g.substring(0,f.loc.start.column+1),O=g.substring(f.loc.start.column+1);m[f.loc.start.line-1]=w,m.splice(f.loc.start.line,0,O),h=f.loc.start.line}for(var x=void 0;(x="var"+Math.random().toString().substring(2)).length>8&&(x=x.substring(0,8)),!(o.indexOf(x)<0););m.length>h&&m[h].length>0&&m.splice(h,0,""),m.splice(h,0,"",P+"// @proposed",P+"// @title "+s,P+"// "+function(k,T){if(k==="Slider")return"@ui Slider("+T.min+", "+T.max+")";if(k==="Check")return"@ui Check()";if(k==="Color")return"@ui Color()";var H=T.etc;return"@comment "+(H=H.replace(/(\r\n|[\n\v\f\r\x85\u2028\u2029])/g,"")).replace(/\/[*/]/g,"")}(a,l),P+"this."+x+" = "+function(k,T){return k==="Slider"?((T.min+T.max)/2).toString():k==="Check"?"false":k==="Color"?'new Color("#000000")':"null"}(a,l)+";"),o=m.join(v)}catch{}return o}(e.model.script,n,r,i))},t.prototype.onVideoReady=function(e){this.ready&&(this.interpreter.setRawProperty(this.interpreter.globalScope,"width",this._player.resolutionWidth),this.interpreter.setRawProperty(this.interpreter.globalScope,"height",this._player.resolutionHeight),this.interpreter.setRawProperty(this.interpreter.globalScope,"margin",this.interpreter.wrap(this._player.margin)),this.interpreter.setRawProperty(this.interpreter.globalScope,"duration",(e==null?void 0:e.duration)||0))},t}(),L1=function(t){function e(n,r){var i=this.constructor,o=t.call(this,n)||this;return o.video=r,Object.setPrototypeOf(o,i.prototype),o}return Rr(e,t),e}(Error),F1=function(){this.halted=[],this.errors=[]},D1=function(){function t(e,n){var r=this;this.listener=n,this.player=null,this._scale=1,this.playerListener={onResize:function(i){r.elementWidth=i.width,r.updateSize()},onVideoReady:function(){r.elementWidth=r.calcWidth(),r.updateSize()},onStageElementSet:function(i){r.elementWidth=r.calcWidth(),r.updateSize(),r.player.graphics.setCanvas(i)},onDispose:function(){r.dispose()}},this.requestedTime=0,this.request=null,this.player=e,e.addListener(this.playerListener)}return Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale=e,this.updateSize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.player.graphics.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.player.graphics.height},enumerable:!1,configurable:!0}),t.prototype.requestUpdate=function(e){return E(this,void 0,void 0,function(){var n=this;return b(this,function(r){return this.requestedTime=e===void 0?this.player.videoPosition:e,this.request||(this.request=new Promise(function(i){setTimeout(function(){try{n.update(n.requestedTime)}catch{}n.request=null,i(n.requestedTime)},0)})),[2,this.request]})})},t.prototype.update=function(e){e||(e=this.player.mediaPosition),typeof e=="number"&&(this.player.graphics.reset(),this.animate(e),this.player.graphics.update(),this.listener.onStageUpdate(e))},t.prototype.animate=function(e){for(var n=new F1,r=n.errors,i=n.halted,o=0,s=[this.player.video.firstCredit,this.player.video.firstPhrase,this.player.video.firstWord,this.player.video.firstChar,this.player.video.firstGraphic];o<s.length;o++)for(var a=s[o];a;)this.animateRenderingUnit(e,a,n),a=a.next;if(i.length>0){console.error("---");for(var l=0;l<i.length;l++)console.error("halted",i[l],r[l])}},t.prototype.animateRenderingUnit=function(e,n,r){if(n.animate)n.animate(e,n);else if(n.templateCount<=0)cd(n)&&n.getType()===Je.CHAR&&(n.rendering.visible=!1);else for(var i=0;i<n.templateCount;i++)this.animateTemplate(e,n,n.getTemplate(i),r)},t.prototype.animateTemplate=function(e,n,r,i){var o=this;if(r.ignore)n.rendering.visible=!1;else{if(n.getType()!==Je.GRAPHIC)for(var s=n.parent;s;){if(s.templateCount>0&&(!s.rendering.visible||s.rendering.alpha===0))return void(n.rendering.visible=!1);s=s.parent}var a=this.player.templates.getProperty(r,"insomnia"),l=cd(n);if(!a&&l){var u=function(c,p,d,y){var v=y&&c(y,"headTime")||500,m=y&&c(y,"tailTime")||500;return!(d.startTime-v<=p&&d.endTime+m>=p)&&(d.getType()!==Je.GRAPHIC&&(d.rendering.visible=!1),!0)}(function(c,p){return o.player.templates.getProperty(c,p)},e,n,r);if(u)return}this.doAnimateTemplate(e,r,i)}},t.prototype.doAnimateTemplate=function(e,n,r){var i=r.errors,o=r.halted;try{this.player.templates.exec(n,"animate",[e])}catch(s){i.push(s),o.push(n)}},t.prototype.calcWidth=function(){var e=this.player.stageElement;if(!e)return 0;var n=window.getComputedStyle(e);return e.offsetWidth-uo(n.borderLeftWidth)-uo(n.borderRightWidth)-uo(n.paddingLeft)-uo(n.paddingRight)},t.prototype.updateSize=function(){var e=this.player.stageElement;if(e){var n=this.elementWidth*this.player.videoProportion;if(e.style.height=n+"px",e.width=this.elementWidth*this._scale,e.height=n*this._scale,this.player.video){var r=e.width/this.player.videoWidth;this.player.graphics.updateStageTx(r,this.player.margin),this.player.isPlaying||this.requestUpdate()}}},t.prototype.dispose=function(){this.player.removeListener(this.playerListener),this.player=null},t}();function cd(t){if(t.getType()===Je.GRAPHIC)return!0;for(var e=!0,n=t.parent;n;){if(n.templateCount>0){e=!1;break}n=n.parent}return e}var M1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><style>.bg{fill:#1f4391;}.fg{fill:#fff;}</style></defs><g class="logo-sq"><rect class="bg" x="-20" y="-20" width="240" height="240"/><g class="textalive-logo-art"><path class="fg" d="M97.33,130.81V142a3,3,0,0,0,4.78,2.41l56.81-42.09a3,3,0,0,0,0-4.81l-8.33-6.14Z"/><path class="fg" d="M137.14,81.43l-35-25.84A3,3,0,0,0,97.33,58v52.92Z"/><path class="fg" d="M51,55H80.33a2,2,0,0,1,2,2V71.67a0,0,0,0,1,0,0H51a2,2,0,0,1-2-2V57A2,2,0,0,1,51,55Z"/><path class="fg" d="M44.83,107.5h56.33a2,2,0,0,1,2,2v12.67a2,2,0,0,1-2,2H44.83a0,0,0,0,1,0,0V107.5A0,0,0,0,1,44.83,107.5Z" transform="translate(189.83 41.84) rotate(90)"/></g></g></svg>',Ta="https://textalive.jp",B1=function(){function t(e){var n,r=this;if(this.player=e,this._position="embed",this._rounded=!1,this._bordered=!1,this._shadowed=!1,this._background="#fff",this._color="#1f4391",((n=e.options)===null||n===void 0?void 0:n.mediaBannerPosition)!==void 0&&(this._position=e.options.mediaBannerPosition),this.domEnabled){this.logoAnchor=document.createElement("a"),this.logoAnchor.className="textalive-logo",this.logoAnchor.innerHTML=M1,this.logoAnchor.style.padding=this.bordered?"1px 2px":"1px 3px",this.logoAnchor.href=Ta,this.logoAnchor.target="_blank",this.logoAnchor.title="Powered by TextAlive App API",this.logoSvg=this.logoAnchor.querySelector("svg"),this.logoSvg.style.width="24px",this.songNameDiv=document.createElement("div"),this.songNameDiv.className="name",this.songNameDiv.style.fontWeight="bold",this.songNameDiv.style.overflow="hidden",this.songNameDiv.style.textOverflow="ellipsis",this.songNameDiv.style.marginBottom="2px",this.songNameDiv.textContent="-",this.songArtistDiv=document.createElement("div"),this.songArtistDiv.className="artist",this.songArtistDiv.textContent="-",this.songArtistDiv.style.overflow="hidden",this.songArtistDiv.style.textOverflow="ellipsis";var i=document.createElement("span");i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><g class="song"><path d="M120.95,45.77l-59.12,13a2.57,2.57,0,0,0-2,2.51v47.8c0,13.61-12.4,23.74-24.2,23.74-8.92,0-14.82-4.23-14.82-13,0-13,12.86-21.93,23.9-21.93a16.33,16.33,0,0,1,10,3V35a2.57,2.57,0,0,1,2-2.51l69.41-15.29a2.57,2.57,0,0,1,3.13,2.51V92.84c0,13.61-12.1,23.9-24.2,23.9-8.92,0-14.82-4.24-14.82-13,0-13.16,12.86-21.93,23.9-21.93a16.31,16.31,0,0,1,10,2.87V48.29A2.57,2.57,0,0,0,120.95,45.77Z"/><path d="M35.61,134.36c-10.22,0-16.32-5.42-16.32-14.51,0-13.81,13.38-23.43,25.4-23.43a18.4,18.4,0,0,1,8.48,1.88V35a4,4,0,0,1,3.2-4l69.41-15.29a4.07,4.07,0,0,1,5,4V92.83c0,15-13.54,25.4-25.7,25.4-10.22,0-16.32-5.42-16.32-14.51,0-13.81,13.38-23.43,25.4-23.43A19,19,0,0,1,122.57,82V48.29a1.07,1.07,0,0,0-1.3-1h0l-59.12,13a1.08,1.08,0,0,0-.84,1v47.8C61.3,124,47.76,134.36,35.61,134.36Zm9.07-34.94c-10.57,0-22.4,8.74-22.4,20.43,0,10,8.35,11.51,13.32,11.51,13.38,0,22.7-11.72,22.7-22.24V61.31a4.1,4.1,0,0,1,3.2-4l59.12-13h0a4.07,4.07,0,0,1,5,4V87.56l-2.37-1.67a14.88,14.88,0,0,0-9.12-2.6c-10.59,0-22.4,8.39-22.4,20.43,0,10,8.35,11.51,13.32,11.51,10.74,0,22.7-9.2,22.7-22.4V19.72a1.07,1.07,0,0,0-1.3-1L57,34a1.07,1.07,0,0,0-.84,1v68.83l-2.37-1.67A14.87,14.87,0,0,0,44.68,99.42Z"/></g></svg>',i.style.padding="0 3px 0 0",this.songSvg=i.querySelector("svg"),this.songSvg.style.width="14px",this.songWrapper=document.createElement("div"),this.songWrapper.style.width="203px",this.songWrapper.style.maxWidth="203px",this.songWrapper.appendChild(this.songNameDiv),this.songWrapper.appendChild(this.songArtistDiv),this.songAnchor=document.createElement("a"),this.songAnchor.className="song",this.songAnchor.target="_blank",this.songAnchor.style.display="flex",this.songAnchor.style.lineHeight="1.2em",this.songAnchor.style.padding="4px 3px 3px 3px",this.songAnchor.style.textDecoration="none",this.songAnchor.appendChild(i),this.songAnchor.appendChild(this.songWrapper),this.lyricsNameDiv=document.createElement("div"),this.lyricsNameDiv.className="name",this.lyricsNameDiv.style.fontWeight="bold",this.lyricsNameDiv.textContent="-",this.lyricsNameDiv.style.overflow="hidden",this.lyricsNameDiv.style.textOverflow="ellipsis",this.lyricsNameDiv.style.marginBottom="2px",this.lyricsArtistDiv=document.createElement("div"),this.lyricsArtistDiv.className="artist",this.lyricsArtistDiv.textContent="-",this.lyricsArtistDiv.style.overflow="hidden",this.lyricsArtistDiv.style.textOverflow="ellipsis";var o=document.createElement("span");o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><g class="lyrics"><path d="M78,126.3H67.52l-6.26-23.82H24.4L18.14,126.3H7.7L35.7,22H50ZM27,92.39H58.65l-15.82-61Z"/><path d="M78,128.3H67.52a2,2,0,0,1-1.93-1.49l-5.87-22.33H25.94l-5.87,22.33a2,2,0,0,1-1.93,1.49H7.7a2,2,0,0,1-1.93-2.52l28-104.34A2,2,0,0,1,35.7,20H50a2,2,0,0,1,1.93,1.48l28,104.34A2,2,0,0,1,78,128.3Zm-8.89-4h6.29L48.43,24H37.23L10.31,124.3h6.28L22.46,102a2,2,0,0,1,1.93-1.49H61.26A2,2,0,0,1,63.2,102ZM58.65,94.39H27a2,2,0,0,1-1.94-2.5l15.82-61a2,2,0,0,1,3.87,0l15.82,61a2,2,0,0,1-1.94,2.5Zm-29.06-4H56.07L42.83,39.32Z"/><path d="M106.82,128c-17.74,0-26.43-13-26.43-36.52S89.09,55,106.82,55a21.78,21.78,0,0,1,15.83,6.43L134,56.22V112c0,5.22,1.56,8,4.7,8a7.31,7.31,0,0,0,3.65-1v6.61A17.77,17.77,0,0,1,133.6,128a9.61,9.61,0,0,1-9.74-7.65A22.4,22.4,0,0,1,106.82,128Zm0-10.09a18.15,18.15,0,0,0,16.69-10.61V75.7a18.15,18.15,0,0,0-16.69-10.61c-11.3,0-16,9.56-16,26.43S95.52,118,106.82,118Z"/><path d="M133.6,130A11.61,11.61,0,0,1,123.08,124,24.48,24.48,0,0,1,106.82,130c-13,0-28.43-6.68-28.43-38.52S93.85,53,106.82,53A23.88,23.88,0,0,1,123,59.05l10.08-4.65A2,2,0,0,1,136,56.22V112c0,4,.91,6,2.7,6a5.3,5.3,0,0,0,2.66-.78,2,2,0,0,1,3,1.74v6.61a2,2,0,0,1-1,1.74A19.64,19.64,0,0,1,133.6,130Zm-9.74-11.65a2,2,0,0,1,1.95,1.55,7.63,7.63,0,0,0,7.79,6.1,15.19,15.19,0,0,0,6.69-1.64v-2.52a8.51,8.51,0,0,1-1.65.16c-2.5,0-6.7-1.3-6.7-10V59.34l-8.46,3.91a2,2,0,0,1-2.25-.4A19.67,19.67,0,0,0,106.82,57C90.61,57,82.39,68.62,82.39,91.52S90.61,126,106.82,126a20.33,20.33,0,0,0,15.55-7A2,2,0,0,1,123.86,118.39Zm-17,1.57c-11.94,0-18-9.57-18-28.43s6.06-28.43,18-28.43a20.07,20.07,0,0,1,18.5,11.75,2,2,0,0,1,.19.86v31.65a2,2,0,0,1-.19.86A20.06,20.06,0,0,1,106.82,120Zm0-52.86c-12.55,0-14,13.94-14,24.43,0,21.9,8,24.43,14,24.43a16.13,16.13,0,0,0,14.69-9.07V76.16A16.13,16.13,0,0,0,106.82,67.09Z"/></g></svg>',o.style.padding="0 3px 0 0",this.lyricsSvg=o.querySelector("svg"),this.lyricsSvg.style.width="14px",this.lyricsWrapper=document.createElement("div"),this.lyricsWrapper.style.width="90px",this.lyricsWrapper.style.maxWidth="90px",this.lyricsWrapper.appendChild(this.lyricsNameDiv),this.lyricsWrapper.appendChild(this.lyricsArtistDiv),this.lyricsAnchor=document.createElement("a"),this.lyricsAnchor.className="lyrics",this.lyricsAnchor.target="_blank",this.lyricsAnchor.style.display="flex",this.lyricsAnchor.style.lineHeight="1.2em",this.lyricsAnchor.style.padding="4px 3px 3px 3px",this.lyricsAnchor.style.textDecoration="none",this.lyricsAnchor.appendChild(o),this.lyricsAnchor.appendChild(this.lyricsWrapper),this.bannerDiv=document.createElement("div"),this.bannerDiv.className="textalive-banner",this.bannerDiv.style.cursor="pointer",this.bannerDiv.style.zIndex="10000",this.bannerDiv.style.background="#1f4391",this.bannerDiv.style.lineHeight="0",this.bannerDiv.style.display="flex",this.bannerDiv.style.maxWidth="256px",this.bannerDiv.style.fontFamily="'Hiragino Kaku Gothic Pro','','Yu Gothic',YuGothic,Meiryo,HelveticaNeue,'Helvetica Neue',Helvetica,Arial,sans-serif",this.bannerDiv.style.fontSize="9px",this.bannerDiv.style.alignItems="center",this.bannerDiv.style.whiteSpace="nowrap",this.bannerDiv.appendChild(this.logoAnchor),this.bannerDiv.appendChild(this.songAnchor),this.bannerDiv.appendChild(this.lyricsAnchor),this.songAnchor.style.display="none",this.lyricsAnchor.style.display="none",this.updatePosition(),this.updateRounded(),this.updateBordered(),this.updateShadowed(),this.updateBackground(),this.updateColor()}this.listener={onAppReady:function(){r.updatePosition()},onMediaElementSet:function(s){r.domEnabled&&(r.bannerDiv&&r.bannerDiv.parentElement&&r.bannerDiv.parentElement.removeChild(r.bannerDiv),r.player.mediaBannerElement&&r.player.mediaBannerElement.appendChild(r.bannerDiv))},onVideoLoad:function(){r.domEnabled&&(r.logoAnchor.href=Ta,r.songAnchor.style.display="none",r.lyricsAnchor.style.display="none",r.songAnchor.style.borderRadius="0")},onSongLoad:function(s){return E(r,void 0,void 0,function(){var a,l,u,c,p,d,y,v,m;return b(this,function(P){switch(P.label){case 0:return s?(a=(y=(d=s==null?void 0:s.song)===null||d===void 0?void 0:d.artist)===null||y===void 0?void 0:y.name,l=(v=s==null?void 0:s.song)===null||v===void 0?void 0:v.name,u=(m=s==null?void 0:s.song)===null||m===void 0?void 0:m.permalink,c=Ta+(u?"/songs/"+encodeURIComponent(K.getSongPathFromUrl(u)):""),this.domEnabled&&(this.logoAnchor.href=c,this.songArtistDiv.textContent=ce(a),this.songNameDiv.textContent=ce(l),this.songAnchor.title=ce(l)+" by "+ce(a),this.songAnchor.href=u,this.songAnchor.style.display="flex",this.songAnchor.style.borderRadius=this.rounded?"0 4px 4px 0":"0",this.songWrapper.style.width="auto"),[4,J.getServerStatus()]):[2];case 1:return((p=P.sent())==null?void 0:p.lang)==="ja"?console.warn("[TextAlive API]  :",ce(a),"/ :",ce(l),"/ :",ce(u)):console.warn("[TextAlive API] Song artist:",ce(a),"/ song name:",ce(l),"/ distributed at:",ce(u)),[2]}})})},onLyricsLoad:function(s){s&&(r.songWrapper.style.maxWidth="90px",r.lyricsAnchor.style.display="flex",r.songAnchor.style.borderRadius="0")},onTextLoad:function(s){return E(r,void 0,void 0,function(){var a,l,u,c,p;return b(this,function(d){switch(d.label){case 0:return s?(a=(p=s==null?void 0:s.artist)===null||p===void 0?void 0:p.name,l=s==null?void 0:s.name,u=s==null?void 0:s.url,this.domEnabled&&(this.lyricsArtistDiv.textContent=ce(a),this.lyricsNameDiv.textContent=ce(l),this.lyricsAnchor.title=ce(l)+" by "+ce(a),this.lyricsAnchor.href=u,this.lyricsWrapper.style.width="auto"),[4,J.getServerStatus()]):[2];case 1:return((c=d.sent())==null?void 0:c.lang)==="ja"?console.warn("[TextAlive API]  :",ce(a),"/ :",ce(l),"/ :",ce(u)):console.warn("[TextAlive API] Song lyrics artist:",ce(a),"/ lyrics name:",ce(l),"/ distributed at:",ce(u)),[2]}})})},onDispose:function(){this.dispose()}},e.addListener(this.listener),e.mediaBannerElement&&this.player.mediaBannerElement.appendChild(this.bannerDiv)}return Object.defineProperty(t.prototype,"domEnabled",{get:function(){return typeof window<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,this.updatePosition()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rounded",{get:function(){return this._rounded},set:function(e){this._rounded=e,this.updateRounded()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bordered",{get:function(){return this._bordered},set:function(e){this._bordered=e,this.updateBordered()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowed",{get:function(){return this._shadowed},set:function(e){this._shadowed=e,this.updateShadowed()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background=e,this.updateBackground()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this.updateColor()},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.player.removeListener(this.listener)},t.prototype.updatePosition=function(){var e,n;if(this.domEnabled){var r=this.position,i=this.player;if(r===null||!(!((e=i.options)===null||e===void 0)&&e.app)||!((n=i.app)===null||n===void 0)&&n.managed)this.bannerDiv.style.display="none";else if(this.bannerDiv.style.display="flex",r==="embed")this.bannerDiv.style.position="initial",this.bannerDiv.style.marginTop="4px",this.songAnchor.style.flexGrow="1",this.lyricsAnchor.style.flexGrow="1";else{this.bannerDiv.style.position="fixed",this.bannerDiv.style.marginTop="0";var o=r.indexOf("top")>=0,s=r.indexOf("right")>=0,a=r.indexOf("bottom")>=0,l=r.indexOf("left")>=0;this.bannerDiv.style.top=o?"4px":"initial",this.bannerDiv.style.right=s?"4px":"initial",this.bannerDiv.style.bottom=a?"4px":"initial",this.bannerDiv.style.left=l?"4px":"initial",this.songAnchor.style.flexGrow="0",this.lyricsAnchor.style.flexGrow="0"}}},t.prototype.updateRounded=function(){if(this.domEnabled){var e=this.rounded;this.logoSvg.style.borderRadius=e?"4px 0 0 4px":"0",this.lyricsAnchor.style.borderRadius=e?"0 4px 4px 0":"0",this.bannerDiv.style.borderRadius=e?"4px":"0"}},t.prototype.updateBordered=function(){if(this.domEnabled){var e=this.bordered;this.logoAnchor.style.padding=e?"1px 2px":"1px 3px",this.bannerDiv.style.border=e?"1px solid rgba(31, 67, 145, 0.3)":"none"}},t.prototype.updateShadowed=function(){if(this.domEnabled){var e=this.shadowed;this.bannerDiv.style.boxShadow=e?"1px 1px 3px 0 rgba(9, 19, 42, 0.9)":"none"}},t.prototype.updateBackground=function(){this.domEnabled&&(this.songAnchor.style.background=this.background,this.lyricsAnchor.style.background=this.background)},t.prototype.updateColor=function(){this.domEnabled&&(this.songSvg.style.fill=this.color,this.songAnchor.style.color=this.color,this.lyricsSvg.style.fill=this.color,this.lyricsAnchor.style.color=this.color)},t}();function ce(t){return t&&t!==""?t:"-"}function z1(t,e){var n=e.parser;return E(this,void 0,void 0,function(){var r,i,o;return b(this,function(s){switch(s.label){case 0:return t&&t.length>0&&t[0].words&&t[0].words.length>0&&t[0].words[0]&&!t[0].words[0].pos?(r=t.map(function(a){return a.words.map(function(l){return l.characters.map(function(u){return u.char}).join("")}).join(" ")}),i=r.join(`
`),[4,n(i)]):[2];case 1:return(o=s.sent())&&o.status==="success"?(t.forEach(function(a,l){var u=o.result[l],c=0;a.words.forEach(function(p){var d=p.characters.map(function(m){return m.char}).join(""),y=r[l].indexOf(d,c);if(!(y<0)){c=y;var v=u.find(function(m){return m.startPosition<=y&&m.endPosition>=y});v&&(p.pos=v.PoS,p.rawPoS=v.rawPoS,p.language=v.language)}})}),[2]):[2]}})})}function Ca(t){for(;t.firstElementChild;)t.removeChild(t.firstElementChild)}function V1(t,e){var n=e.id,r=e.data,i=e.loader,o=e.deserializer;return E(this,void 0,void 0,function(){return b(this,function(s){switch(s.label){case 0:return n&&n>=0?[4,i(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return o(t,r),[2]}})})}function pd(t){return typeof t!="string"?t:typeof window>"u"?null:document.querySelector(t)}var $1=function(){function t(e){this._mediaPosition=0,this._videoPosition=0,this.isEditing=!1,this._isVideoSeeking=!1,this._volume=100,this._options=e,this.emitter=new Ym(e),this._templates=new U1(this,this.emitter,e&&e.unsafeAcceleration);var n=Object.assign({},vm);e&&e.managers&&(n=Object.assign(n,e.managers)),this.managers=n,this._timer=e&&e.timer||this.createDefaultTimer(),this._data=new kt(n,this.emitter,e),this._backgroundGraphics=new Hm(this,n.asset,this.emitter),this._graphics=e&&e.graphics||this.createDefaultGraphicsDriver(),this.stage=new D1(this,{onStageUpdate:this.onStageUpdate.bind(this)}),this._banner=new B1(this),this.stageElement=pd(e==null?void 0:e.stageElement)||null,this.mediaElement=pd(e==null?void 0:e.mediaElement)||null,this._app=new n1(this,this.emitter)}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options?qe({},this._options):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundGraphics",{get:function(){return this._backgroundGraphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){return this._video},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templates",{get:function(){return this._templates},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this._graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stageElement",{get:function(){return this._stageElement},set:function(e){this._stageElement=e,this.emitter.onStageElementSet(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stageScale",{get:function(){return this.stage.scale},set:function(e){this.stage.scale=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mediaElement",{get:function(){return this._mediaElement},set:function(e){this.updateMediaElement(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mediaSourceElement",{get:function(){return this._mediaSourceElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mediaBannerElement",{get:function(){return this._mediaBannerElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mediaPosition",{get:function(){return this._mediaPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoPosition",{get:function(){return this._videoPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wait",{get:function(){return this._timer?this._timer.wait:0},set:function(e){this._timer&&(this._timer.wait=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fps",{get:function(){return 1e3/this.wait},set:function(e){this.wait=1e3/e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolutionWidth",{get:function(){var e,n,r,i;return typeof((n=(e=this._data)===null||e===void 0?void 0:e.video)===null||n===void 0?void 0:n.config)=="object"&&typeof this._data.video.config.width=="number"?this._data.video.config.width:typeof((i=(r=this._options)===null||r===void 0?void 0:r.defaultVideoSize)===null||i===void 0?void 0:i.width)=="number"?this._options.defaultVideoSize.width:1280},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolutionHeight",{get:function(){var e,n,r,i;return typeof((n=(e=this._data)===null||e===void 0?void 0:e.video)===null||n===void 0?void 0:n.config)=="object"&&typeof this._data.video.config.height=="number"?this._data.video.config.height:typeof((i=(r=this._options)===null||r===void 0?void 0:r.defaultVideoSize)===null||i===void 0?void 0:i.height)=="number"?this._options.defaultVideoSize.height:720},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolutionProportion",{get:function(){return this.resolutionHeight/this.resolutionWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"margin",{get:function(){var e,n,r,i;return typeof((n=(e=this._data)===null||e===void 0?void 0:e.video)===null||n===void 0?void 0:n.config)=="object"&&this._data.video.config.margin?this._data.video.config.margin:((i=(r=this._options)===null||r===void 0?void 0:r.defaultVideoSize)===null||i===void 0?void 0:i.margin)||Vm},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){var e=this.resolutionWidth,n=this.margin;return e+n[1]+n[3]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){var e=this.resolutionHeight,n=this.margin;return e+n[0]+n[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoProportion",{get:function(){return this.videoHeight/this.videoWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this.stage.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this.stage.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return!!this._videoPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return!!this._timer&&this._timer.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVideoSeeking",{get:function(){return this._isVideoSeeking},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"banner",{get:function(){return this._banner},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timer",{get:function(){return this._timer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(e){isNaN(e)||(this._volume=Math.min(100,Math.max(0,e)),this.emitter.onVolumeUpdate(this._volume))},enumerable:!1,configurable:!0}),t.prototype.createDefaultTimer=function(){try{if(typeof window<"u"&&mt("ta_timer")!=="basic")return new Gm}catch{}return new $m},t.prototype.createDefaultGraphicsDriver=function(){return new Em},t.prototype.addListener=function(e){return this.emitter.addListener(e)},t.prototype.removeListener=function(e){return this.emitter.removeListener(e)},t.prototype.createFromVideoId=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromVideoId(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromVideoId=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,(r=new kt(this.managers,this.emitter,this._options)).createFromVideoId(e,n==null?void 0:n.video)];case 1:return i.sent(),[2,this.finalize(r,n)]}})})},t.prototype.createFromVideo=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromVideo(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromVideo=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){return(r=new kt(this.managers,this.emitter,this._options)).createFromVideo(e,n==null?void 0:n.video),[2,this.finalize(r,n)]})})},t.prototype.createFromSongUrl=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromSongUrl(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromSongUrl=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,(r=new kt(this.managers,this.emitter,this._options)).createFromSongUrl(e,n==null?void 0:n.video)];case 1:return i.sent(),[2,this.finalize(r,n)]}})})},t.prototype.createFromSongPath=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromSongPath(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromSongPath=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,(r=new kt(this.managers,this.emitter,this._options)).createFromSongPath(e,n==null?void 0:n.video)];case 1:return i.sent(),[2,this.finalize(r,n)]}})})},t.prototype.createFromSongId=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromSongId(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromSongId=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,(r=new kt(this.managers,this.emitter,this._options)).createFromSongId(e,n==null?void 0:n.video)];case 1:return i.sent(),[2,this.finalize(r,n)]}})})},t.prototype.createFromSongCode=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromSongCode(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromSongCode=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,(r=new kt(this.managers,this.emitter,this._options)).createFromSongCode(e,n==null?void 0:n.video)];case 1:return i.sent(),[2,this.finalize(r,n)]}})})},t.prototype.createFromText=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromText(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromText=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){switch(i.label){case 0:return[4,(r=new kt(this.managers,this.emitter,this._options)).createFromText(e,n==null?void 0:n.video)];case 1:return i.sent(),[2,this.finalize(r,n)]}})})},t.prototype.createFromJSON=function(e,n){return E(this,void 0,void 0,function(){var r=this;return b(this,function(i){return[2,this.create(function(){return r.doCreateFromJSON(e,n)},n==null?void 0:n.dryRun)]})})},t.prototype.doCreateFromJSON=function(e,n){return E(this,void 0,void 0,function(){var r;return b(this,function(i){return(r=new kt(this.managers,this.emitter,this._options)).createFromJSON(e,n==null?void 0:n.video),[2,this.finalize(r,n)]})})},t.prototype.create=function(e,n){return E(this,void 0,void 0,function(){var r,i=this;return b(this,function(o){if(this._videoPromise&&!n)throw new L1("Player.createFrom* method calls cannot run in parallel",this._videoPromise);return r=e(),n||(this._videoPromise=r,r.finally(function(){return i._videoPromise=null})),[2,r]})})},t.prototype.finalize=function(e,n){return E(this,void 0,void 0,function(){var r,i,o,s=this;return b(this,function(a){switch(a.label){case 0:return e.video?[4,Promise.all([e.finalize(n),this.backgroundGraphics.setBackground(e.video.background)])]:[2,null];case 1:return a.sent(),n!=null&&n.dryRun?[2,null]:(r=e.video.json,function(l,u){var c=u.config,p=u.song;c&&typeof c=="object"&&typeof c.duration=="number"?l.duration=c.duration:p?l.duration=1e3*p.length:l.duration||(l.duration=l.endTime)}(i=new mm(r),{config:e.video.config,song:e.song}),[4,Promise.all([this.graphics.createRuntime(i),V1(i,{id:e.video.id,data:r,loader:function(l){return E(s,void 0,void 0,function(){return b(this,function(u){switch(u.label){case 0:return[4,this.templates.loadForVideo(l)];case 1:return u.sent(),[2]}})})},deserializer:function(l,u){return s.templates.importInstances(l,u)}}),z1(r==null?void 0:r.phrases,{parser:Rl.parse.bind(Rl)})])]);case 2:return a.sent(),this._data,this._video&&this.templates.disposeInstances(this._video),this._data=e,this._video=i,this.emitter.onVideoReady(i),o=(n==null?void 0:n.altSourceUrl)||void 0,[4,this._timer.initialize({player:this,updater:this.updateMediaPosition.bind(this),emitter:this.emitter,altSourceUrl:o})];case 3:return a.sent(),this.emitter.onTimerReady(this._timer),[2,i]}})})},t.prototype.updateMediaPosition=function(e){return E(this,void 0,void 0,function(){var n=this;return b(this,function(r){return this._isVideoSeeking?(this._mediaPosition=e,this.emitter.onMediaSeek(e),[2,e]):[2,this.stage.requestUpdate(e).then(function(i){return n._mediaPosition=i,n._videoPosition=i,n.emitter.onMediaSeek(i),i})]})})},t.prototype.exportVideo=function(e){return e===void 0&&(e={legacyStringMode:!0}),E(this,void 0,void 0,function(){var n,r,i,o;return b(this,function(s){return n={sourceId:this._data.video.id,sourceOriginId:this._data.video.sourceOriginId,songleId:this._data.song.id,lyricId:this._data.lyricsId,lyricDiffId:this._data.lyrics?this._data.lyrics.id:-1,config:(e!=null&&e.legacyStringMode?this._data.video.config&&JSON.stringify(this._data.video.config):this._data.video.config)||null},r=this.backgroundGraphics.exportPartialVideoEntry(e),i=this._video.exportData(this._templates),o=e!=null&&e.legacyStringMode?JSON.stringify(i):i,[2,qe(qe(qe({},n),r),{json:o})]})})},t.prototype.getChoruses=function(){return this._data.getChoruses()},t.prototype.findChorus=function(e,n){return this._data.findChorus(e,n)},t.prototype.findChorusBetween=function(e,n){return this._data.findChorusBetween(e,n)},t.prototype.getBeats=function(){return this._data.getBeats()},t.prototype.findBeat=function(e,n){return this._data.findBeat(e,n)},t.prototype.getChords=function(){return this._data.getChords()},t.prototype.findChord=function(e,n){return this._data.findChord(e,n)},t.prototype.getVocalFrequency=function(e){return this._data.getVocalFrequency(e)},t.prototype.getVocalAmplitude=function(e){return this._data.getVocalAmplitude(e)},t.prototype.getMaxVocalAmplitude=function(){return this._data.getMaxVocalAmplitude()},t.prototype.getValenceArousal=function(e){return this._data.getValenceArousal(e)},t.prototype.getMedianValenceArousal=function(){return this._data.getMedianValenceArousal()},t.prototype.resize=function(e){return this.emitter.onResize(e)},t.prototype.onResize=function(e){return this.resize(e)},t.prototype.setStageElement=function(e){return this._stageElement=e,this.emitter.onStageElementSet(e)},t.prototype.setMediaElement=function(e){this.mediaElement=e},t.prototype.updateMediaElement=function(e){typeof document<"u"&&(this._mediaElement&&Ca(this._mediaElement),e?(Ca(e),this._mediaSourceElement||(this._mediaSourceElement=document.createElement("div"),this._mediaSourceElement.classList.add("textalive-media-wrapper")),e.appendChild(this._mediaSourceElement),this._mediaBannerElement||(this._mediaBannerElement=document.createElement("div"),this._mediaSourceElement.classList.add("textalive-banner-wrapper")),e.appendChild(this._mediaBannerElement)):(this._mediaSourceElement=null,this._mediaBannerElement=null)),this._mediaElement=e,this.emitter.onMediaElementSet(e)},t.prototype.setVideoPosition=function(e){return E(this,void 0,void 0,function(){var n=this;return b(this,function(r){return[2,this.stage.requestUpdate(e).then(function(i){return n._videoPosition=i,n.emitter.onVideoSeek(i),i})]})})},t.prototype.setMediaPosition=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){return this.requestMediaSeek(e),[2]})})},t.prototype.requestPlay=function(){return this._timer.play(),!0},t.prototype.requestStop=function(){return this._timer.stop(),!0},t.prototype.requestPause=function(){return this._timer.pause(),!0},t.prototype.requestMediaSeek=function(e){return this._timer.seek(e),!0},t.prototype.startVideoSeek=function(){return this._isVideoSeeking=!0,this.emitter.onVideoSeekStart()},t.prototype.endVideoSeek=function(){return this._isVideoSeeking=!1,this.emitter.onVideoSeekEnd()},t.prototype.requestSettingBackground=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){return[2,this.backgroundGraphics.settingBackground(e)]})})},t.prototype.requestSetBackground=function(e){return E(this,void 0,void 0,function(){return b(this,function(n){return[2,this.backgroundGraphics.setBackground(e)]})})},t.prototype.requestStageUpdate=function(){return E(this,void 0,void 0,function(){return b(this,function(e){return[2,this.stage.requestUpdate()]})})},t.prototype.onStageUpdate=function(e){this._isVideoSeeking||this.emitter.onTimeUpdate(e)},t.prototype.dispose=function(){this._timer&&(this._timer.dispose(),this._timer=null),this.mediaElement&&(Ca(this._mediaElement),this._mediaElement=null),this.stageElement&&(this._stageElement=null),this.emitter.onDispose()},t}();console.log(`# 





TextAlive App API
TextAlive App API TextAlive https://textalive.jp/  https://developer.textalive.jp/ 

# 

textalive-ml@aist.go.jp`);Pi.exports.sortedIndex;const W1=["kingjack","","","","","Entrust via 39"],Ci={kingjack:{songUrl:"https://piapro.jp/t/ucgN/20230110005414",songUrlOptions:{video:{beatId:4267297,chordId:2405019,repetitiveSegmentId:2475577,lyricId:56092,lyricDiffId:9636}},lyricsReading:[" ","  ","  ","  "," ","    ","OK"," ","  ","     "," ","  ","   "," ","KING QUEEN JACK  ","","","  ",""," SHOWDOWN"," "," "," ","  ","  ","  "," UP DOWN","","  ","   "," ","   DON'T STOP"," ","WANNA BE   ","  ","   ","   ","KING QUEEN JACK  ",""," ","  ","","DON'T LET ME DOWN","  "," ","   ","  ","  ","1 2 3 4 5 6 7 8 9 10 AND","",""," ","    ","KING QUEEN JACK  ","","","  ",""," SHOWDOWN","  "," "," ","  ","  ","1 2 3 4 5 6 7 8 9 10 AND"],character:"Miku"},:{songUrl:"https://piapro.jp/t/fnhJ/20230131212038",songUrlOptions:{video:{beatId:4267300,chordId:2405033,repetitiveSegmentId:2475606,lyricId:56131,lyricDiffId:9638}},lyricsReading:["   ","  ","  ","  ","   ","  "," "," ","   ","   "," ","  "," ","  ","   ","","   ","   ","    "," ","     "," ","   "," "," "," ","   ","   "," "],character:"Miku"},:{songUrl:"https://piapro.jp/t/Vfrl/20230120182855",songUrlOptions:{video:{beatId:4267334,chordId:2405059,repetitiveSegmentId:2475645,lyricId:56095,lyricDiffId:9637}},lyricsReading:["  ","   "," "," "," "," ","",""," "," ","  "," "," ","  ","  "," ","  ","0  ","  "," "," "," "," ","  "," ","  ","  ","  ","  ","1  ","  ","   ","   ","  "," "," ","  "],character:"KAITO"},:{songUrl:"https://piapro.jp/t/fyxI/20230203003935",songUrlOptions:{video:{beatId:4267373,chordId:2405138,repetitiveSegmentId:2475664,lyricId:56096,lyricDiffId:9639}},lyricsReading:[" "," ","  "," "," ","","  "," ","  ","  "," "," ","  ","  ","  ","  ","  "," "," "," "," "," "," ","   "," ","  ","  "," ","  ","  ","  ","  "," "," ","  "," ","  ","  "," ","  ","   "],character:"Miku"},:{songUrl:"https://piapro.jp/t/Wk83/20230203141007",songUrlOptions:{video:{beatId:4267381,chordId:2405285,repetitiveSegmentId:2475676,lyricId:56097,lyricDiffId:9640}},lyricsReading:[" ","  "," ","  "," ",""," ","  ","  "," ","  "," ","  "," "," "," ","  "," ","",""," "," ",""," ","","  ","  "," ","  "," "," "," "," "," ","  "," ",""],character:"Miku"},"Entrust via 39":{songUrl:"https://piapro.jp/t/Ya0_/20230201235034",songUrlOptions:{video:{beatId:4269734,chordId:2405723,repetitiveSegmentId:2475686,lyricId:56098,lyricDiffId:9643}},lyricsReading:[" 5","  ","  ","  "," ","   "," ","   ","   ","   ","ENTRUST VIA 39 "," ","   ","   ","  ","  "," ","   ","  ","    ","ENTRUST VIA 39 ","  ","    ","  ","   ","  ","  ","   ","   ","   ","   ","ENTRUST VIA 39 ","   "," "],character:"Miku"}},G1="/magicalmirai2023-procon/assets/logo-f6b2ba8c.svg";var Nv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dd=en.createContext&&en.createContext(Nv),pn=globalThis&&globalThis.__assign||function(){return pn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pn.apply(this,arguments)},Y1=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Av(t){return t&&t.map(function(e,n){return en.createElement(e.tag,pn({key:n},e.attr),Av(e.child))})}function Wn(t){return function(e){return en.createElement(H1,pn({attr:pn({},t.attr)},e),Av(t.child))}}function H1(t){var e=function(n){var r=t.attr,i=t.size,o=t.title,s=Y1(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),en.createElement("svg",pn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:pn(pn({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&en.createElement("title",null,o),t.children)};return dd!==void 0?en.createElement(dd.Consumer,null,function(n){return e(n)}):e(Nv)}function q1(t){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}}]})(t)}function Q1(t){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}}]})(t)}function J1(t){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(t)}function X1(t){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}}]})(t)}function K1(t){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}}]})(t)}function Z1(t){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 7v4L2 6l6-5v4h5a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H8z"}}]}]})(t)}const ew=["",""],Ra={:"A",:"I",:"U",:"E",:"O",:"KA",:"KI",:"KU",:"KE",:"KO",:"SA",:{:"SHI",:"SI"},:"SU",:"SE",:"SO",:"TA",:{:"CHI",:"TI"},:{:"TSU",:"TU"},:"TE",:"TO",:"NA",:"NI",:"NU",:"NE",:"NO",:"HA",:"HI",:{:"FU",:"HU"},:"HE",:"HO",:"MA",:"MI",:"MU",:"ME",:"MO",:"YA",:"YU",:"YO",:"RA",:"RI",:"RU",:"RE",:"RO",:"WA",:"WI",:"WE",:"WO",:"NN",:"GA",:"GI",:"GU",:"GE",:"GO",:"ZA",:{:"JI",:"ZI"},:"ZU",:"ZE",:"ZO",:"DA",:{:"JI",:"DI"},:{:"ZU",:"DU"},:"DE",:"DO",:"BA",:"BI",:"BU",:"BE",:"BO",:"PA",:"PI",:"PU",:"PE",:"PO",:"YE",:"WI",:"WE",:"KYA",:"KYI",:"KYU",:"KYE",:"KYO",:"QA",:"QI",:"QE",:"QO",:"QYA",:"QYU",:"QYO",:{:"SHA",:"SYA"},:"SYI",:{:"SHU",:"SYU"},:"SYE",:{:"SHO",:"SYO"},:{:"CHA",:"TYA"},:"TYI",:{:"CHU",:"TYU"},:"TYE",:{:"CHO",:"TYO"},:"THA",:"THI",:"THU",:"THE",:"THO",:"NYA",:"NYI",:"NYU",:"NYE",:"NYO",:"HYA",:"HYI",:"HYU",:"HYE",:"HYO",:"FA",:"FI",:"FE",:"FO",:"MYA",:"MYI",:"MYU",:"MYE",:"MYO",:"VA",:"VI",:"VU",:"VE",:"VO",:"GYA",:"GYI",:"GYU",:"GYE",:"GYO",:{:"JA",:"ZYA"},:"ZYI",:{:"JU",:"ZYU"},:"ZYE",:{:"JO",:"ZYO"},:"DYA",:"DYI",:"DYU",:"DYE",:"DYO",:"BYA",:"BYI",:"BYU",:"BYE",:"BYO",:"PYA",:"PYI",:"PYU",:"PYE",:"PYO",:"-"},tw=(t,e)=>{let n=-1,r="";for(;n<t.length;){let i=t.charAt(n+1),o=!1;if(n+=1,!i.match(/^([\u3040-\u309F]|)$/)){r+=i.toUpperCase();continue}i===""&&(o=!0,i=t.charAt(n+1),n+=1),t.charAt(n+1).match(/^[]$/)&&(i+=t.charAt(n+1),n+=1);let s="";typeof Ra[i]=="string"?s=Ra[i]:s=Ra[i][e],o&&(r+=s.charAt(0)),r+=s}return r};function nw(t){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(t)}function Iv(){return F(nw,{className:"loading"})}function rw({songName:t,isSuccess:e}){return D.useMemo(()=>Ci[t].character,[t]),F(Jl,{children:e})}function iw({songName:t,player:e,position:n,isFail:r,setIsFail:i}){const[o,s]=D.useState("running"),[a,l]=D.useState("b"),[u,c]=D.useState();return D.useMemo(()=>Ci[t].character,[t]),D.useEffect(()=>{r&&(s("fail"),c(n),i(!1))},[r]),D.useEffect(()=>{u&&n-u>700&&(c(void 0),s("running"))},[n]),D.useEffect(()=>{const p=e.findBeat(n);if(!p)return;const d=Math.max(1,Math.round(p.duration/1e3)),y=p.duration/d;(n-p.startTime)%y<y/2?a==="b"?l("c"):a==="d"&&l("a"):a==="a"?l("b"):a==="c"&&l("d")},[e,n]),F(Jl,{children:`${o}: ${a}`})}function ow({position:t,nowPhrase:e}){const n=D.useMemo(()=>e?e.endTime-e.startTime:0,[e]),r=D.useMemo(()=>!e||n===0?1:(e.endTime-t)/n,[e,n,t]);return e?F("div",{className:"timer-container",children:F("div",{className:"rest-time-bar",style:{width:`${r*100}%`}})}):null}function sw({songName:t,player:e,position:n,lyricsReadingRoman:r,onSuccess:i}){const[o,s]=D.useState(),[a,l]=D.useState(),[u,c]=D.useState(""),p=D.useRef(-1),[d,y]=D.useState(-1),[v,m]=D.useState(!1);D.useEffect(()=>{o&&o.endTime<n&&(s(void 0),c("")),a&&a.startTime<=n&&(p.current+=1,c(r[p.current]),s(a),l(a.next),y(-1))},[n]),D.useEffect(()=>{y(-1),p.current=-1,c(""),s(void 0),l(e.video.firstPhrase)},[t]);const P=D.useCallback(h=>{h.repeat||d+1>=u.length||h.key!=="Shift"&&(h.key.toUpperCase()===u.charAt(d+1)?(y(f=>f+2<u.length&&u.charAt(f+2)===" "?f+2:f+1),i()):m(!0))},[u,d]);return D.useEffect(()=>(document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)),[P]),je("div",{className:"game-area",children:[F("div",{className:"character-area",children:F(iw,{songName:t,player:e,position:n,isFail:v,setIsFail:m})}),je("div",{children:[F(ow,{position:n,nowPhrase:o}),F("div",{className:"now-phrase",children:o?o.text:""}),F("div",{className:"now-phrase-reading",children:u.split("").map((h,f)=>F("span",{className:f<=d?"is-passed":"",style:h===" "?{width:16}:void 0,children:h},f))})]}),je("div",{className:"next-phrase-area",children:[F("span",{className:"next-text",children:"NEXT: "}),F("span",{className:"next-phrase",children:a?a.text:""})]})]})}function aw({songName:t,player:e,position:n,romanType:r,onPlay:i,onStop:o,isVideoReady:s,isTimerReady:a}){const l=D.useMemo(()=>Ci[t].lyricsReading.map(v=>tw(v,r)),[t,r]),[u,c]=D.useState(0),p=D.useMemo(()=>{let v=0;return l.forEach(m=>v+=m.replaceAll(" ","").length),v},[t,l]),d=D.useMemo(()=>p===0?0:u/p,[u,p]);D.useEffect(()=>{c(0)},[t]);const y=D.useCallback(v=>{if(!v.repeat&&s&&a&&!e.isPlaying){(v.key==="Enter"||v.key===" ")&&i();return}},[s,a,e]);return D.useEffect(()=>(document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)),[y]),!s||!a?F(Iv,{}):e.isPlaying?je("div",{className:"game-container",children:[F("button",{className:"stop-button",onClick:o,children:F(Z1,{})}),n<e.getBeats().splice(-1)[0].endTime?F(sw,{player:e,position:n,songName:t,lyricsReadingRoman:l,onSuccess:()=>c(v=>v+1)}):je("div",{className:"game-finish-area",children:[F("div",{className:"finish-character-area",children:F(rw,{songName:t,isSuccess:d>=.8})}),F("div",{className:"result-text",children:d>=.8?"SUCCESS!":"FAIL..."})]}),je("div",{className:"score-area",children:[F("div",{className:"score-title",children:"Score"}),F("div",{className:"score-content",children:`${u} / ${p}`})]})]}):je("div",{className:"play-waiting-area",children:[F(Q1,{className:"play-button",onClick:i}),F("div",{className:"description",children:"Press Enter or Space"})]})}function fd({type:t,text:e,onClick:n}){return F("button",{onClick:n,className:`button ${t}`,children:e})}function lw({title:t,show:e,children:n,onClose:r,onConfirm:i}){return e?F("div",{onClick:r,className:"dialog-wrapper",children:je("div",{onClick:o=>o.stopPropagation(),className:"dialog",children:[je("div",{className:"header",children:[t,F(J1,{onClick:r,className:"close-button"})]}),n,je("div",{className:"footer",children:[F(fd,{type:"normal",text:"Cancel",onClick:r}),F(fd,{type:"primary",text:"OK",onClick:i})]})]})}):null}function uw({name:t,value:e,selectable:n,onChange:r}){return F("div",{className:"selection-container",children:n.map(i=>je("label",{className:"radio-button-container",children:[F("input",{type:"radio",name:t,value:i,checked:i===e,onChange:o=>r(o.target.value),style:{display:"none"}}),i===e?F(X1,{className:"radio-button checked"}):F(K1,{className:"radio-button unchecked"}),F("span",{className:"radio-button-label",children:i})]},i))})}function cw({romanType:t,onChangeRomanType:e,onSelect:n}){const[r,i]=D.useState(t),[o,s]=D.useState(!1),a=D.useCallback(()=>{s(!1),i(t)},[t]),l=D.useCallback(()=>{e(r),s(!1)},[r]);return je(Jl,{children:[je("div",{className:"song-select-container",children:[F("button",{onClick:()=>s(!0),className:"setting-button",children:F(q1,{})}),je("div",{children:[F("div",{className:"title",children:"Select Song"}),F("ul",{className:"selection",children:W1.map(u=>F("li",{onClick:()=>n(u),children:u},u))})]}),F("div",{className:"caption-container",children:F("div",{className:"caption",children:"()UTAWO UTAOU"})})]}),F(lw,{title:"",show:o,onClose:a,onConfirm:l,children:F(uw,{name:"roman-select",value:r,selectable:ew,onChange:u=>i(u)})})]})}function pw(){const[t,e]=D.useState(),[n,r]=D.useState(),[i,o]=D.useState(""),[s,a]=D.useState(""),[l,u]=D.useState(!1),[c,p]=D.useState(!1),[d,y]=D.useState(-1),[v,m]=D.useState(null),P=D.useMemo(()=>F("div",{className:"media",ref:m}),[]);D.useEffect(()=>{if(typeof window>"u"||!v)return;const w=new $1({app:{token:"T1eQwHaxqMeDptHe"},mediaElement:v}),O={onAppReady:x=>{r(x)},onVideoReady:()=>{u(!0)},onTimerReady:()=>{p(!0)},onTimeUpdate:x=>{y(x)}};return w.addListener(O),e(w),()=>{w.removeListener(O),w.dispose()}},[v]);const h=D.useCallback(w=>{t&&(t.createFromSongUrl(Ci[w].songUrl,Ci[w].songUrlOptions),o(w))},[t]),f=D.useCallback(()=>{t&&t.requestPlay()},[t]),g=D.useCallback(()=>{t&&(t.requestStop(),u(!1),p(!1),o(""),y(-1))},[t]);return je("div",{className:"app",children:[F("img",{src:G1,className:"logo"}),t?i===""?F(cw,{romanType:s,onChangeRomanType:a,onSelect:h}):F(aw,{songName:i,player:t,position:d,romanType:s,onPlay:f,onStop:g,isVideoReady:l,isTimerReady:c}):F(Iv,{}),P]})}Ph(document.getElementById("root")).render(F(en.StrictMode,{children:F(pw,{})}));export{dw as c};
