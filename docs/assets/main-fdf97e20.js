import{c as Z}from"./index-b5cecb50.js";function oe(V,Y){for(var H=0;H<Y.length;H++){const x=Y[H];if(typeof x!="string"&&!Array.isArray(x)){for(const u in x)if(u!=="default"&&!(u in V)){const I=Object.getOwnPropertyDescriptor(x,u);I&&Object.defineProperty(V,u,I.get?I:{enumerable:!0,get:()=>x[u]})}}}return Object.freeze(Object.defineProperty(V,Symbol.toStringTag,{value:"Module"}))}var $={},ue={get exports(){return $},set exports(V){$=V}},ee={},se={get exports(){return ee},set exports(V){ee=V}};(function(V,Y){(function(H,x){V.exports=x()})(Z,function(){return function(H){var x={};function u(I){if(x[I])return x[I].exports;var k=x[I]={i:I,l:!1,exports:{}};return H[I].call(k.exports,k,k.exports,u),k.l=!0,k.exports}return u.m=H,u.c=x,u.d=function(I,k,P){u.o(I,k)||Object.defineProperty(I,k,{enumerable:!0,get:P})},u.r=function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},u.t=function(I,k){if(1&k&&(I=u(I)),8&k||4&k&&typeof I=="object"&&I&&I.__esModule)return I;var P=Object.create(null);if(u.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:I}),2&k&&typeof I!="string")for(var S in I)u.d(P,S,function(p){return I[p]}.bind(null,S));return P},u.n=function(I){var k=I&&I.__esModule?function(){return I.default}:function(){return I};return u.d(k,"a",k),k},u.o=function(I,k){return Object.prototype.hasOwnProperty.call(I,k)},u.p="/packs/",u(u.s=411)}({1:function(H,x,u){u.r(x),function(I){var k=u(8),P={};(function(S){Object.defineProperties(P,{currentClockTime:{configurable:!0,get:function(){return Date.now()}},defaultAppServerProtocol:{configurable:!0,get:function(){return P.__defaultAppServerProtocol__||"https:"},set:function(p){P.__defaultAppServerProtocol__=p}},defaultAppServerHost:{configurable:!0,get:function(){return P.__defaultAppServerHost__||"api.songle.jp"},set:function(p){P.__defaultAppServerHost__=p}},defaultAppServerEndpoint:{configurable:!0,get:function(){return P.defaultAppServerProtocol+"//"+P.defaultAppServerHost}},defaultLogServerProtocol:{configurable:!0,get:function(){return P.__defaultLogServerProtocol__||"https:"},set:function(p){P.__defaultLogServerProtocol__=p}},defaultLogServerHost:{configurable:!0,get:function(){return P.__defaultLogServerHost__||"log.songle.jp"},set:function(p){P.__defaultLogServerHost__=p}},defaultLogServerEndpoint:{configurable:!0,get:function(){return P.defaultLogServerProtocol+"//"+P.defaultLogServerHost}},defaultWebsocketServerProtocol:{configurable:!0,get:function(){return P.__defaultWebsocketServerProtocol__||"wss:"},set:function(p){P.__defaultWebsocketServerProtocol__=p}},defaultWebsocketServerHost:{configurable:!0,get:function(){return P.__defaultWebsocketServerHost__||"api.songle.jp"},set:function(p){P.__defaultWebsocketServerHost__=p}},defaultWebsocketServerEndpoint:{configurable:!0,get:function(){return P.defaultWebsocketServerProtocol+"//"+P.defaultWebsocketServerHost}},global:{configurable:!0,get:function(){return S}},isStandalone:{configurable:!0,get:function(){return!S.document}},isWebBrowser:{configurable:!0,get:function(){return!!S.document}},language:{configurable:!0,get:function(){var p=window.navigator.languages&&window.navigator.languages[0]||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage;switch(!0){case/en/.test(p.toLowerCase()):return"en";case/ja/.test(p.toLowerCase()):return"ja";default:return"en"}}},referer:{configurable:!0,get:function(){return P.isStandalone?"-":S.document.referrer}},userAgent:{configurable:!0,get:function(){return P.isStandalone?"-":S.navigator.appCodeName+"/"+navigator.appVersion}},userAgentIsLaptop:{configurable:!0,get:function(){return!P.userAgentIsAndroid&&!P.userAgentIsiOS}},userAgentIsMobile:{configurable:!0,get:function(){return P.userAgentIsAndroid||P.userAgentIsiOS}},userAgentIsAndroid:{configurable:!0,get:function(){return P.userAgent.toLowerCase().indexOf("android")!=-1||P.userAgent.toLowerCase().indexOf("linux")!=-1}},userAgentIsiOS:{configurable:!0,get:function(){return P.userAgent.toLowerCase().indexOf("iphone")!=-1||P.userAgent.toLowerCase().indexOf("ipad")!=-1||P.userAgent.toLowerCase().indexOf("ipod")!=-1}},searchQueries:{configurable:!0,get:function(){var p={};return location.search.slice(location.search.indexOf("?")+1).split("&").forEach(function(O){var h=O.match(/(.+?)=(.+)/);if(h){var c=h[1],e=h[2];p[c]=e&&decodeURIComponent(e)}}),p}},showDebugLog:{configurable:!0,get:function(){return!!P.__showDebugLog__},set:function(p){P.__showDebugLog__=!!p}},showErrorLog:{configurable:!0,get:function(){return!!P.__showErrorLog__},set:function(p){P.__showErrorLog__=!!p}},showLicense:{configurable:!0,get:function(){return!!P.__showLicense__},set:function(p){P.__showLicense__=!!p,p?(k.default.removeLicense(),k.default.createLicense(p)):(k.default.removeLicense(),console.log(`# ライセンス表記に関するガイドライン

国立研究開発法人産業技術総合研究所
情報技術研究部門
メディアインタラクション研究グループ

Songle APIは非商用利用に限り、どなたでも無料・無保証で利用することができます。
ただし、原則としてSongle APIを利用している旨を https://api.songle.jp/ にハイパーリンクした上で、利用しているシステムもしくは外部サイト等に表示する必要があります。

# お問い合わせ

songle-ml@aist.go.jp`))}}}),P.stringIsBlank=function(p){return p==""||p==null},P.typeOf=function(p){if(p!=null)switch(typeof p){case"object":return p.length!=null?"array":"object";case"number":return"number";case"string":return"string"}return"null"},S.__sw__=P})(0 .self||I),x.default=P}.call(this,u(17))},100:function(H,x,u){u.r(x);var I=u(21),k=u(30),P=u(2),S=u(37),p=u(1);function O(t,r,s){return(O=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(l,v,b){var d=function(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=g(n))!==null;);return n}(l,v);if(d){var y=Object.getOwnPropertyDescriptor(d,v);return y.get?y.get.call(b):y.value}})(t,r,s||t)}function h(t,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function c(t,r,s){return r&&h(t.prototype,r),s&&h(t,s),t}function e(t,r){return(e=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(t,r)}function f(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var s,l=g(t);if(r){var v=g(this).constructor;s=Reflect.construct(l,arguments,v)}else s=l.apply(this,arguments);return _(this,s)}}function _(t,r){return!r||typeof r!="object"&&typeof r!="function"?function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(t):r}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var a="songle-api-plugin-songle-widget",o=function(t){(function(l,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(v&&v.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),v&&e(l,v)})(s,t);var r=f(s);function s(l){var v;return function(b,d){if(!(b instanceof d))throw new TypeError("Cannot call a class as a function")}(this,s),(v=r.call(this)).__element__=l.element,v.__responsive__=l.responsive!=null&&l.responsive,v.__showController__=l.showController==null||l.showController,v.__showOriginalSiteLink__=l.showOriginalSiteLink==null||l.showOriginalSiteLink,v.__showMusicMap__=l.showMusicMap==null||l.showMusicMap,v.__showSongleJpSiteLink__=l.showSongleJpSiteLink==null||l.showSongleJpSiteLink,v.__controllerWidth__=l.controllerWidth!=null?l.controllerWidth:256,v.__controllerHeight__=l.controllerHeight!=null?l.controllerHeight:30,v.__controllerMouseEnterColor__=l.controllerMouseEnterColor!=null?l.controllerMouseEnterColor:"#e17",v.__controllerMouseLeaveColor__=l.controllerMouseLeaveColor!=null?l.controllerMouseLeaveColor:"#222",v.__language__=l.language!=null?l.language:p.default.language,v.__musicMapWidth__=l.musicMapWidth!=null?l.musicMapWidth:256,v.__musicMapHeight__=l.musicMapHeight!=null?l.musicMapHeight:40,v.__musicMapOuterBackgroundColor__=l.musicMapOuterBackgroundColor!=null?l.musicMapOuterBackgroundColor:"#999",v.__musicMapInnerBackgroundColor__=l.musicMapInnerBackgroundColor!=null?l.musicMapInnerBackgroundColor:"#eee",v.__musicMapChorusSectionColor__=l.musicMapChorusSectionColor!=null?l.musicMapChorusSectionColor:"#f84",v.__musicMapRepeatedSectionColor__=l.musicMapRepeatedSectionColor!=null?l.musicMapRepeatedSectionColor:"#48f",v.__musicMapCursorColor__=l.musicMapCursorColor!=null?l.musicMapCursorColor:"#e17",v.__className__="".concat(a,"-").concat(Math.random().toString(36).slice(-4)),v.__readyTrap__=function(b){return v.render()},v.__playTrap__=function(b){},v.__pauseTrap__=function(b){},v.__seekTrap__=function(b){},v.__resizeTrap__=function(b){v.__responsive__&&v.render()},v.__scrollTrap__=function(b){v.__responsive__&&v.render()},v.__responsive__&&v.element!=null&&(l.width=v.element.offsetWidth,l.height=v.element.offsetHeight),v.__updateSize__(l),v}return c(s,null,[{key:"Name",get:function(){return a}}]),c(s,[{key:"initialize",value:function(l){O(g(s.prototype),"initialize",this).call(this,l),this.player.on("ready",this.__readyTrap__),this.player.on("play",this.__playTrap__),this.player.on("pause",this.__pauseTrap__),this.player.on("seek",this.__seekTrap__),window.addEventListener("resize",this.__resizeTrap__,!1),window.addEventListener("scroll",this.__scrollTrap__,!1)}},{key:"dispose",value:function(){O(g(s.prototype),"dispose",this).call(this),clearInterval(this.__musicMapAnimationIntervalId__),window.removeEventListener("resize",this.__resizeTrap__,!1),window.removeEventListener("scroll",this.__scrollTrap__,!1),this.player.off("ready",this.__readyTrap__),this.player.off("play",this.__playTrap__),this.player.off("pause",this.__pauseTrap__),this.player.off("seek",this.__seekTrap__),this.__removeRenderedElement__()}},{key:"render",value:function(){this.element!=null&&this.__responsive__&&this.__updateSize__({width:this.element.offsetWidth,height:this.element.offsetHeight});var l=document.createElement("div");clearInterval(this.__musicMapAnimationIntervalId__),l.className=this.__className__,l.style.lineHeight="normal",l.style.fontSize="10.5px",this.__showController__&&l.appendChild(this.__createControllerElement__({width:this.__controllerWidth__,height:this.__controllerHeight__,mouseEnterColor:this.__controllerMouseEnterColor__,mouseLeaveColor:this.__controllerMouseLeaveColor__})),this.__showOriginalSiteLink__&&l.appendChild(this.__createOriginalSiteLinkElement__({width:this.__musicMapWidth__,height:15})),this.__showMusicMap__&&l.appendChild(this.__createMusicMapElement__({width:this.__musicMapWidth__,height:this.__musicMapHeight__})),this.__showSongleJpSiteLink__&&l.appendChild(this.__createSongleJpSiteLinkElement__({width:this.__musicMapWidth__,height:15})),this.__removeRenderedElement__(),this.element&&this.element.appendChild(l)}},{key:"__removeRenderedElement__",value:function(){document.querySelectorAll("[class=".concat(this.__className__,"]")).forEach(function(l){l.remove()})}},{key:"__createControllerElement__",value:function(l){var v=document.createElement("div");v.style.display="block",v.style.overflow="hidden",v.style.width=l.width+"px",v.style.height=l.height+"px";var b=document.createElement("div");b.style.display="block",b.style.overflow="hidden",b.style.float="left",b.style.width=l.height+"px",b.style.height=l.height+"px";var d=this.__createPlayButtonElement__({size:l.height,mouseEnterColor:l.mouseEnterColor,mouseLeaveColor:l.mouseLeaveColor}),y=this.__createStopButtonElement__({size:l.height,mouseEnterColor:l.mouseEnterColor,mouseLeaveColor:l.mouseLeaveColor});b.appendChild(d),b.appendChild(y);var n=document.createElement("div");n.style.display="block",n.style.overflow="hidden",n.style.float="left",n.style.width=l.width-l.height+"px",n.style.height=l.height+"px";var i=document.createElement("a");i.href="".concat(p.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),i.target="_blank",i.style.display="block",i.style.overflow="hidden",i.style.paddingLeft="8px",i.style.textOverflow="ellipsis",i.style.width=l.width-l.height+"px",i.style.height=l.height/2+"px",i.textContent=this.player.media.name;var C=document.createElement("a");return C.href="".concat(p.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),C.target="_blank",C.style.display="block",C.style.overflow="hidden",C.style.paddingLeft="8px",C.style.textOverflow="ellipsis",C.style.width=l.width-l.height+"px",C.style.height=l.height/2+"px",C.textContent=this.player.media.artistName,n.appendChild(i),n.appendChild(C),v.appendChild(b),v.appendChild(n),v}},{key:"__createOriginalSiteLinkElement__",value:function(l){var v=document.createElement("div");v.style.display="block",v.style.overflow="hidden",v.style.width=l.width+"px",v.style.height=l.height+"px";var b=document.createElement("a");switch(b.href="".concat(p.default.defaultAppServerEndpoint,"/redirect_to/original_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),b.target="_blank",b.style.display="block",b.style.overflow="hidden",b.style.float="left",b.style.margin="".concat(0,"px ").concat(2,"px"),b.style.textOverflow="ellipsis",b.style.textAlign="left",b.style.width=l.width/2-4+"px",b.style.height=l.height-0+"px",this.__language__){case"ja":case"en":default:b.textContent=""}v.appendChild(b);var d=document.createElement("a");switch(d.href="".concat(p.default.defaultAppServerEndpoint,"/redirect_to/original_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),d.target="_blank",d.style.display="block",d.style.overflow="hidden",d.style.float="left",d.style.margin="".concat(0,"px ").concat(2,"px"),d.style.textOverflow="ellipsis",d.style.textAlign="right",d.style.width=l.width/2-4+"px",d.style.height=l.height-0+"px",this.__language__){case"ja":d.textContent="この配信サイトへ";break;case"en":default:d.textContent="Original site"}return v.appendChild(d),v}},{key:"__createMusicMapElement__",value:function(l){var v=this,b=document.createElement("div");if(this.player.musicMap==null||this.player.musicMap.chorus==null)return P.default.warn("'Songle.Player' do NOT have a chorus information. Please install the chorus plugin using 'Songle.Plugin.Chorus'"),b;b.style.width=l.width+"px",b.style.height=l.height+"px";var d=S.default.createSVGElement({width:l.width,height:l.height}),y=l.width-4,n=(l.height-4-6+1)/6,i=0;d.appendChild(S.default.createRectElement({x:0,y:0,width:l.width,height:l.height,fill:"none",stroke:this.__musicMapOuterBackgroundColor__})),d.addEventListener("click",function(E){v.player.seekTo(i||E.offsetX/y*v.player.durationTime),p.default.stringIsBlank(v.player.accessToken)&&p.default.stringIsBlank(v.player.secretToken)&&v.player.play()});for(var C=function(E){var w=(n+1)*E+1+1;d.appendChild(S.default.createRectElement({x:2,y:w,width:y,height:n,fill:v.__musicMapInnerBackgroundColor__,stroke:"none"}));var M=v.player.musicMap.chorus[E];if(!M)return"continue";M.items.forEach(function(m){var T=m.startTime/v.player.durationTime*y+2,j=w,L=m.durationTime/v.player.durationTime*y,W=n,A=S.default.createRectElement({x:T,y:j,width:L,height:W,fill:M.isChorus?v.__musicMapChorusSectionColor__:v.__musicMapRepeatedSectionColor__,stroke:"none"});A.style.cursor="pointer",A.addEventListener("mouseenter",function(){i=m.startTime,A.style.opacity=.75}),A.addEventListener("mouseleave",function(){i=0,A.style.opacity=1}),d.appendChild(A)})},R=0;R<6;++R)C(R);var N=S.default.createRectElement({x:0,y:0,width:1,height:l.height,fill:"none",stroke:this.__musicMapCursorColor__});return this.__musicMapAnimationIntervalId__=setInterval(function(){N.setAttribute("x",l.width*(v.player.positionTime/v.player.durationTime))},1e3),d.appendChild(N),b.appendChild(d),b}},{key:"__createPlayButtonElement__",value:function(){var l=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=v.size!=null?v.size:30,d=v.mouseEnterColor!=null?v.mouseEnterColor:"#e17",y=v.mouseLeaveColor!=null?v.mouseLeaveColor:"#222",n=v.strokeWidth!=null?v.strokeWidth:2,i=document.createElement("div");i.style.cursor="pointer",i.style.width=b+"px",i.style.height=b+"px",this.player.isPlaying?i.style.display="none":i.style.display="block";var C=S.default.createSVGElement({width:b,height:b}),R=S.default.createGroupElement({fill:y,stroke:y,strokeWidth:n}),N=1*(b/2-n),E=N+n,w=N+n,M=S.default.createCircleElement({cx:E,cy:w,r:N,fill:"none"}),m=.5*(b/2-n),T=1*m/1.41,j=E+Math.cos(3.14/180*135)*m+(m-T),L=w-Math.sin(3.14/180*135)*m,W=E+Math.cos(0)*T,A=w-Math.sin(0)*T,D=E+Math.cos(3.14/180*225)*m+(m-T),z=w-Math.sin(3.14/180*225)*m,B=S.default.createPolygonElement({points:[j,L,W,A,D,z]});return C.appendChild(R),R.appendChild(M),R.appendChild(B),i.appendChild(C),i.addEventListener("click",function(U){l.player.play()}),i.addEventListener("mouseenter",function(U){R.setAttribute("fill",d),R.setAttribute("stroke",d)}),i.addEventListener("mouseleave",function(U){R.setAttribute("fill",y),R.setAttribute("stroke",y)}),this.player.on("play",function(U){i.style.display="none"}),this.player.on("pause",function(U){i.style.display="block"}),i}},{key:"__createStopButtonElement__",value:function(){var l=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=v.size!=null?v.size:30,d=v.mouseEnterColor!=null?v.mouseEnterColor:"#e17",y=v.mouseLeaveColor!=null?v.mouseLeaveColor:"#222",n=v.strokeWidth!=null?v.strokeWidth:2,i=document.createElement("div");i.style.cursor="pointer",i.style.width=b+"px",i.style.height=b+"px",this.player.isPlaying?i.style.display="block":i.style.display="none";var C=S.default.createSVGElement({width:b,height:b}),R=S.default.createGroupElement({fill:y,stroke:y,strokeWidth:n}),N=1*(b/2-n),E=N+n,w=N+n,M=S.default.createCircleElement({cx:E,cy:w,r:N,fill:"none"}),m=.5*(b/2-n),T=E+Math.cos(3.14/180*135)*m,j=w-Math.sin(3.14/180*135)*m,L=T+.5*Math.abs(T-E),W=j,A=E+Math.cos(3.14/180*225)*m,D=w-Math.sin(3.14/180*225)*m,z=A+.5*Math.abs(T-E),B=D,U=S.default.createPolygonElement({points:[T,j,L,W,z,B,A,D]}),J=E+Math.cos(3.14/180*45)*m,q=w-Math.sin(3.14/180*45)*m,F=J-.5*Math.abs(J-E),G=q,Q=E+Math.cos(3.14/180*315)*m,te=w-Math.sin(3.14/180*315)*m,re=Q-.5*Math.abs(Q-E),ae=te,ie=S.default.createPolygonElement({points:[F,G,J,q,Q,te,re,ae]});return C.appendChild(R),R.appendChild(M),R.appendChild(U),R.appendChild(ie),i.appendChild(C),i.addEventListener("click",function(X){l.player.pause()}),i.addEventListener("mouseenter",function(X){R.setAttribute("stroke",d),R.setAttribute("fill",d)}),i.addEventListener("mouseleave",function(X){R.setAttribute("stroke",y),R.setAttribute("fill",y)}),this.player.on("play",function(X){i.style.display="block"}),this.player.on("pause",function(X){i.style.display="none"}),i}},{key:"__createSongleJpSiteLinkElement__",value:function(l){var v=document.createElement("div");v.style.display="block",v.style.overflow="hidden",v.style.width=l.width+"px",v.style.height=l.height+"px";var b=document.createElement("a");switch(b.href="".concat(p.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),b.target="_blank",b.style.display="block",b.style.overflow="hidden",b.style.float="left",b.style.margin="".concat(0,"px ").concat(2,"px"),b.style.textOverflow="ellipsis",b.style.textAlign="left",b.style.width=l.width/2-4+"px",b.style.height=l.height-0+"px",this.__language__){case"ja":b.textContent="Songleでサビ訂正";break;case"en":default:b.textContent="Annotate this song"}v.appendChild(b);var d=document.createElement("a");switch(d.href="".concat(p.default.defaultAppServerEndpoint),d.target="_blank",d.style.display="block",d.style.overflow="hidden",d.style.float="left",d.style.margin="".concat(0,"px ").concat(2,"px"),d.style.textOverflow="ellipsis",d.style.textAlign="right",d.style.width=l.width/2-4+"px",d.style.height=l.height-0+"px",this.__language__){case"ja":case"en":default:d.textContent="Powered by Songle API"}return v.appendChild(d),v}},{key:"__updateSize__",value:function(l){var v=!1;if(l.width!=null){if(l.width<20)return P.default.warn("Songle Widget is too small. Please check 'Songle.Plugin.SongleWidget' options"),!1;this.__controllerWidth__!=l.width&&(this.__controllerWidth__=l.width,v=!0),this.__musicMapWidth__!=l.width&&(this.__musicMapWidth__=l.width,v=!0)}if(l.height!=null){if(this.__showController__&&(l.height-=this.__controllerHeight__),this.__showOriginalSiteLink__&&(l.height-=15),this.__showSongleJpSiteLink__&&(l.height-=15),l.height<20)return P.default.warn("Songle Widget is too small. Please check 'Songle.Plugin.SongleWidget' options"),!1;this.__musicMapHeight__!=l.height&&(this.__musicMapHeight__=l.height,v=!0)}return v}},{key:"dispatcherName",get:function(){return a}},{key:"element",get:function(){return k.default.querySelector(this.__element__)}}]),s}(I.default);x.default=o},12:function(H,x,u){u.r(x);var I=u(22);u.d(x,"SongAPI",function(){return I.default});var k=u(23);u.d(x,"BeatAPI",function(){return k.default});var P=u(24);u.d(x,"ChordAPI",function(){return P.default});var S=u(25);u.d(x,"MelodyAPI",function(){return S.default});var p=u(26);u.d(x,"ChorusAPI",function(){return p.default});var O=u(27);u.d(x,"VariationAPI",function(){return O.default});var h={SongAPI:I.default,BeatAPI:k.default,ChordAPI:P.default,MelodyAPI:S.default,ChorusAPI:p.default,VariationAPI:O.default};x.default=h},13:function(H,x,u){function I(P,S){for(var p=0;p<S.length;p++){var O=S[p];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(P,O.key,O)}}u.r(x);var k=function(){function P(O){(function(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")})(this,P),this.__player__=O}var S,p;return S=P,(p=[{key:"dispatch",value:function(O,h,c){}},{key:"find",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=h.offset!=null?h.offset:0,e=this.__player__.positionTime-250+-1*c,f=this.__player__.positionTime+0+-1*c;this.dispatch(e,f,O)}},{key:"reset",value:function(){}}])&&I(S.prototype,p),P}();x.default=k},14:function(H,x,u){u.r(x);function I(P){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=[];return P.musicMap.chorus&&P.musicMap.chorus.forEach(function(O){S.chorusOnly&&!O.isChorus||(p=p.concat(O.items).sort(function(h,c){return h.startTime-c.startTime}))}),p}var k={findPrevBar:function(P){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=S.startTime!=null?S.startTime:P.positionTime,O=P.musicMap.beats||[];O=O.reverse();for(var h=0;h<O.length;++h)if(O[h].number==1&&p>O[h].startTime+500)return O[h];return O[0]},findNextBar:function(P){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=S.startTime!=null?S.startTime:P.positionTime,O=P.musicMap.beats||[],h=0;h<O.length;++h)if(O[h].number==1&&p<O[h].startTime-500)return O[h];return O[0]},findPrevRepeatedSectionItem:function(P){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=S.startTime!=null?S.startTime:P.positionTime,O=I(P,S);O=O.reverse();for(var h=0;h<O.length;++h)if(p>O[h].startTime+500)return O[h];return O[0]},findNextRepeatedSectionItem:function(P){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=S.startTime!=null?S.startTime:P.positionTime,O=I(P,S),h=0;h<O.length;++h)if(p<O[h].startTime-500)return O[h];return O[0]}};x.default=k},15:function(H,x,u){function I(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}function k(c,e){for(var f=0;f<e.length;f++){var _=e[f];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,_.key,_)}}function P(c,e){return(P=Object.setPrototypeOf||function(f,_){return f.__proto__=_,f})(c,e)}function S(c){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var f,_=O(c);if(e){var g=O(this).constructor;f=Reflect.construct(_,arguments,g)}else f=_.apply(this,arguments);return p(this,f)}}function p(c,e){return!e||typeof e!="object"&&typeof e!="function"?function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(c):e}function O(c){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(c)}u.r(x);var h=function(c){(function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&P(a,o)})(g,c);var e,f,_=S(g);function g(){var a,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I(this,g),(a=_.call(this)).endpointScheme=o.endpointScheme!=null?o.endpointScheme:null,a.endpointHost=o.endpointHost!=null?o.endpointHost:null,a.endpointPath=o.endpointPath!=null?o.endpointPath:null,a.revisionId=o.revisionId!=null?o.revisionId:0,a.offset=o.offset!=null?o.offset:0,a.pollingInterval=o.pollingInterval!=null?o.pollingInterval:50,a}return e=g,(f=[{key:"__invokeTrap__",value:function(a,o){a.trap({target:this,type:a.name,data:o})}}])&&k(e.prototype,f),g}(u(21).default);x.default=h},17:function(H,x){var u;u=function(){return this}();try{u=u||new Function("return this")()}catch{typeof window=="object"&&(u=window)}H.exports=u},174:function(H,x,u){u.r(x);var I=u(77),k=u(62);function P(e,f){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}function S(e,f){return(S=Object.setPrototypeOf||function(_,g){return _.__proto__=g,_})(e,f)}function p(e){var f=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var _,g=h(e);if(f){var a=h(this).constructor;_=Reflect.construct(g,arguments,a)}else _=g.apply(this,arguments);return O(this,_)}}function O(e,f){return!f||typeof f!="object"&&typeof f!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(e):f}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(e)}var c=function(e){(function(g,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),a&&S(g,a)})(_,e);var f=p(_);function _(){var g,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return P(this,_),(g=f.call(this,a)).addPlugin(new k.default),g}return _}(I.default);x.default=c},185:function(H,x,u){u.r(x);var I=u(77),k=u(100);function P(e,f){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}function S(e,f){return(S=Object.setPrototypeOf||function(_,g){return _.__proto__=g,_})(e,f)}function p(e){var f=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var _,g=h(e);if(f){var a=h(this).constructor;_=Reflect.construct(g,arguments,a)}else _=g.apply(this,arguments);return O(this,_)}}function O(e,f){return!f||typeof f!="object"&&typeof f!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(e):f}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(e)}var c=function(e){(function(g,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),a&&S(g,a)})(_,e);var f=p(_);function _(){var g,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return P(this,_),(g=f.call(this,a)).addPlugin(new k.default),g}return _}(I.default);x.default=c},19:function(H,x,u){u.r(x);var I=u(2),k=u(1);function P(p,O){for(var h=0;h<O.length;h++){var c=O[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}var S=function(){function p(){(function(e,f){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")})(this,p),this.traps=[]}var O,h,c;return O=p,c=[{key:"Name",get:function(){return"dispatcher"}},{key:"Type",get:function(){return"dispatcher"}}],(h=[{key:"initialize",value:function(e){I.default.debug("Invoke '".concat(this.dispatcherName,"#initialize'")),this.__player__=e}},{key:"mediaTryMount",value:function(e,f){I.default.debug("Invoke '".concat(this.dispatcherName,"#mediaTryMount'"),f)}},{key:"mediaDisMount",value:function(e,f){I.default.debug("Invoke '".concat(this.dispatcherName,"#mediaDisMount'"),f)}},{key:"mediaDidMount",value:function(e,f){I.default.debug("Invoke '".concat(this.dispatcherName,"#mediaDidMount'"),f)}},{key:"dispose",value:function(){I.default.debug("Invoke '".concat(this.dispatcherName,"#dispose'"))}},{key:"mapTraps",value:function(e){var f=this,_=this.player.dispatchers.map(function(g){return g&&g.traps.map(function(a){if(f.__convertToStringArray__(e).indexOf(a.name)!=-1)return a}).filter(function(a){return a!=null})});return Array.prototype.concat.apply([],_)}},{key:"mapTrapsHasAnyData",value:function(e){return this.mapTraps(e).filter(function(f){return f&&f.data!=null})}},{key:"mapTrapsHasNotData",value:function(e){return this.mapTraps(e).filter(function(f){return f&&f.data==null})}},{key:"on",value:function(e,f){var _=this,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};g.offset=g.offset!=null?g.offset:0,(e=this.__convertToStringArray__(e)).forEach(function(a){a=_.__validateTrapName__(a),_.traps.push({name:a,trap:f,data:null,options:g})})}},{key:"off",value:function(e,f){var _=this;(e=this.__convertToStringArray__(e)).forEach(function(g){g=_.__validateTrapName__(g),_.traps.forEach(function(a,o){a.name===g&&a.trap===f&&_.traps.splice(o,1)})})}},{key:"invokeSelfTrap",value:function(e){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=this.__validateTrapName__(e),this.traps.forEach(function(_){_.name==e&&(f.type=e,_.trap(f))})}},{key:"__convertToStringArray__",value:function(e){return k.default.typeOf(e)==="string"?[e]:e}},{key:"__validateTrapName__",value:function(e){switch(e){case"beatPlay":e="beatEnter";break;case"chordChange":case"chordPlay":e="chordEnter";break;case"melodyPlay":e="melodyEnter";break;case"variationChange":case"variationPlay":e="variationEnter";break;case"chorusEnter":e="chorusSectionEnter";break;case"chorusLeave":e="chorusSectionLeave";break;case"repeatEnter":case"repeatSectionEnter":e="repeatedSectionEnter";break;case"repeatLeave":case"repeatSectionLeave":e="repeatedSectionLeave";break;case"songleSyncNodeChange":e="songleSyncStageNodeChange";break;case"songleSyncNodeEnter":e="songleSyncStageNodeEnter";break;case"songleSyncNodeLeave":e="songleSyncStageNodeLeave"}return e}},{key:"dispatcherName",get:function(){return p.Name}},{key:"dispatcherType",get:function(){return p.Type}},{key:"player",get:function(){return this.__player__}}])&&P(O.prototype,h),c&&P(O,c),p}();x.default=S},2:function(H,x,u){u.r(x);var I=u(1);function k(O,h){for(var c=0;c<h.length;c++){var e=h[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(O,e.key,e)}}var P=[],S=function(){function O(){(function(f,_){if(!(f instanceof _))throw new TypeError("Cannot call a class as a function")})(this,O)}var h,c,e;return h=O,e=[{key:"debug",value:function(f,_){I.default.showDebugLog&&O.__log__("debug",f,_,"color:#000;")}},{key:"warn",value:function(f,_){I.default.showErrorLog&&O.__log__("warn",f,_,"color:#f82;")}},{key:"error",value:function(f,_){I.default.showErrorLog&&O.__log__("error",f,_,"color:#f22;")}},{key:"__log__",value:function(f,_,g,a){switch(f){case"debug":_="[Songle API ".concat(f,"] ")+_;break;case"warn":case"error":if(_="[Songle API ".concat(f,"] ")+_,P.indexOf(_)!=-1)return}P.push(_),g!=null&&(g=JSON.stringify(g,function(o,t){if(t==null)return t;switch(!0){case t instanceof HTMLElement:return"[HTMLElement]";case t.dispatcherName!=null:return"[".concat(t.dispatcherName,"]");case t.dispatcherType!=null:return"[".concat(t.dispatcherType,"]")}return t},"	")),console.log((I.default.isWebBrowser?"%c":"")+_+(g?`

`+g+`
`:""),I.default.isWebBrowser?a:"")}},{key:"histories",get:function(){return P}}],(c=null)&&k(h.prototype,c),e&&k(h,e),O}(),p={histories:S.histories,debug:S.debug,warn:S.warn,error:S.error};x.default=p},20:function(H,x,u){u.r(x);var I=u(52);u.d(x,"ClockAPI",function(){return I.default});var k=u(53);u.d(x,"HistoryAPI",function(){return k.default});var P=u(54);u.d(x,"MessageAPI",function(){return P.default});var S=u(55);u.d(x,"PlaylistAPI",function(){return S.default});var p=u(56);u.d(x,"StageAPI",function(){return p.default});var O={ClockAPI:I.default,HistoryAPI:k.default,MessageAPI:P.default,PlaylistAPI:S.default,StageAPI:p.default};x.default=O},21:function(H,x,u){function I(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}function k(c,e){for(var f=0;f<e.length;f++){var _=e[f];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,_.key,_)}}function P(c,e){return(P=Object.setPrototypeOf||function(f,_){return f.__proto__=_,f})(c,e)}function S(c){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var f,_=O(c);if(e){var g=O(this).constructor;f=Reflect.construct(_,arguments,g)}else f=_.apply(this,arguments);return p(this,f)}}function p(c,e){return!e||typeof e!="object"&&typeof e!="function"?function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(c):e}function O(c){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(c)}u.r(x);var h=function(c){(function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),t&&P(o,t)})(a,c);var e,f,_,g=S(a);function a(){return I(this,a),g.apply(this,arguments)}return e=a,_=[{key:"Name",get:function(){return"plugin"}},{key:"Type",get:function(){return"plugin"}}],(f=[{key:"dispatcherName",get:function(){return a.Name}},{key:"dispatcherType",get:function(){return a.Type}}])&&k(e.prototype,f),_&&k(e,_),a}(u(19).default);x.default=h},22:function(H,x,u){u.r(x);var I=u(5),k=(u(2),u(1)),P={};function S(h,c){var e=c.endpointScheme,f=c.endpointHost,_=c.endpointPath,g=c.fallback,a=[];return a.push("syntax=camelcase"),a.push("endpoint_scheme="+"".concat(e)),a.push("endpoint_host="+"".concat(f)),a.push("endpoint_path="+"".concat(_)),a.push("fallback="+"".concat(g?1:0)),a.push("url="+"".concat(encodeURIComponent(h))),"".concat(k.default.defaultAppServerEndpoint,"/api/v2/song.json?").concat(a.join("&"))}function p(h,c){return Object.keys(h.attributes).forEach(function(e){Object.defineProperty(h,e,{get:function(){return h.attributes[e]}})}),Object.keys(h.relationships).forEach(function(e){Object.defineProperty(h,e,{get:function(){return h.relationships[e].data.attributes}})}),h}var O={get:function(h){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(e,f){c.cache=c.cache==null||c.cache,c.endpointScheme=c.endpointScheme!=null?c.endpointScheme:"",c.endpointHost=c.endpointHost!=null?c.endpointHost:"",c.endpointPath=c.endpointPath!=null?c.endpointPath:"",c.fallback=c.fallback!=null&&c.fallback;var _=S(h,c),g=P[_];if(g!=null&&c.cache)return e(g);I.default.getJSON(_).then(function(a){var o=a.meta,t=a.data;if(o.status!=200)return f(a);var r=p(t);return P[_]=r,P[r.permalink]==null&&(P[r.permalink]=r),e(r)},function(a){return f(a)})})}};x.default=O},23:function(H,x,u){u.r(x);var I=u(5),k=u(2),P=u(1),S={};function p(c,e){var f=e.endpointScheme,_=e.endpointHost,g=e.endpointPath,a=e.revisionId,o=[];return o.push("syntax=camelcase"),o.push("endpoint_scheme="+"".concat(f)),o.push("endpoint_host="+"".concat(_)),o.push("endpoint_path="+"".concat(g)),o.push("url="+"".concat(encodeURIComponent(c))),o.push("revision_id="+"".concat(a)),"".concat(P.default.defaultAppServerEndpoint,"/api/v2/song/beat.json?").concat(o.join("&"))}function O(c,e){var f=e.revisionId,_=c.attributes.sequence;return _.forEach(function(g){[{source:"startTimeMs",target:"startTime"},{source:"startTime",target:"start",warning:!0},{source:"numberOfBeatsPerBar",target:"count",warning:!0},{source:"number",target:"position",warning:!0}].forEach(function(a){Object.defineProperty(g,a.target,{get:function(){return a.warning&&k.default.warn("'Beat.".concat(a.target,"' is deprecated API, please use 'Beat.").concat(a.source,"'")),g[a.source]}})}),Object.defineProperty(g,"prev",{get:function(){return _[g.index-1]||null}}),Object.defineProperty(g,"next",{get:function(){return _[g.index+1]||null}})}),{revisionId:f,data:_}}var h={get:function(c){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(f,_){e.cache=e.cache==null||e.cache,e.endpointScheme=e.endpointScheme!=null?e.endpointScheme:"",e.endpointHost=e.endpointHost!=null?e.endpointHost:"",e.endpointPath=e.endpointPath!=null?e.endpointPath:"",e.revisionId=e.revisionId!=null?e.revisionId:0;var g=p(c,e),a=S[g];if(a!=null&&e.cache)return f(a);I.default.getJSON(g).then(function(o){var t=o.meta,r=o.data;if(t.status!=200)return _(o);var s=O(r,e);return S[g]=s,f(s)},function(o){return _(o)})})}};x.default=h},24:function(H,x,u){u.r(x);var I=u(5),k=u(2),P=u(1),S={};function p(c,e){var f=e.endpointScheme,_=e.endpointHost,g=e.endpointPath,a=e.revisionId,o=[];return o.push("syntax=camelcase"),o.push("endpoint_scheme="+"".concat(f)),o.push("endpoint_host="+"".concat(_)),o.push("endpoint_path="+"".concat(g)),o.push("url="+"".concat(encodeURIComponent(c))),o.push("revision_id="+"".concat(a)),"".concat(P.default.defaultAppServerEndpoint,"/api/v2/song/chord.json?").concat(o.join("&"))}function O(c,e){var f=e.revisionId,_=c.attributes.sequence;return _.forEach(function(g){[{source:"startTimeMs",target:"startTime"},{source:"durationTimeMs",target:"durationTime"},{source:"endTimeMs",target:"endTime"},{source:"startTime",target:"start",warning:!0},{source:"durationTime",target:"duration",warning:!0},{source:"endTime",target:"end",warning:!0}].forEach(function(a){Object.defineProperty(g,a.target,{get:function(){return a.warning&&k.default.warn("'Chord.".concat(a.target,"' is deprecated API, please use 'Chord.").concat(a.source,"'")),g[a.source]}})}),Object.defineProperty(g,"prev",{get:function(){return _[g.index-1]||null}}),Object.defineProperty(g,"next",{get:function(){return _[g.index+1]||null}})}),{revisionId:f,data:_}}var h={get:function(c){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(f,_){e.cache=e.cache==null||e.cache,e.endpointScheme=e.endpointScheme!=null?e.endpointScheme:"",e.endpointHost=e.endpointHost!=null?e.endpointHost:"",e.endpointPath=e.endpointPath!=null?e.endpointPath:"",e.revisionId=e.revisionId!=null?e.revisionId:0;var g=p(c,e),a=S[g];if(a!=null&&e.cache)return f(a);I.default.getJSON(g).then(function(o){var t=o.meta,r=o.data;if(t.status!=200)return _(o);var s=O(r,e);return S[g]=s,f(s)},function(o){return _(o)})})}};x.default=h},25:function(H,x,u){u.r(x);var I=u(5),k=u(2),P=u(1),S={};function p(c,e){var f=e.endpointScheme,_=e.endpointHost,g=e.endpointPath,a=e.revisionId,o=[];return o.push("syntax=camelcase"),o.push("endpoint_scheme="+"".concat(f)),o.push("endpoint_host="+"".concat(_)),o.push("endpoint_path="+"".concat(g)),o.push("url="+"".concat(encodeURIComponent(c))),o.push("revision_id="+"".concat(a)),"".concat(P.default.defaultAppServerEndpoint,"/api/v2/song/melody.json?").concat(o.join("&"))}function O(c,e){var f=e.revisionId,_=c.attributes.sequence;return _.forEach(function(g){[{source:"startTimeMs",target:"startTime"},{source:"durationTimeMs",target:"durationTime"},{source:"endTimeMs",target:"endTime"},{source:"startTime",target:"start",warning:!0},{source:"durationTime",target:"duration",warning:!0},{source:"endTime",target:"end",warning:!0}].forEach(function(a){Object.defineProperty(g,a.target,{get:function(){return a.warning&&k.default.warn("'Melody.".concat(a.target,"' is deprecated API, please use 'Melody.").concat(a.source,"'")),g[a.source]}})}),Object.defineProperty(g,"prev",{get:function(){return _[g.index-1]||null}}),Object.defineProperty(g,"next",{get:function(){return _[g.index+1]||null}})}),{revisionId:f,data:_}}var h={get:function(c){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(f,_){e.cache=e.cache==null||e.cache,e.endpointScheme=e.endpointScheme!=null?e.endpointScheme:"",e.endpointHost=e.endpointHost!=null?e.endpointHost:"",e.endpointPath=e.endpointPath!=null?e.endpointPath:"",e.revisionId=e.revisionId!=null?e.revisionId:0;var g=p(c,e),a=S[g];if(a!=null&&e.cache)return f(a);I.default.getJSON(g).then(function(o){var t=o.meta,r=o.data;if(t.status!=200)return _(o);var s=O(r,e);return S[g]=s,f(s)},function(o){return _(o)})})}};x.default=h},26:function(H,x,u){u.r(x);var I=u(5),k=u(2),P=u(1),S={};function p(c,e){var f=e.endpointScheme,_=e.endpointHost,g=e.endpointPath,a=e.revisionId,o=[];return o.push("syntax=camelcase"),o.push("endpoint_scheme="+"".concat(f)),o.push("endpoint_host="+"".concat(_)),o.push("endpoint_path="+"".concat(g)),o.push("url="+"".concat(encodeURIComponent(c))),o.push("revision_id="+"".concat(a)),"".concat(P.default.defaultAppServerEndpoint,"/api/v2/song/chorus.json?").concat(o.join("&"))}function O(c,e){var f=e.revisionId,_=c.attributes.sequence;return _.forEach(function(g){[{source:"durationTimeMs",target:"durationTime"},{source:"items",target:"repeats",warning:!0},{source:"durationTime",target:"duration",warning:!0}].forEach(function(a){Object.defineProperty(g,a.target,{get:function(){return a.warning&&k.default.warn("'ChorusSection.".concat(a.target,"' is deprecated API, please use 'ChorusSection.").concat(a.source,"'")),g[a.source]}})}),g.items.forEach(function(a){[{source:"startTimeMs",target:"startTime"},{source:"durationTimeMs",target:"durationTime"},{source:"endTimeMs",target:"endTime"},{source:"startTime",target:"start",warning:!0},{source:"durationTime",target:"duration",warning:!0},{source:"endTime",target:"end",warning:!0}].forEach(function(o){Object.defineProperty(a,o.target,{get:function(){return o.warning&&k.default.warn("'ChorusSectionItem.".concat(o.target,"' is deprecated API, please use 'ChorusSectionItem.").concat(o.source,"'")),a[o.source]}})}),Object.defineProperty(a,"prev",{get:function(){return g.items[a.index-1]||null}}),Object.defineProperty(a,"next",{get:function(){return g.items[a.index+1]||null}})})}),{revisionId:f,data:_}}var h={get:function(c){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(f,_){e.cache=e.cache==null||e.cache,e.endpointScheme=e.endpointScheme!=null?e.endpointScheme:"",e.endpointHost=e.endpointHost!=null?e.endpointHost:"",e.endpointPath=e.endpointPath!=null?e.endpointPath:"",e.revisionId=e.revisionId!=null?e.revisionId:0;var g=p(c,e),a=S[g];if(a!=null&&e.cache)return f(a);I.default.getJSON(g).then(function(o){var t=o.meta,r=o.data;if(t.status!=200)return _(o);var s=O(r,e);return S[g]=s,f(s)},function(o){return _(o)})})}};x.default=h},27:function(H,x,u){u.r(x);var I=u(5),k=u(2),P=u(1),S={};function p(c,e){var f=e.endpointScheme,_=e.endpointHost,g=e.endpointPath,a=e.revisionId,o=e.groupCount,t=[];return t.push("syntax=camelcase"),t.push("endpoint_scheme="+"".concat(f)),t.push("endpoint_host="+"".concat(_)),t.push("endpoint_path="+"".concat(g)),t.push("url="+"".concat(encodeURIComponent(c))),t.push("revision_id="+"".concat(a)),t.push("group_count="+"".concat(o)),"".concat(P.default.defaultAppServerEndpoint,"/api/v2/song/variation.json?").concat(t.join("&"))}function O(c,e){var f=e.revisionId,_=c.attributes.sequence;return _.forEach(function(g){[{source:"startTimeMs",target:"startTime"},{source:"durationTimeMs",target:"durationTime"},{source:"endTimeMs",target:"endTime"},{source:"startTime",target:"start",warning:!0},{source:"durationTime",target:"duration",warning:!0},{source:"endTime",target:"end",warning:!0}].forEach(function(a){Object.defineProperty(g,a.target,{get:function(){return a.warning&&k.default.warn("'Variation.".concat(a.target,"' is deprecated API, please use 'Variation.").concat(a.source,"'")),g[a.source]}})}),Object.defineProperty(g,"prev",{get:function(){return _[g.index-1]||null}}),Object.defineProperty(g,"next",{get:function(){return _[g.index+1]||null}})}),{revisionId:f,data:_}}var h={get:function(c){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(f,_){e.cache=e.cache==null||e.cache,e.endpointScheme=e.endpointScheme!=null?e.endpointScheme:"",e.endpointHost=e.endpointHost!=null?e.endpointHost:"",e.endpointPath=e.endpointPath!=null?e.endpointPath:"",e.revisionId=e.revisionId!=null?e.revisionId:0,e.groupCount=e.groupCount!=null?e.groupCount:2;var g=p(c,e),a=S[g];if(a!=null&&e.cache)return f(a);I.default.getJSON(g).then(function(o){var t=o.meta,r=o.data;if(t.status!=200)return _(o);var s=O(r,e);return S[g]=s,f(s)},function(o){return _(o)})})}};x.default=h},28:function(H,x,u){u.r(x);var I=u(2);function k(p,O){if(!(p instanceof O))throw new TypeError("Cannot call a class as a function")}function P(p,O){for(var h=0;h<O.length;h++){var c=O[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}var S=function(){function p(c){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k(this,p),this.intervalTime=e.intervalTime!=null?e.intervalTime:this.defaultIntervalTime,this.__plugin__=c}var O,h;return O=p,(h=[{key:"start",value:function(){var c=this;setTimeout(function(){try{c.runTask()}catch{I.default.debug("Worker's runTask is daed")}c.start()},this.intervalTime)}},{key:"runTask",value:function(){}},{key:"update",value:function(){}},{key:"defaultIntervalTime",get:function(){return 0}},{key:"minIntervalTime",get:function(){return 0}},{key:"maxIntervalTime",get:function(){return 0}},{key:"intervalTime",set:function(c){c<this.minIntervalTime&&(I.default.warn("You can't set less than 'minIntervalTime'"),c=this.minIntervalTime),c>this.maxIntervalTime&&(I.default.warn("You can't set more than 'maxIntervalTime'"),c=this.maxIntervalTime),this.__intervalTime__=c},get:function(){return this.__intervalTime__}},{key:"plugin",get:function(){return this.__plugin__}},{key:"player",get:function(){return this.__plugin__.player}}])&&P(O.prototype,h),p}();x.default=S},30:function(H,x,u){u.r(x);var I=u(1),k={createScriptElement:function(P){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=I.default.global.document.createElement("script");return S.async=S.async||!1,S.defer=S.defer||!1,S.type=S.type||"text/javascript",p.async=S.async,p.defer=S.defer,p.src=P,p.type=S.type,p.addEventListener("abort",S.onAbort,!1),p.addEventListener("error",S.onError,!1),p.addEventListener("load",S.onLoad,!1),p},querySelector:function(P){return I.default.typeOf(P)==="string"?I.default.global.document.querySelector(P):P}};x.default=k},32:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(6),S=u(2),p=u(1);function O(t,r,s,l,v,b,d){try{var y=t[b](d),n=y.value}catch(i){return void s(i)}y.done?r(n):Promise.resolve(n).then(l,v)}function h(t,r,s){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(l,v,b){var d=function(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=a(n))!==null;);return n}(l,v);if(d){var y=Object.getOwnPropertyDescriptor(d,v);return y.get?y.get.call(b):y.value}})(t,r,s||t)}function c(t,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function e(t,r,s){return r&&c(t.prototype,r),s&&c(t,s),t}function f(t,r){return(f=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(t,r)}function _(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var s,l=a(t);if(r){var v=a(this).constructor;s=Reflect.construct(l,arguments,v)}else s=l.apply(this,arguments);return g(this,s)}}function g(t,r){return!r||typeof r!="object"&&typeof r!="function"?function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var o=function(t){(function(b,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),d&&f(b,d)})(v,t);var r,s,l=_(v);function v(b){var d;return function(y,n){if(!(y instanceof n))throw new TypeError("Cannot call a class as a function")}(this,v),d=l.call(this,null,null,b),p.default.typeOf(b)=="string"&&S.default.warn("'Songle.Media.Headless' is deprecated API, please use headless option in 'Songle.Player#useMedia'"),d}return e(v,null,[{key:"Name",get:function(){return"songle-api-headless-media"}}]),e(v,[{key:"initialize",value:(r=k.a.mark(function b(d){var y=this;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.player==null){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,h(a(v.prototype),"initialize",this).call(this,d);case 4:this.__intervalId__=setInterval(function(){y.positionTime>=y.durationTime&&y.__invokeMediaStateChangeTrap__(y,P.default.StateFinished)},1e3);case 5:case"end":return n.stop()}},b,this)}),s=function(){var b=this,d=arguments;return new Promise(function(y,n){var i=r.apply(b,d);function C(N){O(i,y,n,C,R,"next",N)}function R(N){O(i,y,n,C,R,"throw",N)}C(void 0)})},function(b){return s.apply(this,arguments)})},{key:"dispose",value:function(){h(a(v.prototype),"dispose",this).call(this),clearInterval(this.__intervalId__)}},{key:"play",value:function(){this.__invokeMediaStateChangeTrap__(this,P.default.StateTimeUpdate),this.__invokeMediaStateChangeTrap__(this,P.default.StatePlaying)}},{key:"pause",value:function(){this.__invokeMediaStateChangeTrap__(this,P.default.StateTimeUpdate),this.__invokeMediaStateChangeTrap__(this,P.default.StatePaused)}},{key:"seekTo",value:function(b){switch(h(a(v.prototype),"seekTo",this).call(this,b),!0){case this.isPlaying:this.__invokeMediaStateChangeTrap__(this,P.default.StateTimeUpdate),this.__invokeMediaStateChangeTrap__(this,P.default.StateSeeking),this.__invokeMediaStateChangeTrap__(this,P.default.StatePlaying);break;case this.isPaused:this.__invokeMediaStateChangeTrap__(this,P.default.StateTimeUpdate),this.__invokeMediaStateChangeTrap__(this,P.default.StateSeeking),this.__invokeMediaStateChangeTrap__(this,P.default.StatePaused)}}},{key:"dispatcherName",get:function(){return v.Name}}]),v}(P.default.SuperClass);x.default=o},37:function(H,x,u){function I(S,p){var O=document.createElementNS("http://www.w3.org/2000/svg",S);for(var h in p)p[h]!=null&&O.setAttribute(k(h),String(p[h]));return O}function k(S){switch(S){case"strokeWidth":S="stroke-width"}return S}u.r(x);var P={createSVGElement:function(S){return I("svg",S)},createGroupElement:function(S){return I("g",S)},createRectElement:function(S){return I("rect",S)},createCircleElement:function(S){return I("circle",S)},createLineElement:function(S){return I("line",S)},createPolygonElement:function(S){return I("polygon",S)}};x.default=P},4:function(H,x,u){H.exports=u(46)},41:function(H,x,u){function I(h,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}function k(h,c){return(k=Object.setPrototypeOf||function(e,f){return e.__proto__=f,e})(h,c)}function P(h){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var e,f=p(h);if(c){var _=p(this).constructor;e=Reflect.construct(f,arguments,_)}else e=f.apply(this,arguments);return S(this,e)}}function S(h,c){return!c||typeof c!="object"&&typeof c!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(h):c}function p(h){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(h)}u.r(x);var O=function(h){(function(g,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),a&&k(g,a)})(_,h);var c,e,f=P(_);function _(g){var a;return function(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(a=f.call(this,g)).__enterStates__=[],a.__leaveStates__=[],a}return c=_,(e=[{key:"dispatch",value:function(g,a){var o=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.__player__.musicMap;r.beats&&r.beats.forEach(function(s){s.prev&&g<s.prev.startTime&&a>=s.prev.startTime&&o.__enterStates__[s.prev.index]&&!o.__leaveStates__[s.prev.index]&&(t.leave&&t.leave({beat:s.prev}),o.__leaveStates__[s.prev.index]=!0),s&&g<s.startTime&&a>=s.startTime&&(o.__enterStates__[s.index]||o.__leaveStates__[s.index]||(t.enter&&t.enter({beat:s}),o.__enterStates__[s.index]=!0))})}},{key:"reset",value:function(){this.__enterStates__=[],this.__leaveStates__=[]}}])&&I(c.prototype,e),_}(u(13).default);x.default=O},411:function(H,x,u){u.r(x);var I=u(77),k=u(174),P=(u(185),u(6)),S=u(21),p=u(32),O=u(59),h=u(57),c=u(58),e=u(47),f=u(48),_=u(49),g=u(50),a=u(51),o=u(62),t=u(100),r=(u(2),u(1)),s=(u(5),u(12)),l={Player:I.default,SyncPlayer:k.default,Media:{SuperClass:P.default,Headless:p.default,HTMLMediaElement:O.default,NNVideo:h.default,YTVideo:c.default},Plugin:{SuperClass:S.default,Beat:e.default,Chord:f.default,Melody:_.default,Chorus:g.default,Variation:a.default,SongleSync:o.default,SongleWidget:t.default},SongleAPI:s.default,System:r.default},v=20;r.default.global.SW=r.default.global.SW||l,r.default.global.Songle=r.default.global.Songle||l,r.default.showDebugLog=!1,r.default.showErrorLog=!0,r.default.showLicense=!0,function b(){setTimeout(function(){r.default.global.SWAPIReady||v<=0||(v--,r.default.global.onSongleWidgetAPIReady&&(r.default.global.onSongleWidgetAPIReady(l),r.default.global.SWAPIReady=!0),r.default.global.onSongleAPIReady&&(r.default.global.onSongleAPIReady(l),r.default.global.SWAPIReady=!0),b())},500)}(),x.default=l},42:function(H,x,u){function I(h,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}function k(h,c){return(k=Object.setPrototypeOf||function(e,f){return e.__proto__=f,e})(h,c)}function P(h){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var e,f=p(h);if(c){var _=p(this).constructor;e=Reflect.construct(f,arguments,_)}else e=f.apply(this,arguments);return S(this,e)}}function S(h,c){return!c||typeof c!="object"&&typeof c!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(h):c}function p(h){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(h)}u.r(x);var O=function(h){(function(g,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),a&&k(g,a)})(_,h);var c,e,f=P(_);function _(g){var a;return function(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(a=f.call(this,g)).__enterStates__=[],a.__leaveStates__=[],a}return c=_,(e=[{key:"dispatch",value:function(g,a){var o=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.__player__.musicMap;r.chords&&r.chords.forEach(function(s){g<s.startTime+s.durationTime&&a>=s.startTime&&(s.prev&&(o.__leaveStates__[s.prev.index]||(o.__leaveStates__[s.prev.index]=!0,t.leave&&t.leave({chord:s.prev}))),s&&(o.__enterStates__[s.index]||(o.__enterStates__[s.index]=!0,t.enter&&t.enter({chord:s}))))})}},{key:"reset",value:function(){var g=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.__player__.musicMap;o.chords&&o.chords.forEach(function(t){g.__enterStates__[t.index]&&!g.__leaveStates__[t.index]&&a.leave&&a.leave({chord:t})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&I(c.prototype,e),_}(u(13).default);x.default=O},43:function(H,x,u){function I(h,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}function k(h,c){return(k=Object.setPrototypeOf||function(e,f){return e.__proto__=f,e})(h,c)}function P(h){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var e,f=p(h);if(c){var _=p(this).constructor;e=Reflect.construct(f,arguments,_)}else e=f.apply(this,arguments);return S(this,e)}}function S(h,c){return!c||typeof c!="object"&&typeof c!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(h):c}function p(h){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(h)}u.r(x);var O=function(h){(function(g,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),a&&k(g,a)})(_,h);var c,e,f=P(_);function _(g){var a;return function(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(a=f.call(this,g)).__enterStates__=[],a.__leaveStates__=[],a}return c=_,(e=[{key:"dispatch",value:function(g,a){var o=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.__player__.musicMap;r.melodies&&r.melodies.forEach(function(s){g<s.startTime+s.durationTime&&a>=s.startTime&&(s.prev&&(o.__leaveStates__[s.prev.index]||(o.__leaveStates__[s.prev.index]=!0,t.leave&&t.leave({melody:s.prev}))),s&&(o.__enterStates__[s.index]||(o.__enterStates__[s.index]=!0,t.enter&&t.enter({melody:s}))))})}},{key:"reset",value:function(){var g=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.__player__.musicMap;o.melodies&&o.melodies.forEach(function(t){g.__enterStates__[t.index]&&!g.__leaveStates__[t.index]&&a.leave&&a.leave({melody:t})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&I(c.prototype,e),_}(u(13).default);x.default=O},44:function(H,x,u){u.r(x);var I=u(13);function k(c,e){for(var f=0;f<e.length;f++){var _=e[f];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,_.key,_)}}function P(c,e){return(P=Object.setPrototypeOf||function(f,_){return f.__proto__=_,f})(c,e)}function S(c){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var f,_=O(c);if(e){var g=O(this).constructor;f=Reflect.construct(_,arguments,g)}else f=_.apply(this,arguments);return p(this,f)}}function p(c,e){return!e||typeof e!="object"&&typeof e!="function"?function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(c):e}function O(c){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(c)}var h=function(c){(function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&P(a,o)})(g,c);var e,f,_=S(g);function g(a){var o;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,g),(o=_.call(this,a)).__enterStates__=[],o.__leaveStates__=[],o}return e=g,(f=[{key:"dispatch",value:function(a,o){var t=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.__player__.musicMap;s.chorus&&s.chorus.forEach(function(l){l.items.forEach(function(v){a<v.startTime+v.durationTime&&o>=v.startTime?t.__invokeEnterTrap__(l,v,r):t.__invokeLeaveTrap__(l,v,r)})})}},{key:"reset",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.__invokeAllLeaveTrap__(a),this.__enterStates__=[],this.__leaveStates__=[]}},{key:"__getStateIndex__",value:function(a,o){return 16*a.index+o.index}},{key:"__invokeAllEnterTrap__",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.__player__.musicMap;t.chorus&&t.chorus.forEach(function(r){r.items.forEach(function(s){a.__invokeEnterTrap__(r,s,o)})})}},{key:"__invokeAllLeaveTrap__",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.__player__.musicMap;t.chorus&&t.chorus.forEach(function(r){r.items.forEach(function(s){a.__invokeLeaveTrap__(r,s,o)})})}},{key:"__invokeEnterTrap__",value:function(a,o){var t=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.__getStateIndex__(a,o);this.__enterStates__[s]||this.__leaveStates__[s]||(a.items.forEach(function(l){t.__invokeLeaveTrap__(a,l,r)}),r.enter&&r.enter({section:a,sectionItem:o}),this.__enterStates__[s]=!0)}},{key:"__invokeLeaveTrap__",value:function(a,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.__getStateIndex__(a,o);this.__enterStates__[r]&&!this.__leaveStates__[r]&&(t.leave&&t.leave({section:a,sectionItem:o}),this.__leaveStates__[r]=!0)}}])&&k(e.prototype,f),g}(I.default);x.default=h},45:function(H,x,u){function I(h,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}function k(h,c){return(k=Object.setPrototypeOf||function(e,f){return e.__proto__=f,e})(h,c)}function P(h){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var e,f=p(h);if(c){var _=p(this).constructor;e=Reflect.construct(f,arguments,_)}else e=f.apply(this,arguments);return S(this,e)}}function S(h,c){return!c||typeof c!="object"&&typeof c!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(h):c}function p(h){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(h)}u.r(x);var O=function(h){(function(g,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),a&&k(g,a)})(_,h);var c,e,f=P(_);function _(g){var a;return function(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(a=f.call(this,g)).__enterStates__=[],a.__leaveStates__=[],a}return c=_,(e=[{key:"dispatch",value:function(g,a){var o=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.__player__.musicMap;r.variations&&r.variations.forEach(function(s){g<s.startTime+s.durationTime&&a>=s.startTime&&(s.prev&&(o.__leaveStates__[s.prev.index]||(o.__leaveStates__[s.prev.index]=!0,t.leave&&t.leave({variation:s.prev}))),s&&(o.__enterStates__[s.index]||(o.__enterStates__[s.index]=!0,t.enter&&t.enter({variation:s}))))})}},{key:"reset",value:function(){var g=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.__player__.musicMap;o.variations&&o.variations.forEach(function(t){g.__enterStates__[t.index]&&!g.__leaveStates__[t.index]&&a.leave&&a.leave({variation:t})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&I(c.prototype,e),_}(u(13).default);x.default=O},46:function(H,x,u){var I=function(k){var P=Object.prototype,S=P.hasOwnProperty,p=typeof Symbol=="function"?Symbol:{},O=p.iterator||"@@iterator",h=p.asyncIterator||"@@asyncIterator",c=p.toStringTag||"@@toStringTag";function e(E,w,M){return Object.defineProperty(E,w,{value:M,enumerable:!0,configurable:!0,writable:!0}),E[w]}try{e({},"")}catch{e=function(w,M,m){return w[M]=m}}function f(E,w,M,m){var T=w&&w.prototype instanceof a?w:a,j=Object.create(T.prototype),L=new C(m||[]);return j._invoke=function(W,A,D){var z="suspendedStart";return function(B,U){if(z==="executing")throw new Error("Generator is already running");if(z==="completed"){if(B==="throw")throw U;return N()}for(D.method=B,D.arg=U;;){var J=D.delegate;if(J){var q=y(J,D);if(q){if(q===g)continue;return q}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(z==="suspendedStart")throw z="completed",D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);z="executing";var F=_(W,A,D);if(F.type==="normal"){if(z=D.done?"completed":"suspendedYield",F.arg===g)continue;return{value:F.arg,done:D.done}}F.type==="throw"&&(z="completed",D.method="throw",D.arg=F.arg)}}}(E,M,L),j}function _(E,w,M){try{return{type:"normal",arg:E.call(w,M)}}catch(m){return{type:"throw",arg:m}}}k.wrap=f;var g={};function a(){}function o(){}function t(){}var r={};r[O]=function(){return this};var s=Object.getPrototypeOf,l=s&&s(s(R([])));l&&l!==P&&S.call(l,O)&&(r=l);var v=t.prototype=a.prototype=Object.create(r);function b(E){["next","throw","return"].forEach(function(w){e(E,w,function(M){return this._invoke(w,M)})})}function d(E,w){var M;this._invoke=function(m,T){function j(){return new w(function(L,W){(function A(D,z,B,U){var J=_(E[D],E,z);if(J.type!=="throw"){var q=J.arg,F=q.value;return F&&typeof F=="object"&&S.call(F,"__await")?w.resolve(F.__await).then(function(G){A("next",G,B,U)},function(G){A("throw",G,B,U)}):w.resolve(F).then(function(G){q.value=G,B(q)},function(G){return A("throw",G,B,U)})}U(J.arg)})(m,T,L,W)})}return M=M?M.then(j,j):j()}}function y(E,w){var M=E.iterator[w.method];if(M===void 0){if(w.delegate=null,w.method==="throw"){if(E.iterator.return&&(w.method="return",w.arg=void 0,y(E,w),w.method==="throw"))return g;w.method="throw",w.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var m=_(M,E.iterator,w.arg);if(m.type==="throw")return w.method="throw",w.arg=m.arg,w.delegate=null,g;var T=m.arg;return T?T.done?(w[E.resultName]=T.value,w.next=E.nextLoc,w.method!=="return"&&(w.method="next",w.arg=void 0),w.delegate=null,g):T:(w.method="throw",w.arg=new TypeError("iterator result is not an object"),w.delegate=null,g)}function n(E){var w={tryLoc:E[0]};1 in E&&(w.catchLoc=E[1]),2 in E&&(w.finallyLoc=E[2],w.afterLoc=E[3]),this.tryEntries.push(w)}function i(E){var w=E.completion||{};w.type="normal",delete w.arg,E.completion=w}function C(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(n,this),this.reset(!0)}function R(E){if(E){var w=E[O];if(w)return w.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var M=-1,m=function T(){for(;++M<E.length;)if(S.call(E,M))return T.value=E[M],T.done=!1,T;return T.value=void 0,T.done=!0,T};return m.next=m}}return{next:N}}function N(){return{value:void 0,done:!0}}return o.prototype=v.constructor=t,t.constructor=o,o.displayName=e(t,c,"GeneratorFunction"),k.isGeneratorFunction=function(E){var w=typeof E=="function"&&E.constructor;return!!w&&(w===o||(w.displayName||w.name)==="GeneratorFunction")},k.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,t):(E.__proto__=t,e(E,c,"GeneratorFunction")),E.prototype=Object.create(v),E},k.awrap=function(E){return{__await:E}},b(d.prototype),d.prototype[h]=function(){return this},k.AsyncIterator=d,k.async=function(E,w,M,m,T){T===void 0&&(T=Promise);var j=new d(f(E,w,M,m),T);return k.isGeneratorFunction(w)?j:j.next().then(function(L){return L.done?L.value:j.next()})},b(v),e(v,c,"Generator"),v[O]=function(){return this},v.toString=function(){return"[object Generator]"},k.keys=function(E){var w=[];for(var M in E)w.push(M);return w.reverse(),function m(){for(;w.length;){var T=w.pop();if(T in E)return m.value=T,m.done=!1,m}return m.done=!0,m}},k.values=R,C.prototype={constructor:C,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(i),!E)for(var w in this)w.charAt(0)==="t"&&S.call(this,w)&&!isNaN(+w.slice(1))&&(this[w]=void 0)},stop:function(){this.done=!0;var E=this.tryEntries[0].completion;if(E.type==="throw")throw E.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var w=this;function M(A,D){return j.type="throw",j.arg=E,w.next=A,D&&(w.method="next",w.arg=void 0),!!D}for(var m=this.tryEntries.length-1;m>=0;--m){var T=this.tryEntries[m],j=T.completion;if(T.tryLoc==="root")return M("end");if(T.tryLoc<=this.prev){var L=S.call(T,"catchLoc"),W=S.call(T,"finallyLoc");if(L&&W){if(this.prev<T.catchLoc)return M(T.catchLoc,!0);if(this.prev<T.finallyLoc)return M(T.finallyLoc)}else if(L){if(this.prev<T.catchLoc)return M(T.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<T.finallyLoc)return M(T.finallyLoc)}}}},abrupt:function(E,w){for(var M=this.tryEntries.length-1;M>=0;--M){var m=this.tryEntries[M];if(m.tryLoc<=this.prev&&S.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var T=m;break}}T&&(E==="break"||E==="continue")&&T.tryLoc<=w&&w<=T.finallyLoc&&(T=null);var j=T?T.completion:{};return j.type=E,j.arg=w,T?(this.method="next",this.next=T.finallyLoc,g):this.complete(j)},complete:function(E,w){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&w&&(this.next=w),g},finish:function(E){for(var w=this.tryEntries.length-1;w>=0;--w){var M=this.tryEntries[w];if(M.finallyLoc===E)return this.complete(M.completion,M.afterLoc),i(M),g}},catch:function(E){for(var w=this.tryEntries.length-1;w>=0;--w){var M=this.tryEntries[w];if(M.tryLoc===E){var m=M.completion;if(m.type==="throw"){var T=m.arg;i(M)}return T}}throw new Error("illegal catch attempt")},delegateYield:function(E,w,M){return this.delegate={iterator:R(E),resultName:w,nextLoc:M},this.method==="next"&&(this.arg=void 0),g}},k}(H.exports);try{regeneratorRuntime=I}catch{Function("r","regeneratorRuntime = r")(I)}},47:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(15),S=u(41),p=u(14);u(2),u(12);function O(t,r,s,l,v,b,d){try{var y=t[b](d),n=y.value}catch(i){return void s(i)}y.done?r(n):Promise.resolve(n).then(l,v)}function h(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function c(t,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function e(t,r,s){return(e=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(l,v,b){var d=function(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=a(n))!==null;);return n}(l,v);if(d){var y=Object.getOwnPropertyDescriptor(d,v);return y.get?y.get.call(b):y.value}})(t,r,s||t)}function f(t,r){return(f=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(t,r)}function _(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var s,l=a(t);if(r){var v=a(this).constructor;s=Reflect.construct(l,arguments,v)}else s=l.apply(this,arguments);return g(this,s)}}function g(t,r){return!r||typeof r!="object"&&typeof r!="function"?function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var o=function(t){(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&f(n,i)})(y,t);var r,s,l,v,b,d=_(y);function y(){return h(this,y),d.apply(this,arguments)}return r=y,s=[{key:"initialize",value:function(n){var i=this;e(a(y.prototype),"initialize",this).call(this,n),n.seekToPrevBar=function(){var C=p.default.findPrevBar(n);C&&n.seekTo(C.start)},n.seekToNextBar=function(){var C=p.default.findNextBar(n);C&&n.seekTo(C.start)},this.on(["play","pause","mediaSeek","seek"],function(C){i.__resetBarLeaveTrap__(),i.__resetBeatLeaveTrap__(),i.__resetBarEnterTrap__(),i.__resetBeatEnterTrap__()}),function C(){i.mapTrapsHasNotData(["barEnter","barLeave","beatEnter","beatLeave"]).forEach(function(R){return R.data=new S.default(i.player)}),setTimeout(function(){i.player.isPlaying&&(i.__invokeBarLeaveTrap__(),i.__invokeBeatLeaveTrap__(),i.__invokeBarEnterTrap__(),i.__invokeBeatEnterTrap__()),C()},i.pollingInterval)}()}},{key:"mediaDidMount",value:(v=k.a.mark(function n(i){return k.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return e(a(y.prototype),"mediaDidMount",this).call(this,i),C.next=3,i.media.loadBeat();case 3:case"end":return C.stop()}},n,this)}),b=function(){var n=this,i=arguments;return new Promise(function(C,R){var N=v.apply(n,i);function E(M){O(N,C,R,E,w,"next",M)}function w(M){O(N,C,R,E,w,"throw",M)}E(void 0)})},function(n){return b.apply(this,arguments)})},{key:"__resetBarEnterTrap__",value:function(){this.mapTrapsHasAnyData("barEnter").forEach(function(n){return n.data.reset()})}},{key:"__resetBarLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("barLeave").forEach(function(i){return i.data.reset({leave:function(C){return n.__invokeTrap__(i,C)}})})}},{key:"__resetBeatEnterTrap__",value:function(){this.mapTrapsHasAnyData("beatEnter").forEach(function(n){return n.data.reset()})}},{key:"__resetBeatLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("beatLeave").forEach(function(i){return i.data.reset({leave:function(C){return n.__invokeTrap__(i,C)}})})}},{key:"__invokeBarEnterTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("barEnter").forEach(function(i){return i.data.find({enter:function(C){C.beat.number===1&&n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"__invokeBarLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("barLeave").forEach(function(i){return i.data.find({leave:function(C){C.beat.number===1&&n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"__invokeBeatEnterTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("beatEnter").forEach(function(i){return i.data.find({enter:function(C){return n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"__invokeBeatLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("beatLeave").forEach(function(i){return i.data.find({leave:function(C){return n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"dispatcherName",get:function(){return y.Name}}],l=[{key:"Name",get:function(){return"songle-api-plugin-beat"}},{key:"BarEnterTrapName",get:function(){return"barEnter"}},{key:"BarLeaveTrapName",get:function(){return"barLeave"}},{key:"BeatEnterTrapName",get:function(){return"beatEnter"}},{key:"BeatLeaveTrapName",get:function(){return"beatLeave"}}],s&&c(r.prototype,s),l&&c(r,l),y}(P.default);x.default=o},48:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(15),S=u(42);u(14),u(2),u(12);function p(o,t,r,s,l,v,b){try{var d=o[v](b),y=d.value}catch(n){return void r(n)}d.done?t(y):Promise.resolve(y).then(s,l)}function O(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function h(o,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,s.key,s)}}function c(o,t,r){return(c=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(s,l,v){var b=function(y,n){for(;!Object.prototype.hasOwnProperty.call(y,n)&&(y=g(y))!==null;);return y}(s,l);if(b){var d=Object.getOwnPropertyDescriptor(b,l);return d.get?d.get.call(v):d.value}})(o,t,r||o)}function e(o,t){return(e=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r})(o,t)}function f(o){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var r,s=g(o);if(t){var l=g(this).constructor;r=Reflect.construct(s,arguments,l)}else r=s.apply(this,arguments);return _(this,r)}}function _(o,t){return!t||typeof t!="object"&&typeof t!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(o):t}function g(o){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(o)}var a=function(o){(function(y,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(n&&n.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),n&&e(y,n)})(d,o);var t,r,s,l,v,b=f(d);function d(){return O(this,d),b.apply(this,arguments)}return t=d,r=[{key:"initialize",value:function(y){var n=this;c(g(d.prototype),"initialize",this).call(this,y),this.on(["play","pause","mediaSeek","seek"],function(i){n.__resetChordLeaveTrap__(),n.__resetChordEnterTrap__()}),function i(){n.mapTrapsHasNotData(["chordEnter","chordLeave"]).forEach(function(C){return C.data=new S.default(n.player)}),setTimeout(function(){n.player.isPlaying&&(n.__runChordLeaveTrap__(),n.__runChordEnterTrap__()),i()},n.pollingInterval)}()}},{key:"mediaDidMount",value:(l=k.a.mark(function y(n){return k.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c(g(d.prototype),"mediaDidMount",this).call(this,n),i.next=3,n.media.loadChord();case 3:case"end":return i.stop()}},y,this)}),v=function(){var y=this,n=arguments;return new Promise(function(i,C){var R=l.apply(y,n);function N(w){p(R,i,C,N,E,"next",w)}function E(w){p(R,i,C,N,E,"throw",w)}N(void 0)})},function(y){return v.apply(this,arguments)})},{key:"__resetChordEnterTrap__",value:function(){this.mapTrapsHasAnyData("chordEnter").forEach(function(y){return y.data.reset()})}},{key:"__resetChordLeaveTrap__",value:function(){var y=this;this.mapTrapsHasAnyData("chordLeave").forEach(function(n){return n.data.reset({leave:function(i){return y.__invokeTrap__(n,i)}})})}},{key:"__runChordEnterTrap__",value:function(){var y=this;this.mapTrapsHasAnyData("chordEnter").forEach(function(n){return n.data.find({enter:function(i){return y.__invokeTrap__(n,i)}},{offset:n.options.offset+y.offset})})}},{key:"__runChordLeaveTrap__",value:function(){var y=this;this.mapTrapsHasAnyData("chordLeave").forEach(function(n){return n.data.find({leave:function(i){return y.__invokeTrap__(n,i)}},{offset:n.options.offset+y.offset})})}},{key:"dispatcherName",get:function(){return d.Name}}],s=[{key:"Name",get:function(){return"songle-api-plugin-chord"}},{key:"ChordEnterTrapName",get:function(){return"chordEnter"}},{key:"ChordLeaveTrapName",get:function(){return"chordLeave"}}],r&&h(t.prototype,r),s&&h(t,s),d}(P.default);x.default=a},49:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(15),S=u(43);u(14),u(2),u(12);function p(o,t,r,s,l,v,b){try{var d=o[v](b),y=d.value}catch(n){return void r(n)}d.done?t(y):Promise.resolve(y).then(s,l)}function O(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function h(o,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,s.key,s)}}function c(o,t,r){return(c=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(s,l,v){var b=function(y,n){for(;!Object.prototype.hasOwnProperty.call(y,n)&&(y=g(y))!==null;);return y}(s,l);if(b){var d=Object.getOwnPropertyDescriptor(b,l);return d.get?d.get.call(v):d.value}})(o,t,r||o)}function e(o,t){return(e=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r})(o,t)}function f(o){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var r,s=g(o);if(t){var l=g(this).constructor;r=Reflect.construct(s,arguments,l)}else r=s.apply(this,arguments);return _(this,r)}}function _(o,t){return!t||typeof t!="object"&&typeof t!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(o):t}function g(o){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(o)}var a=function(o){(function(y,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(n&&n.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),n&&e(y,n)})(d,o);var t,r,s,l,v,b=f(d);function d(){return O(this,d),b.apply(this,arguments)}return t=d,r=[{key:"initialize",value:function(y){var n=this;c(g(d.prototype),"initialize",this).call(this,y),this.on(["play","pause","mediaSeek","seek"],function(i){n.__resetMelodyLeaveTrap__(),n.__resetMelodyEnterTrap__()}),function i(){n.mapTrapsHasNotData(["melodyEnter","melodyLeave"]).forEach(function(C){return C.data=new S.default(n.player)}),setTimeout(function(){n.player.isPlaying&&(n.__runMelodyLeaveTrap__(),n.__runMelodyEnterTrap__()),i()},n.pollingInterval)}()}},{key:"mediaDidMount",value:(l=k.a.mark(function y(n){return k.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c(g(d.prototype),"mediaDidMount",this).call(this,n),i.next=3,n.media.loadMelody();case 3:case"end":return i.stop()}},y,this)}),v=function(){var y=this,n=arguments;return new Promise(function(i,C){var R=l.apply(y,n);function N(w){p(R,i,C,N,E,"next",w)}function E(w){p(R,i,C,N,E,"throw",w)}N(void 0)})},function(y){return v.apply(this,arguments)})},{key:"__resetMelodyEnterTrap__",value:function(){this.mapTrapsHasAnyData("melodyEnter").forEach(function(y){return y.data.reset()})}},{key:"__resetMelodyLeaveTrap__",value:function(){var y=this;this.mapTrapsHasAnyData("melodyLeave").forEach(function(n){return n.data.reset({leave:function(i){return y.__invokeTrap__(n,i)}})})}},{key:"__runMelodyEnterTrap__",value:function(){var y=this;this.mapTrapsHasAnyData("melodyEnter").forEach(function(n){return n.data.find({enter:function(i){return y.__invokeTrap__(n,i)}},{offset:n.options.offset+y.offset})})}},{key:"__runMelodyLeaveTrap__",value:function(){var y=this;this.mapTrapsHasAnyData("melodyLeave").forEach(function(n){return n.data.find({leave:function(i){return y.__invokeTrap__(n,i)}},{offset:n.options.offset+y.offset})})}},{key:"dispatcherName",get:function(){return d.Name}}],s=[{key:"Name",get:function(){return"sw-plugin-melody"}},{key:"MelodyEnterTrapName",get:function(){return"melodyEnter"}},{key:"MelodyLeaveTrapName",get:function(){return"melodyLeave"}}],r&&h(t.prototype,r),s&&h(t,s),d}(P.default);x.default=a},5:function(H,x,u){function I(p,O){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(c,e){var f=h.method!=null?h.method:"GET",_=h.responseType!=null?h.responseType:"",g=new XMLHttpRequest;switch(g.addEventListener("abort",function(a){e(g)},!1),g.addEventListener("error",function(a){e(g)},!1),g.addEventListener("load",function(a){c(g)},!1),g.open(f,p,!0),g.responseType=_,f){case"GET":g.send();break;default:g.setRequestHeader("Content-Type","application/json"),g.send(JSON.stringify(O))}})}function k(p,O){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(c,e){I(p,O,{method:h.method,responseType:h.responseType}).then(function(f){var _=P(f);c(_)},function(f){var _=P(f);e(_)})})}function P(p){var O=p.responseText||p.response||"null";return JSON.parse(O)}u.r(x);var S={ajax:I,ajaxJSON:k,getJSON:function(p){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O.method="GET",k(p,null,O)},postJSON:function(p,O){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return h.method="POST",k(p,O,h)},putJSON:function(p,O){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return h.method="PUT",k(p,O,h)},deleteJSON:function(p,O){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return h.method="DELETE",k(p,O,h)}};x.default=S},50:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(15),S=u(44),p=u(14);u(2),u(12);function O(t,r,s,l,v,b,d){try{var y=t[b](d),n=y.value}catch(i){return void s(i)}y.done?r(n):Promise.resolve(n).then(l,v)}function h(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function c(t,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function e(t,r,s){return(e=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(l,v,b){var d=function(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=a(n))!==null;);return n}(l,v);if(d){var y=Object.getOwnPropertyDescriptor(d,v);return y.get?y.get.call(b):y.value}})(t,r,s||t)}function f(t,r){return(f=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(t,r)}function _(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var s,l=a(t);if(r){var v=a(this).constructor;s=Reflect.construct(l,arguments,v)}else s=l.apply(this,arguments);return g(this,s)}}function g(t,r){return!r||typeof r!="object"&&typeof r!="function"?function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var o=function(t){(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&f(n,i)})(y,t);var r,s,l,v,b,d=_(y);function y(){return h(this,y),d.apply(this,arguments)}return r=y,s=[{key:"initialize",value:function(n){var i=this;e(a(y.prototype),"initialize",this).call(this,n),n.seekToPrevChorusSection=function(){var C=p.default.findPrevRepeatedSectionItem(n,{chorusOnly:!0});C&&n.seekTo(C.start)},n.seekToPrevChorusSectionItem=n.seekToPrevChorusSection,n.seekToNextChorusSection=function(){var C=p.default.findNextRepeatedSectionItem(n,{chorusOnly:!0});C&&n.seekTo(C.start)},n.seekToNextChorusSectionItem=n.seekToNextChorusSection,n.seekToPrevRepeatedSection=function(){var C=p.default.findPrevRepeatedSectionItem(n);C&&n.seekTo(C.start)},n.seekToPrevRepeatedSectionItem=n.seekToPrevRepeatedSection,n.seekToNextRepeatedSection=function(){var C=p.default.findNextRepeatedSectionItem(n);C&&n.seekTo(C.start)},n.seekToNextRepeatedSectionItem=n.seekToNextRepeatedSection,this.on(["play","pause","mediaSeek","seek"],function(C){i.__resetChorusSectionLeaveTrap__(),i.__resetChorusSectionEnterTrap__(),i.__resetRepeatedSectionLeaveTrap__(),i.__resetRepeatedSectionEnterTrap__()}),function C(){i.mapTrapsHasNotData(["chorusSectionEnter","chorusSectionLeave","repeatedSectionEnter","repeatedSectionLeave"]).forEach(function(R){return R.data=new S.default(i.player)}),setTimeout(function(){i.player.isPlaying&&(i.__runChorusSectionLeaveTrap__(),i.__runChorusSectionEnterTrap__(),i.__runRepeatedSectionLeaveTrap__(),i.__runRepeatedSectionEnterTrap__()),C()},i.pollingInterval)}()}},{key:"mediaDidMount",value:(v=k.a.mark(function n(i){return k.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return e(a(y.prototype),"mediaDidMount",this).call(this,i),C.next=3,i.media.loadChorus();case 3:case"end":return C.stop()}},n,this)}),b=function(){var n=this,i=arguments;return new Promise(function(C,R){var N=v.apply(n,i);function E(M){O(N,C,R,E,w,"next",M)}function w(M){O(N,C,R,E,w,"throw",M)}E(void 0)})},function(n){return b.apply(this,arguments)})},{key:"__resetChorusSectionEnterTrap__",value:function(){this.mapTrapsHasAnyData("chorusSectionEnter").forEach(function(n){return n.data.reset()})}},{key:"__resetChorusSectionLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("chorusSectionLeave").forEach(function(i){return i.data.reset({leave:function(C){C.section.isChorus&&n.__invokeTrap__(i,C)}})})}},{key:"__resetRepeatedSectionEnterTrap__",value:function(){this.mapTrapsHasAnyData("repeatedSectionEnter").forEach(function(n){return n.data.reset()})}},{key:"__resetRepeatedSectionLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("repeatedSectionLeave").forEach(function(i){return i.data.reset({leave:function(C){return n.__invokeTrap__(i,C)}})})}},{key:"__runChorusSectionEnterTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("chorusSectionEnter").forEach(function(i){return i.data.find({enter:function(C){C.section.isChorus&&n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"__runChorusSectionLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("chorusSectionLeave").forEach(function(i){return i.data.find({leave:function(C){C.section.isChorus&&n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"__runRepeatedSectionEnterTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("repeatedSectionEnter").forEach(function(i){return i.data.find({enter:function(C){return n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"__runRepeatedSectionLeaveTrap__",value:function(){var n=this;this.mapTrapsHasAnyData("repeatedSectionLeave").forEach(function(i){return i.data.find({leave:function(C){return n.__invokeTrap__(i,C)}},{offset:i.options.offset+n.offset})})}},{key:"dispatcherName",get:function(){return y.Name}}],l=[{key:"Name",get:function(){return"sw-plugin-chorus"}},{key:"ChorusSectionEnterTrapName",get:function(){return"chorusSectionEnter"}},{key:"ChorusSectionLeaveTrapName",get:function(){return"chorusSectionLeave"}},{key:"RepeatedSectionEnterTrapName",get:function(){return"repeatedSectionEnter"}},{key:"RepeatedSectionLeaveTrapName",get:function(){return"repeatedSectionLeave"}}],s&&c(r.prototype,s),l&&c(r,l),y}(P.default);x.default=o},51:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(15),S=u(45);u(14),u(2),u(12);function p(t,r,s,l,v,b,d){try{var y=t[b](d),n=y.value}catch(i){return void s(i)}y.done?r(n):Promise.resolve(n).then(l,v)}function O(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r,s){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(l,v,b){var d=function(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=a(n))!==null;);return n}(l,v);if(d){var y=Object.getOwnPropertyDescriptor(d,v);return y.get?y.get.call(b):y.value}})(t,r,s||t)}function c(t,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function e(t,r,s){return r&&c(t.prototype,r),s&&c(t,s),t}function f(t,r){return(f=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(t,r)}function _(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var s,l=a(t);if(r){var v=a(this).constructor;s=Reflect.construct(l,arguments,v)}else s=l.apply(this,arguments);return g(this,s)}}function g(t,r){return!r||typeof r!="object"&&typeof r!="function"?function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var o=function(t){(function(b,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),d&&f(b,d)})(v,t);var r,s,l=_(v);function v(){var b,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return O(this,v),(b=l.call(this,d)).__groupCount__=d.groupCount!=null?d.groupCount:2,b.__groupCount__<2&&(b.__groupCount__=2),b.__groupCount__>10&&(b.__groupCount__=10),b}return e(v,null,[{key:"Name",get:function(){return"sw-plugin-variation"}},{key:"MinGroupCount",get:function(){return 2}},{key:"MaxGroupCount",get:function(){return 10}},{key:"VariationEnterTrapName",get:function(){return"variationEnter"}},{key:"VariationLeaveTrapName",get:function(){return"variationLeave"}}]),e(v,[{key:"initialize",value:function(b){var d=this;h(a(v.prototype),"initialize",this).call(this,b),this.on(["play","pause","mediaSeek","seek"],function(y){d.__resetVariationLeaveTrap__(),d.__resetVariationEnterTrap__()}),function y(){d.mapTrapsHasNotData(["variationEnter","variationLeave"]).forEach(function(n){return n.data=new S.default(d.player)}),setTimeout(function(){d.player.isPlaying&&(d.__runVariationLeaveTrap__(),d.__runVariationEnterTrap__()),y()},d.pollingInterval)}()}},{key:"mediaDidMount",value:(r=k.a.mark(function b(d){return k.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return h(a(v.prototype),"mediaDidMount",this).call(this,d),y.next=3,d.media.loadVariation();case 3:case"end":return y.stop()}},b,this)}),s=function(){var b=this,d=arguments;return new Promise(function(y,n){var i=r.apply(b,d);function C(N){p(i,y,n,C,R,"next",N)}function R(N){p(i,y,n,C,R,"throw",N)}C(void 0)})},function(b){return s.apply(this,arguments)})},{key:"__resetVariationEnterTrap__",value:function(){this.mapTrapsHasAnyData("variationEnter").forEach(function(b){return b.data.reset()})}},{key:"__resetVariationLeaveTrap__",value:function(){var b=this;this.mapTrapsHasAnyData("variationLeave").forEach(function(d){return d.data.reset({leave:function(y){return b.__invokeTrap__(d,y)}})})}},{key:"__runVariationEnterTrap__",value:function(){var b=this;this.mapTrapsHasAnyData("variationEnter").forEach(function(d){return d.data.find({enter:function(y){return b.__invokeTrap__(d,y)}},{offset:d.options.offset+b.offset})})}},{key:"__runVariationLeaveTrap__",value:function(){var b=this;this.mapTrapsHasAnyData("variationLeave").forEach(function(d){return d.data.find({leave:function(y){return b.__invokeTrap__(d,y)}},{offset:d.options.offset+b.offset})})}},{key:"dispatcherName",get:function(){return v.Name}}]),v}(P.default);x.default=o},52:function(H,x,u){u.r(x);var I=u(5),k=u(1),P={getClock:function(S){return new Promise(function(p,O){var h=S.accessToken,c=[];c.push("syntax=camelcase"),I.default.getJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(h,"/clock.json?").concat(c.join("&"))).then(function(e){var f=e.meta,_=e.data;return f.status!=200?O(e):p(_.attributes.time)},function(e){return O(e)})})}};x.default=P},53:function(H,x,u){u.r(x);var I=u(5),k=u(1),P={createHistory:function(S){return new Promise(function(p,O){var h={};h.stage_id=S.stageId,h.node_id=S.nodeId,h.is_master=S.isMaster,h.is_slave=S.isSalve,h.referer=k.default.referer,h.user_agent=k.default.userAgent,I.default.postJSON("".concat(k.default.defaultLogServerEndpoint,"/songle-api.stage-logs"),h).then(function(c){return p(c)},function(c){return O(c)})})}};x.default=P},54:function(H,x,u){u.r(x);var I=u(5),k=u(1),P={getMessage:function(S){return new Promise(function(p,O){var h=S.accessToken,c=[];c.push("syntax=camelcase"),I.default.getJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(h,"/message.json?").concat(c.join("&"))).then(function(e){var f=e.meta,_=e.data;return f.status!=200?O(e):p(_)},function(e){return O(e)})})},updateMessage:function(S,p){return new Promise(function(O,h){var c=S.accessToken,e=S.secretToken,f={syntax:"camelcase"};f.access_token=c,f.secret_token=e,f.data=p,I.default.putJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(c,"/message.json"),f).then(function(_){var g=_.meta,a=_.data;return g.status!=200?h(_):O(a)},function(_){return h(_)})})}};x.default=P},55:function(H,x,u){u.r(x);var I=u(5),k=u(1);function P(p){var O=p.map(function(h){var c=h.attributes;return Object.defineProperties(c,{relativeStartTime:{get:function(){return h.attributes.relativeStartTimeMs}},relativeEndTime:{get:function(){return h.attributes.relativeEndTimeMs}},durationTime:{get:function(){return h.attributes.durationTimeMs}},startTime:{get:function(){return h.attributes.relativeStartTimeMs}},endTime:{get:function(){return h.attributes.relativeEndTimeMs}},mediaRelativeStartTime:{get:function(){return h.attributes.mediaRelativeStartTimeMs}},mediaRelativeEndTime:{get:function(){return h.attributes.mediaRelativeEndTimeMs}},mediaDurationTime:{get:function(){return h.attributes.mediaDurationTimeMs}},mediaStartTime:{get:function(){return h.attributes.relativeStartTimeMs+h.attributes.mediaRelativeStartTimeMs}},mediaEndTime:{get:function(){return h.attributes.relativeEndTimeMs+h.attributes.mediaRelativeEndTimeMs}}}),c});return O.forEach(function(h,c){Object.defineProperties(h,{prev:{get:function(){return O[c-1]||null}},next:{get:function(){return O[c+1]||null}}})}),O.sort(function(h,c){return h.index-c.index})}var S={getPlaylist:function(p){return new Promise(function(O,h){var c=p.accessToken,e=[];e.push("syntax=camelcase"),I.default.getJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(c,"/playlist.json?").concat(e.join("&"))).then(function(f){var _=f.meta,g=f.data;return _.status!=200?h(f):O(P(g))},function(f){return h(f)})})},createPlaylist:function(p,O){return new Promise(function(h,c){var e=p.accessToken,f=p.secretToken,_={syntax:"camelcase"};_.access_token=e,_.secret_token=f,_.items=O,I.default.postJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(e,"/playlist.json"),_).then(function(g){var a=g.meta,o=g.data;return a.status!=200?c(g):h(P(o))},function(g){return c(g)})})},deletePlaylist:function(p){return new Promise(function(O,h){var c=p.accessToken,e=p.secretToken,f={syntax:"camelcase"};f.access_token=c,f.secret_token=e,I.default.deleteJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(c,"/playlist.json"),f).then(function(_){var g=_.meta,a=_.data;return g.status!=200?h(_):O(P(a))},function(_){return h(_)})})}};x.default=S},56:function(H,x,u){u.r(x);var I=u(5),k=u(1),P={getStage:function(S){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(O,h){var c=S.accessToken,e=p.nodeTimeoutSec!=null?p.nodeTimeoutSec:S.nodeTimeoutSec,f=[];f.push("syntax=camelcase"),e!=null&&f.push("node_timeout_sec="+e),I.default.getJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(c,".json?").concat(f.join("&"))).then(function(_){var g=_.meta,a=_.data;return g.status!=200?h(_):O(a)},function(_){return h(_)})})},updateStage:function(S){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(O,h){var c=S.accessToken,e=S.secretToken,f=p.absoluteStartTime!=null?p.absoluteStartTime:null,_=p.absolutePauseTime!=null?p.absolutePauseTime:null,g=p.stateId!=null?p.stateId:null,a=p.nodeTimeoutSec!=null?p.nodeTimeoutSec:S.nodeTimeoutSec,o={syntax:"camelcase"};o.access_token=c,o.secret_token=e,f!=null&&(o.absolute_start_time_ms=f),_!=null&&(o.absolute_pause_time_ms=_),g!=null&&(o.state_id=g),a!=null&&(o.node_timeout_sec=a),I.default.putJSON("".concat(k.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(c,".json"),o).then(function(t){var r=t.meta,s=t.data;return r.status!=200?h(t):O(s)},function(t){return h(t)})})}};x.default=P},57:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(6);function S(a,o,t,r,s,l,v){try{var b=a[l](v),d=b.value}catch(y){return void t(y)}b.done?o(d):Promise.resolve(d).then(r,s)}function p(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function O(a,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function h(a,o,t){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(r,s,l){var v=function(d,y){for(;!Object.prototype.hasOwnProperty.call(d,y)&&(d=_(d))!==null;);return d}(r,s);if(v){var b=Object.getOwnPropertyDescriptor(v,s);return b.get?b.get.call(l):b.value}})(a,o,t||a)}function c(a,o){return(c=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(a,o)}function e(a){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var t,r=_(a);if(o){var s=_(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return f(this,t)}}function f(a,o){return!o||typeof o!="object"&&typeof o!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a):o}function _(a){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(a)}var g=function(a){(function(d,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(y&&y.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),y&&c(d,y)})(b,a);var o,t,r,s,l,v=e(b);function b(){return p(this,b),v.apply(this,arguments)}return o=b,t=[{key:"initialize",value:(s=k.a.mark(function d(y){var n=this;return k.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.player==null){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,h(_(b.prototype),"initialize",this).call(this,y);case 4:this.originalPlayer.addEventListener("statusChange",function(C){switch(n.__invokeMediaStateChangeTrap__(n,P.default.StateTimeUpdate),C.playerStatus<<4|C.seekStatus<<0){case 32:n.__invokeMediaStateChangeTrap__(n,P.default.StatePlaying);break;case 48:if(n.isSeeking)return;n.__invokeMediaStateChangeTrap__(n,P.default.StatePaused);break;case 50:n.__invokeMediaStateChangeTrap__(n,P.default.StateSeeking);break;case 64:n.__invokeMediaStateChangeTrap__(n,P.default.StateFinished)}});case 5:case"end":return i.stop()}},d,this)}),l=function(){var d=this,y=arguments;return new Promise(function(n,i){var C=s.apply(d,y);function R(E){S(C,n,i,R,N,"next",E)}function N(E){S(C,n,i,R,N,"throw",E)}R(void 0)})},function(d){return l.apply(this,arguments)})},{key:"dispose",value:function(){h(_(b.prototype),"dispose",this).call(this),this.originalPlayer.dispose()}},{key:"activate",value:function(){var d=this;return new Promise(function(y,n){d.__play__(),setTimeout(function(){return d.__seekTo__(0),d.__pause__(),y()},500)})}},{key:"play",value:function(){this.isPlaying||this.__play__()}},{key:"pause",value:function(){this.isPaused||this.__pause__()}},{key:"stop",value:function(){this.__seekTo__(0),this.__pause__()}},{key:"seekTo",value:function(d){h(_(b.prototype),"seekTo",this).call(this,d),this.__seekTo__(d)}},{key:"__play__",value:function(){this.originalPlayer.play()}},{key:"__pause__",value:function(){this.originalPlayer.pause()}},{key:"__seekTo__",value:function(d){this.originalPlayer.currentTime(d)}},{key:"dispatcherName",get:function(){return b.Name}},{key:"originalPositionTime",get:function(){return this.originalPlayer.currentTime()||0}},{key:"muted",get:function(){return this.originalPlayer.muted()},set:function(d){this.originalPlayer.muted(!!d)}},{key:"volume",get:function(){return 100*this.originalPlayer.volume()},set:function(d){var y=d/100;return y<0?this.originalPlayer.volume(0):y>1?this.originalPlayer.volume(1):void this.originalPlayer.volume(y)}}],r=[{key:"Name",get:function(){return"songle-api-nn-media"}}],t&&O(o.prototype,t),r&&O(o,r),b}(P.default.SuperClass);x.default=g},58:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(6);function S(a,o,t,r,s,l,v){try{var b=a[l](v),d=b.value}catch(y){return void t(y)}b.done?o(d):Promise.resolve(d).then(r,s)}function p(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function O(a,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function h(a,o,t){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(r,s,l){var v=function(d,y){for(;!Object.prototype.hasOwnProperty.call(d,y)&&(d=_(d))!==null;);return d}(r,s);if(v){var b=Object.getOwnPropertyDescriptor(v,s);return b.get?b.get.call(l):b.value}})(a,o,t||a)}function c(a,o){return(c=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(a,o)}function e(a){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var t,r=_(a);if(o){var s=_(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return f(this,t)}}function f(a,o){return!o||typeof o!="object"&&typeof o!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a):o}function _(a){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(a)}var g=function(a){(function(d,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(y&&y.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),y&&c(d,y)})(b,a);var o,t,r,s,l,v=e(b);function b(){return p(this,b),v.apply(this,arguments)}return o=b,t=[{key:"initialize",value:(s=k.a.mark(function d(y){var n=this;return k.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.player==null){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,h(_(b.prototype),"initialize",this).call(this,y);case 4:this.originalPlayer.addEventListener("onStateChange",function(C){switch(n.__invokeMediaStateChangeTrap__(n,P.default.StateTimeUpdate),C.data){case 1:n.__invokeMediaStateChangeTrap__(n,P.default.StatePlaying);break;case 2:n.__invokeMediaStateChangeTrap__(n,P.default.StatePaused);break;case 3:n.__invokeMediaStateChangeTrap__(n,P.default.StateSeeking);break;case 0:n.__invokeMediaStateChangeTrap__(n,P.default.StateFinished)}});case 5:case"end":return i.stop()}},d,this)}),l=function(){var d=this,y=arguments;return new Promise(function(n,i){var C=s.apply(d,y);function R(E){S(C,n,i,R,N,"next",E)}function N(E){S(C,n,i,R,N,"throw",E)}R(void 0)})},function(d){return l.apply(this,arguments)})},{key:"dispose",value:function(){h(_(b.prototype),"dispose",this).call(this),this.originalPlayer.destroy()}},{key:"activate",value:function(){var d=this;return new Promise(function(y,n){d.__play__(),setTimeout(function(){return d.__seekTo__(0),d.__pause__(),y()},500)})}},{key:"play",value:function(){this.isPlaying||this.__play__()}},{key:"pause",value:function(){this.isPaused||this.__pause__()}},{key:"stop",value:function(){this.__seekTo__(0),this.__pause__()}},{key:"seekTo",value:function(d){h(_(b.prototype),"seekTo",this).call(this,d),this.__seekTo__(d)}},{key:"__play__",value:function(){this.originalPlayer.playVideo()}},{key:"__pause__",value:function(){this.originalPlayer.pauseVideo()}},{key:"__seekTo__",value:function(d){this.originalPlayer.seekTo(d/1e3)}},{key:"dispatcherName",get:function(){return b.Name}},{key:"originalPositionTime",get:function(){return 1e3*this.originalPlayer.getCurrentTime()}},{key:"muted",get:function(){return this.originalPlayer.isMuted()},set:function(d){d?this.originalPlayer.mute():this.originalPlayer.unMute()}},{key:"volume",get:function(){return this.originalPlayer.getVolume()},set:function(d){var y=d;return y<0?this.originalPlayer.setVolume(0):y>100?this.originalPlayer.setVolume(100):void this.originalPlayer.setVolume(y)}}],r=[{key:"Name",get:function(){return"songle-api-yt-media"}}],t&&O(o.prototype,t),r&&O(o,r),b}(P.default.SuperClass);x.default=g},59:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(6);function S(a,o,t,r,s,l,v){try{var b=a[l](v),d=b.value}catch(y){return void t(y)}b.done?o(d):Promise.resolve(d).then(r,s)}function p(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function O(a,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function h(a,o,t){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(r,s,l){var v=function(d,y){for(;!Object.prototype.hasOwnProperty.call(d,y)&&(d=_(d))!==null;);return d}(r,s);if(v){var b=Object.getOwnPropertyDescriptor(v,s);return b.get?b.get.call(l):b.value}})(a,o,t||a)}function c(a,o){return(c=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(a,o)}function e(a){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var t,r=_(a);if(o){var s=_(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return f(this,t)}}function f(a,o){return!o||typeof o!="object"&&typeof o!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a):o}function _(a){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(a)}var g=function(a){(function(d,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(y&&y.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),y&&c(d,y)})(b,a);var o,t,r,s,l,v=e(b);function b(){return p(this,b),v.apply(this,arguments)}return o=b,t=[{key:"initialize",value:(s=k.a.mark(function d(y){var n=this;return k.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.player==null){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,h(_(b.prototype),"initialize",this).call(this,y);case 4:this.originalPlayer.addEventListener("play",function(C){n.__invokeMediaStateChangeTrap__(n,P.default.StatePlaying)}),this.originalPlayer.addEventListener("pause",function(C){n.__invokeMediaStateChangeTrap__(n,P.default.StatePaused)}),this.originalPlayer.addEventListener("seeking",function(C){n.__invokeMediaStateChangeTrap__(n,P.default.StateSeeking)}),this.originalPlayer.addEventListener("ended",function(C){n.__invokeMediaStateChangeTrap__(n,P.default.StateFinished)}),this.originalPlayer.addEventListener("timeupdate",function(C){n.__invokeMediaStateChangeTrap__(n,P.default.StateTimeUpdate)});case 9:case"end":return i.stop()}},d,this)}),l=function(){var d=this,y=arguments;return new Promise(function(n,i){var C=s.apply(d,y);function R(E){S(C,n,i,R,N,"next",E)}function N(E){S(C,n,i,R,N,"throw",E)}R(void 0)})},function(d){return l.apply(this,arguments)})},{key:"dispose",value:function(){h(_(b.prototype),"dispose",this).call(this),this.originalPlayer.remove()}},{key:"activate",value:function(){var d=this;return new Promise(function(y,n){d.__play__(),setTimeout(function(){return d.__seekTo__(0),d.__pause__(),y()},500)})}},{key:"play",value:function(){this.isPlaying||this.__play__()}},{key:"pause",value:function(){this.isPaused||this.__pause__()}},{key:"stop",value:function(){this.__seekTo__(0),this.__pause__()}},{key:"seekTo",value:function(d){h(_(b.prototype),"seekTo",this).call(this,d),this.__seekTo__(d)}},{key:"__play__",value:function(){this.originalPlayer.play()}},{key:"__pause__",value:function(){this.originalPlayer.pause()}},{key:"__seekTo__",value:function(d){this.originalPlayer.currentTime=d/1e3}},{key:"dispatcherName",get:function(){return b.Name}},{key:"originalPositionTime",get:function(){return 1e3*this.originalPlayer.currentTime}},{key:"muted",get:function(){return this.originalPlayer.muted},set:function(d){this.originalPlayer.muted=!!d}},{key:"volume",get:function(){return 100*this.originalPlayer.volume},set:function(d){var y=d/100;return y<0?this.originalPlayer.volume=0:y>1?this.originalPlayer.volume=1:void(this.originalPlayer.volume=y)}}],r=[{key:"Name",get:function(){return"songle-api-html-media-element-media"}}],t&&O(o.prototype,t),r&&O(o,r),b}(P.default.SuperClass);x.default=g},6:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(19),S=u(47),p=u(48),O=u(49),h=u(50),c=u(51),e=u(2),f=u(1),_=u(12);function g(y,n,i,C,R,N,E){try{var w=y[N](E),M=w.value}catch(m){return void i(m)}w.done?n(M):Promise.resolve(M).then(C,R)}function a(y){return function(){var n=this,i=arguments;return new Promise(function(C,R){var N=y.apply(n,i);function E(M){g(N,C,R,E,w,"next",M)}function w(M){g(N,C,R,E,w,"throw",M)}E(void 0)})}}function o(y,n,i){return(o=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(C,R,N){var E=function(M,m){for(;!Object.prototype.hasOwnProperty.call(M,m)&&(M=b(M))!==null;);return M}(C,R);if(E){var w=Object.getOwnPropertyDescriptor(E,R);return w.get?w.get.call(N):w.value}})(y,n,i||y)}function t(y,n){for(var i=0;i<n.length;i++){var C=n[i];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,C.key,C)}}function r(y,n,i){return n&&t(y.prototype,n),i&&t(y,i),y}function s(y,n){return(s=Object.setPrototypeOf||function(i,C){return i.__proto__=C,i})(y,n)}function l(y){var n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var i,C=b(y);if(n){var R=b(this).constructor;i=Reflect.construct(C,arguments,R)}else i=C.apply(this,arguments);return v(this,i)}}function v(y,n){return!n||typeof n!="object"&&typeof n!="function"?function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(y):n}function b(y){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(y)}var d={DefaultStateReady:!1,DefaultStatePlaying:!1,DefaultStatePaused:!0,DefaultStateSeeking:!1,StateReady:0,StatePlaying:1,StatePaused:2,StateSeeking:3,StateFinished:4,StateTimeUpdate:5,SuperClass:function(y){(function(T,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(j&&j.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),j&&s(T,j)})(m,y);var n,i,C,R,N,E,w,M=l(m);function m(T,j,L){var W;return function(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}(this,m),(W=M.call(this)).__stateIsReady__=!1,W.__stateIsPlaying__=!1,W.__stateIsPaused__=!0,W.__stateIsSeeking__=!1,W.__seekTimeHistories__=[],W.__adjustedTime__=0,W.__positionTime__=0,W.__musicMap__={},W.__element__=T,W.__originalPlayer__=j,W.__songleSong__=L,W.__sourceUrl__=f.default.typeOf(L)=="string"?L:L.attributes.permalink,W}return r(m,null,[{key:"Name",get:function(){return"media"}},{key:"Type",get:function(){return"media"}}]),r(m,[{key:"initialize",value:(w=a(k.a.mark(function T(j){var L,W,A,D=this;return k.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(this.player==null){z.next=2;break}return z.abrupt("return");case 2:return o(b(m.prototype),"initialize",this).call(this,j),L=0,W=0,A=0,this.on("mediaStateChange",function(B){switch(B.data.mediaStateId){case 1:e.default.debug("Media state change to 'playing'"),W=f.default.currentClockTime,A=L==0?0:W-L,D.__seekTimeHistories__.push(A),D.isMounted&&D.player.invokeTrap("mediaSeek",{target:B.target,data:{positionTime:D.originalPositionTime,seekTime:A}}),L=0,W=0,A=0,D.isMounted&&D.isPaused&&D.player.invokeTrap("mediaPlay",{target:B.target}),D.__setMediaState__(1);break;case 2:e.default.debug("Media state change to 'paused'"),W=f.default.currentClockTime,A=L==0?0:W-L,D.__seekTimeHistories__.push(A),D.isMounted&&D.player.invokeTrap("mediaSeek",{target:B.target,data:{positionTime:D.originalPositionTime,seekTime:A}}),L=0,W=0,A=0,D.isMounted&&!D.isPaused&&D.player.invokeTrap("mediaPause",{target:B.target}),D.__setMediaState__(2);break;case 3:e.default.debug("Media state change to 'seeking'"),L=f.default.currentClockTime,D.__setMediaState__(3);break;case 4:e.default.debug("Media state change to 'finished'"),D.isMounted&&D.player.invokeTrap("mediaFinish",{target:B.target}),D.stop();break;case 5:D.__seekMediaTo__(D.originalPositionTime);break;default:e.default.error("Unknown media state (ID: ".concat(B.data.mediaStateId,")"))}}),this.on("mediaReady",function(B){e.default.debug("Invoke 'mediaReady'",B.data),D.player.invokeTrap("ready",B)}),this.on("mediaPlay",function(B){e.default.debug("Invoke 'mediaPlay'",B.data),D.player.invokeTrap("play",B)}),this.on("mediaPause",function(B){e.default.debug("Invoke 'mediaPause'",B.data),D.player.invokeTrap("pause",B)}),this.on("mediaSeek",function(B){e.default.debug("Invoke 'mediaSeek'",B.data)}),this.on("mediaFinish",function(B){e.default.debug("Invoke 'mediaFinish'",B.data),D.player.invokeTrap("finish",B)}),this.on("seek",function(B){e.default.debug("Invoke 'seek'",B.data),D.seekTo(B.data.positionTime)}),[{source:"originalDurationTime",target:"originalDuration",warning:!0},{source:"originalPositionTime",target:"originalPosition",warning:!0},{source:"durationTime",target:"duration",warning:!0},{source:"positionTime",target:"position",warning:!0}].forEach(function(B){Object.defineProperty(D,B.target,{get:function(){return B.warning&&e.default.warn("'Media.".concat(B.target,"' is deprecated API, please use 'Media.").concat(B.source,"'")),D[B.source]}})}),z.next=17,Promise.all([this.loadBeat(),this.loadChord(),this.loadMelody(),this.loadChorus(),this.loadVariation()]);case 17:case"end":return z.stop()}},T,this)})),function(T){return w.apply(this,arguments)})},{key:"dispose",value:(E=a(k.a.mark(function T(){return k.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:this.element!=null&&this.element.remove();case 1:case"end":return j.stop()}},T,this)})),function(){return E.apply(this,arguments)})},{key:"loadBeat",value:(N=a(k.a.mark(function T(){var j,L,W=arguments;return k.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(j=W.length>0&&W[0]!==void 0?W[0]:{},this.player.hasPlugin(S.default.Name)){A.next=3;break}return A.abrupt("return");case 3:if(this.musicMap.beats==null){A.next=5;break}return A.abrupt("return");case 5:return A.prev=5,A.next=8,_.BeatAPI.get(this.sourceUrl,j);case 8:L=A.sent,Object.defineProperties(this.__musicMap__,{beatRevisionId:{get:function(){return L.revisionId}},beats:{get:function(){return L.data}}}),A.next=14;break;case 12:A.prev=12,A.t0=A.catch(5);case 14:case"end":return A.stop()}},T,this,[[5,12]])})),function(){return N.apply(this,arguments)})},{key:"loadChord",value:(R=a(k.a.mark(function T(){var j,L,W=arguments;return k.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(j=W.length>0&&W[0]!==void 0?W[0]:{},this.player.hasPlugin(p.default.Name)){A.next=3;break}return A.abrupt("return");case 3:if(this.musicMap.chords==null){A.next=5;break}return A.abrupt("return");case 5:return A.prev=5,A.next=8,_.ChordAPI.get(this.sourceUrl,j);case 8:L=A.sent,Object.defineProperties(this.__musicMap__,{chordRevisionId:{get:function(){return L.revisionId}},chords:{get:function(){return L.data}}}),A.next=14;break;case 12:A.prev=12,A.t0=A.catch(5);case 14:case"end":return A.stop()}},T,this,[[5,12]])})),function(){return R.apply(this,arguments)})},{key:"loadMelody",value:(C=a(k.a.mark(function T(){var j,L,W=arguments;return k.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(j=W.length>0&&W[0]!==void 0?W[0]:{},this.player.hasPlugin(O.default.Name)){A.next=3;break}return A.abrupt("return");case 3:if(this.musicMap.melodies==null){A.next=5;break}return A.abrupt("return");case 5:return A.prev=5,A.next=8,_.MelodyAPI.get(this.sourceUrl,j);case 8:L=A.sent,Object.defineProperties(this.__musicMap__,{melodyRevisionId:{get:function(){return L.revisionId}},melodies:{get:function(){return L.data}}}),A.next=14;break;case 12:A.prev=12,A.t0=A.catch(5);case 14:case"end":return A.stop()}},T,this,[[5,12]])})),function(){return C.apply(this,arguments)})},{key:"loadChorus",value:(i=a(k.a.mark(function T(){var j,L,W=arguments;return k.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(j=W.length>0&&W[0]!==void 0?W[0]:{},this.player.hasPlugin(h.default.Name)){A.next=3;break}return A.abrupt("return");case 3:if(this.musicMap.chorus==null){A.next=5;break}return A.abrupt("return");case 5:return A.prev=5,A.next=8,_.ChorusAPI.get(this.sourceUrl,j);case 8:L=A.sent,Object.defineProperties(this.__musicMap__,{chorusRevisionId:{get:function(){return L.revisionId}},chorus:{get:function(){return L.data}},chorusSetcions:{get:function(){return e.default.warn("'Player.musicMap.chorusSections' is deprecated API, please use 'Player.musicMap.chorus'"),L.data.filter(function(D){return D.isChorus})}},repeatSections:{get:function(){return e.default.warn("'Player.musicMap.repeatSections' is deprecated API, please use 'Player.musicMap.chorus'"),L.data}}}),A.next=14;break;case 12:A.prev=12,A.t0=A.catch(5);case 14:case"end":return A.stop()}},T,this,[[5,12]])})),function(){return i.apply(this,arguments)})},{key:"loadVariation",value:(n=a(k.a.mark(function T(){var j,L,W=arguments;return k.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(j=W.length>0&&W[0]!==void 0?W[0]:{},this.player.hasPlugin(c.default.Name)){A.next=3;break}return A.abrupt("return");case 3:if(this.musicMap.variations==null){A.next=5;break}return A.abrupt("return");case 5:return A.prev=5,A.next=8,_.VariationAPI.get(this.sourceUrl,j);case 8:L=A.sent,Object.defineProperties(this.__musicMap__,{variationRevisionId:{get:function(){return L.revisionId}},variations:{get:function(){return L.data}}}),A.next=14;break;case 12:A.prev=12,A.t0=A.catch(5);case 14:case"end":return A.stop()}},T,this,[[5,12]])})),function(){return n.apply(this,arguments)})},{key:"activate",value:function(){var T=this;return new Promise(function(j,L){return T.__setMediaState__(2),j()})}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){this.seekTo(0),this.pause()}},{key:"seekTo",value:function(T){this.__seekMediaTo__(T)}},{key:"showElement",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.element!=null){var j=T.width!=null?T.width:256,L=T.height!=null?T.height:144;this.element.style.position="",this.element.style.opacity=1,this.element.style.left="",this.element.style.top="",this.element.style.width=f.default.typeOf(j)==="number"?j+"px":j,this.element.style.height=f.default.typeOf(L)==="number"?L+"px":L}}},{key:"hideElement",value:function(){this.element!=null&&(this.element.style.position="absolute",this.element.style.opacity=0,this.element.style.left="0px",this.element.style.top="0px",this.element.style.width="1px",this.element.style.height="1px")}},{key:"__seekMediaTo__",value:function(T){this.__adjustedTime__=f.default.currentClockTime,this.__positionTime__=T}},{key:"__invokeMediaStateChangeTrap__",value:function(T,j){this.isMounted?this.player.invokeTrap("mediaStateChange",{target:T,data:{mediaStateId:j,positionTime:this.originalPositionTime}}):this.invokeSelfTrap("mediaStateChange",{target:T,data:{mediaStateId:j,positionTime:this.originalPositionTime}})}},{key:"__setMediaState__",value:function(T){switch(T){case 0:this.__stateIsReady__=!1,this.__stateIsPlaying__=!1,this.__stateIsPaused__=!0,this.__stateIsSeeking__=!1;break;case 1:this.__stateIsReady__=!0,this.__stateIsPlaying__=!0,this.__stateIsPaused__=!1,this.__stateIsSeeking__=!1;break;case 2:this.__stateIsReady__=!0,this.__stateIsPlaying__=!1,this.__stateIsPaused__=!0,this.__stateIsSeeking__=!1;break;case 3:this.__stateIsReady__=!0,this.__stateIsSeeking__=!0}}},{key:"dispatcherName",get:function(){return m.Name}},{key:"dispatcherType",get:function(){return m.Type}},{key:"element",get:function(){return this.__element__}},{key:"originalPlayer",get:function(){return this.__originalPlayer__}},{key:"sourceUrl",get:function(){return this.__sourceUrl__}},{key:"name",get:function(){return this.__songleSong__.attributes.name}},{key:"artistId",get:function(){return this.__songleSong__.relationships.artist.data.id}},{key:"artistName",get:function(){return this.__songleSong__.relationships.artist.data.attributes.name}},{key:"isMounted",get:function(){return this.player.media==this}},{key:"isReady",get:function(){return this.__stateIsReady__}},{key:"isPlaying",get:function(){return this.__stateIsPlaying__}},{key:"isPaused",get:function(){return this.__stateIsPaused__}},{key:"isSeeking",get:function(){return this.__stateIsSeeking__}},{key:"medianSeekTime",get:function(){var T=this.__seekTimeHistories__.sort(function(j,L){return j-L});return Math.abs(T[Math.floor(T.length/2)]||0)}},{key:"durationTime",get:function(){return this.__songleSong__.attributes.durationTimeMs}},{key:"originalDurationTime",get:function(){return this.durationTime}},{key:"positionTime",get:function(){var T=this.__positionTime__+(this.isPlaying?f.default.currentClockTime-this.__adjustedTime__:0);return T<0?T:T>this.durationTime?this.durationTime:T}},{key:"originalPositionTime",get:function(){return this.positionTime}},{key:"loadedRatio",get:function(){return 0}},{key:"playedRatio",get:function(){return this.durationTime==0?0:this.positionTime/this.durationTime}},{key:"muted",get:function(){return!1},set:function(T){}},{key:"volume",get:function(){return 0},set:function(T){}},{key:"musicMap",get:function(){return this.__musicMap__}}]),m}(P.default)};x.default=d},62:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(21),S=(u(32),u(59),u(57),u(58),u(69)),p=u(2),O=u(1),h=u(78),c=u.n(h),e=u(70),f=u(71),_=u(72),g=u(73),a=u(74),o=u(20);function t(R,N,E,w,M,m,T){try{var j=R[m](T),L=j.value}catch(W){return void E(W)}j.done?N(L):Promise.resolve(L).then(w,M)}function r(R,N){if(!(R instanceof N))throw new TypeError("Cannot call a class as a function")}function s(R,N,E){return(s=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(w,M,m){var T=function(L,W){for(;!Object.prototype.hasOwnProperty.call(L,W)&&(L=i(L))!==null;);return L}(w,M);if(T){var j=Object.getOwnPropertyDescriptor(T,M);return j.get?j.get.call(m):j.value}})(R,N,E||R)}function l(R,N){for(var E=0;E<N.length;E++){var w=N[E];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(R,w.key,w)}}function v(R,N,E){return N&&l(R.prototype,N),E&&l(R,E),R}function b(R,N){return(b=Object.setPrototypeOf||function(E,w){return E.__proto__=w,E})(R,N)}function d(R){var N=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var E,w=i(R);if(N){var M=i(this).constructor;E=Reflect.construct(w,arguments,M)}else E=w.apply(this,arguments);return y(this,E)}}function y(R,N){return!N||typeof N!="object"&&typeof N!="function"?n(R):N}function n(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function i(R){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(R)}var C=function(R){(function(m,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(T&&T.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),T&&b(m,T)})(M,R);var N,E,w=d(M);function M(){var m,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(this,M),(m=w.call(this)).__nodeTimeoutSec__=60,m.__localAbsoluteClockJitterTime__=0,m.__cachedCurrentPlaylistItem__=null,m.__autoUseMedia__=T.autoUseMedia==null||T.autoUseMedia,m.__autoUseMediaOptions__=T.autoUseMediaOptions!=null?T.autoUseMediaOptions:null,m.__clockWorker__=new e.default(n(m),{intervalTime:T.clockWorkerIntervalTime}),m.__stageWorker__=new f.default(n(m),{intervalTime:T.stageWorkerIntervalTime}),m.__stateWorker__=new _.default(n(m),{intervalTime:T.stateWorkerIntervalTime}),m.__mediaWorker__=new g.default(n(m),{intervalTime:T.mediaWorkerIntervalTime}),m.__historyWorker__=new a.default(n(m),{intervalTime:T.historyWorkerIntervalTime}),m}return v(M,null,[{key:"Name",get:function(){return"songle-api-plugin-songle-sync"}}]),v(M,[{key:"initialize",value:function(m){var T=this;s(i(M.prototype),"initialize",this).call(this,m),Object.defineProperties(m,{localAbsoluteClockTime:{get:function(){return T.localAbsoluteClockTime}},localAbsoluteClockJitterTime:{get:function(){return T.localAbsoluteClockJitterTime},set:function(j){return T.localAbsoluteClockJitterTime=j}},stageStateId:{get:function(){return T.stageStateId}},stageActiveNodeCount:{get:function(){return T.stageActiveNodeCount}},stageMasterNodeCount:{get:function(){return T.stageMasterNodeCount}},stageIsStopped:{get:function(){return T.stageIsStopped}},stageIsPlaying:{get:function(){return T.stageIsPlaying}},stageIsPaused:{get:function(){return T.stageIsPaused}},stageInitialAbsoluteStartTime:{get:function(){return T.stageInitialAbsoluteStartTime}},stageAbsoluteStartTime:{get:function(){return T.stageAbsoluteStartTime}},stageAbsolutePauseTime:{get:function(){return T.stageAbsolutePauseTime}},nodeId:{get:function(){return T.nodeId}},nodeTimeoutSec:{get:function(){return T.nodeTimeoutSec},set:function(j){return T.nodeTimeoutSec=j}},isMaster:{get:function(){return T.isMaster}},isSlave:{get:function(){return T.isSlave}},message:{get:function(){return T.message}},playlist:{get:function(){return T.playlist}}}),m.play=function(){return T.__play__()},m.pause=function(){return T.__pause__()},m.stop=function(){return T.__stop__()},m.seekTo=function(j){return T.__seekTo__(j)},m.seekPlaylistTo=function(j){return T.__seekPlaylistTo__(j)},m.seekPlaylistPositionTo=function(j){return T.__seekPlaylistTo__(j)},m.seekToPrevPlaylistItem=function(){return T.__seekToPrevPlaylistItem__()},m.seekToNextPlaylistItem=function(){return T.__seekToNextPlaylistItem__()},m.sync=function(j){return T.__sync__(j)},m.setPlaylist=function(j){return T.__setPlaylist__(j)},m.setMessage=function(j){return T.__setMessage__(j)},this.on("songleSyncStageNodeChange",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data)}),this.on("songleSyncStageNodeEnter",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data)}),this.on("songleSyncStageNodeLeave",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data)}),this.on("songleSyncStageStateChange",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data),T.stageIsStopped&&(T.stateWorker.resetState({force:!0}),T.__defaultMediaChange__())}),this.on("songleSyncStageAbsoluteStartTimeUpdate",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data),T.stageIsPaused||T.stateWorker.resetState()}),this.on("songleSyncStageAbsolutePauseTimeUpdate",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data),T.stageIsPaused||T.stateWorker.resetState()}),this.on("songleSyncMessage",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data)}),this.on("songleSyncPlaylistUpdate",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data),T.stateWorker.resetState({force:!0}),T.__defaultMediaChange__()}),this.on("songleSyncPlaylistItemEnter",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data),T.__defaultMediaChange__()}),this.on("songleSyncPlaylistItemLeave",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data)}),this.on("songleSyncPlaylistFinish",function(j){p.default.debug("Invoke '".concat(j.type,"'"),j.data),T.__stop__(),T.player.mediaCaches.forEach(function(L){L.stop()})}),Promise.resolve().then(function(){return T.clockWorker.runTask()}).then(function(){return T.stageWorker.runTask()}).then(function(){return T.stateWorker.runTask()}).then(function(){return T.mediaWorker.runTask()}).then(function(){return T.historyWorker.runTask()}).then(function(){T.clockWorker.start(),T.stageWorker.start(),T.stateWorker.start(),T.mediaWorker.start(),T.historyWorker.start()})}},{key:"mediaTryMount",value:function(m,T){s(i(M.prototype),"mediaTryMount",this).call(this,m),this.isSlave||this.playlist.items.length==0&&(p.default.warn("If you want to change a media on the Songle Sync, please use 'SongleAPI.Player#setPlaylist' instead of 'SongleAPI.Player#useMedia'"),this.__setPlaylist__(T.newMediaSourceUrl))}},{key:"__defaultMediaChange__",value:function(){var m=this;if(this.__autoUseMedia__){var T=this.__getCurrentPlaylistItem__();if(!this.player.media||this.player.media.sourceUrl!==T.mediaSourceUrl){var j;switch(!0){case(T!=null&&T.options!=null&&T.options.useMedia!=null):j=T.options.useMedia;break;case this.__autoUseMediaOptions__!=null:j=this.__autoUseMediaOptions__;break;default:j={headless:this.player.mediaElement==null}}this.player.useMedia(T,j).then(function(){m.player.mediaCaches.forEach(function(L){L.isMounted||L.stop()})})}}}},{key:"__getPlaylistDurationTime__",value:function(){var m=0;return((m=this.stageWorker.__playlistDurationTime__)<0||isNaN(m))&&(m=0),m}},{key:"__getPlaylistPositionTime__",value:function(){var m=0;switch(this.stageStateId){case 0:m=0;break;case 1:m=this.localAbsoluteClockTime-this.stageAbsoluteStartTime;break;case 2:m=this.stageAbsolutePauseTime-this.stageAbsoluteStartTime}return(m<0||isNaN(m))&&(m=0),m>this.stageWorker.__playlistDurationTime__&&(m=this.stageWorker.__playlistDurationTime__),m}},{key:"__getCurrentPlaylistItem__",value:function(){var m=this.__getPlaylistPositionTime__(),T=this.__cachedCurrentPlaylistItem__;if(T!=null&&m>=T.relativeStartTime&&m<T.relativeEndTime)return T;for(var j=0,L=this.stageWorker.__playlistItems__.length-1;j<=L;){var W=Math.floor((j+L)/2),A=this.stageWorker.__playlistItems__[W];if(m>=A.relativeStartTime&&m<A.relativeEndTime){this.__cachedCurrentPlaylistItem__=A;break}m>=A.relativeEndTime?j=W+1:L=W-1}return this.__cachedCurrentPlaylistItem__}},{key:"__getPlaylistMediaState__",value:function(){var m=this.__getCurrentPlaylistItem__();if(m==null||this.localAbsoluteClockTime-this.stageAbsoluteStartTime<0)return 0;var T=this.__getPlaylistPositionTime__();if(this.stageIsPlaying){if(T>=m.mediaStartTime&&T<m.mediaStartTime+m.mediaDurationTime)return 1}else if(this.stageIsPaused&&T>=m.mediaStartTime&&T<m.mediaStartTime+m.mediaDurationTime)return 2;return 0}},{key:"__getPlaylistMediaIsStopped__",value:function(){return this.__getPlaylistMediaState__()==0}},{key:"__getPlaylistMediaIsPlaying__",value:function(){return this.__getPlaylistMediaState__()==1}},{key:"__getPlaylistMediaIsPaused__",value:function(){return this.__getPlaylistMediaState__()==2}},{key:"__getPlaylistMediaDurationTime__",value:function(){var m=this.__getCurrentPlaylistItem__();if(m==null)return 0;var T=m.mediaDurationTime;return T<0&&(T=0),T}},{key:"__getPlaylistMediaPositionTime__",value:function(){var m=this.__getCurrentPlaylistItem__();if(m==null)return 0;var T=this.__getPlaylistPositionTime__()-m.mediaStartTime;return T<0&&(T=0),T>this.__getPlaylistMediaDurationTime__()&&(T=this.__getPlaylistMediaDurationTime__()),T}},{key:"__setPlaylist__",value:function(m){switch(O.default.typeOf(m)){case"array":m=m.map(function(T){return O.default.typeOf(T)=="string"?{mediaSourceUrl:T}:T});break;case"object":m=[m];break;case"string":m=[{mediaSourceUrl:m}]}return o.PlaylistAPI.createPlaylist(this,m)}},{key:"__setMessage__",value:function(m){if(!this.isSlave)return o.MessageAPI.updateMessage(this,m)}},{key:"__play__",value:function(){this.__sync__({stateId:1})}},{key:"__pause__",value:function(){this.__sync__({stateId:2})}},{key:"__stop__",value:function(){this.__sync__({stateId:0})}},{key:"__seekTo__",value:function(m){var T=this.__getCurrentPlaylistItem__();T!=null&&this.__seekPlaylistTo__(T.mediaStartTime+m)}},{key:"__seekPlaylistTo__",value:function(m){this.stageIsPlaying?this.__sync__({absoluteStartTime:this.localAbsoluteClockTime-m}):this.__sync__({stateId:2,absoluteStartTime:this.localAbsoluteClockTime,absolutePauseTime:this.localAbsoluteClockTime+m})}},{key:"__seekToPrevPlaylistItem__",value:function(){var m=this.__getCurrentPlaylistItem__();m.prev&&this.__seekPlaylistTo__(m.prev.startTime)}},{key:"__seekToNextPlaylistItem__",value:function(){var m=this.__getCurrentPlaylistItem__();m.next&&this.__seekPlaylistTo__(m.next.startTime)}},{key:"__sync__",value:(N=k.a.mark(function m(){var T,j=arguments;return k.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(T=j.length>0&&j[0]!==void 0?j[0]:{},!this.isSlave){L.next=3;break}return L.abrupt("return");case 3:return L.t0=this.stageWorker,L.next=6,o.StageAPI.updateStage(this,T);case 6:return L.t1=L.sent,L.next=9,L.t0.update.call(L.t0,L.t1);case 9:this.stateWorker.update(),this.mediaWorker.update();case 11:case"end":return L.stop()}},m,this)}),E=function(){var m=this,T=arguments;return new Promise(function(j,L){var W=N.apply(m,T);function A(z){t(W,j,L,A,D,"next",z)}function D(z){t(W,j,L,A,D,"throw",z)}A(void 0)})},function(){return E.apply(this,arguments)})},{key:"dispatcherName",get:function(){return M.Name}},{key:"clockWorker",get:function(){return this.__clockWorker__}},{key:"stageWorker",get:function(){return this.__stageWorker__}},{key:"stateWorker",get:function(){return this.__stateWorker__}},{key:"mediaWorker",get:function(){return this.__mediaWorker__}},{key:"historyWorker",get:function(){return this.__historyWorker__}},{key:"localAbsoluteClockTime",get:function(){return O.default.currentClockTime+this.clockWorker.networkJitterTime+this.localAbsoluteClockJitterTime}},{key:"localAbsoluteClockJitterTime",get:function(){return this.__localAbsoluteClockJitterTime__},set:function(m){var T=-this.__getPlaylistDurationTime__(),j=this.__getPlaylistDurationTime__();m<T&&(p.default.warn("Couldn't set 'SongleAPI.Player#localAbsoluteClockJitterTime' less than ".concat(T," seconds")),m=T),m>j&&(p.default.warn("Couldn't set 'SongleAPI.Player#localAbsoluteClockJitterTime' more than ".concat(j," seconds")),m=j),this.__localAbsoluteClockJitterTime__=m}},{key:"stageId",get:function(){return this.stageWorker.__stageId__}},{key:"stageActiveNodeCount",get:function(){return this.stageWorker.__activeNodeCount__}},{key:"stageMasterNodeCount",get:function(){return this.stageWorker.__masterNodeCount__}},{key:"stageStateId",get:function(){return this.stageWorker.__stateId__}},{key:"stageIsStopped",get:function(){return this.stageWorker.__stateId__==0}},{key:"stageIsPlaying",get:function(){return this.stageWorker.__stateId__==1}},{key:"stageIsPaused",get:function(){return this.stageWorker.__stateId__==2}},{key:"stageInitialAbsoluteStartTime",get:function(){return this.stageWorker.__initialAbsoluteStartTime__}},{key:"stageAbsoluteStartTime",get:function(){return this.stageWorker.__absoluteStartTime__}},{key:"stageAbsolutePauseTime",get:function(){return this.stageWorker.__absolutePauseTime__}},{key:"nodeId",get:function(){return S.default.fetch("".concat(M.Name,".nodeId"),c()())}},{key:"nodeTimeoutSec",get:function(){return this.__nodeTimeoutSec__},set:function(m){30>m&&(p.default.warn("Couldn't set 'SongleAPI.Player#nodeTimeoutSec' less than ".concat(30," seconds")),m=30),3600<m&&(p.default.warn("Couldn't set 'SongleAPI.Player#nodeTimeoutSec' more than ".concat(3600," seconds")),m=3600),this.__nodeTimeoutSec__=m}},{key:"accessToken",get:function(){return this.player.accessToken}},{key:"secretToken",get:function(){return this.player.secretToken}},{key:"isMaster",get:function(){return!O.default.stringIsBlank(this.secretToken)}},{key:"isSlave",get:function(){return O.default.stringIsBlank(this.secretToken)}},{key:"message",get:function(){return this.stageWorker.__message__}},{key:"playlist",get:function(){var m=this.__getPlaylistDurationTime__(),T=this.__getPlaylistMediaDurationTime__(),j=this.__getPlaylistPositionTime__(),L=this.__getPlaylistMediaPositionTime__(),W=this.__getCurrentPlaylistItem__(),A=this.stageWorker.__playlistItems__;return{absoluteStartTime:this.stageAbsoluteStartTime,mediaDurationTime:T,durationTime:m,mediaPositionTime:L,positionTime:j,currentItem:W,items:A}}}]),M}(P.default);x.default=C},66:function(H,x,u){u.r(x);var I=u(1),k=u(67),P=(u(83),u(68)),S=u(32),p=u(57),O=u(58),h=u(59);function c(a,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,s){var l=t.controls,v=o.relationships.uri.data.attributes.sourceId;k.default.importClass().then(function(b){b.create(a,v,{autoplay:!1,defaultNoComment:!0,noController:!l,noHeader:!0,noLinkToNiconico:!0,noRelatedVideo:!0,noShare:!0,noTags:!0,width:"100%",height:"100%",onError:function(d){return s(d)},onSuccess:function(d){return r(d)}})},function(){s()})})}function e(a,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,s){var l=!!t.controls,v=!!t.playsinline,b=o.relationships.uri.data.attributes.sourceId;if(t.altSourceUrl!=null){var d=t.altSourceUrl.match(/watch\?v=(.+)/);b=d[1]}P.default.importClass().then(function(y){var n=I.default.global.document.createElement("div");a.appendChild(n),new y.Player(n,{events:{onError:function(i){return s(i)},onReady:function(i){return r(i.target)}},playerVars:{autohide:"0",autoplay:"0",cc_load_policy:"0",controls:l?"1":"0",disablekb:"1",enablejsapi:"1",fs:l?"1":"0",hl:"0",html5:"1",iv_load_policy:"3",loop:"0",modestbranding:"1",playsinline:v?"1":"0",rel:"0",showinfo:"0",start:"0"},videoId:b,width:"100%",height:"100%"},function(){s()})})})}function f(a,o){return new Promise(function(t,r){})}function _(a,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,s){var l=t.altSourceUrl,v=t.controls,b=o.relationships.uri.data.attributes.endpointScheme,d=o.relationships.uri.data.attributes.endpointHost,y=o.relationships.uri.data.attributes.endpointPath,n=I.default.global.document.createElement("audio");n.autoplay=!1,n.controls=!!v,n.crossorigin="anonymous",n.loop=!1,n.muted=!1,n.preload="auto",n.src=l||"".concat(b,"://").concat(d).concat(y).concat(o.attributes.code,"/u"),n.addEventListener("abort",function(i){return s(i)}),n.addEventListener("error",function(i){return s(i)}),n.addEventListener("loadstart",function(i){return r(i.target)}),a.appendChild(n)})}var g={create:function(a,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,s){if(t.headless){var l=new S.default(o);l.initialize(a).then(function(){return r(l)},function(){return s()})}else{var v=t.element!=null?t.element:I.default.global.document.body,b=I.default.global.document.createElement("div");b.style.position="absolute",b.style.opacity=0,b.style.left="0px",b.style.top="0px",b.style.width="1px",b.style.height="1px",b.style.zIndex=0,v.appendChild(b);var d=o.relationships.uri.data.attributes.sourceHost;switch(t.altSourceUrl!=null&&(d=new RegExp("www.youtube.com").test(t.altSourceUrl)?"www.youtube.com":""),d){case"www.nicovideo.jp":return c(b,o,t).then(function(y){var n=new p.default(b,y,o);n.initialize(a).then(function(){return r(n)},function(){return s()})},function(y){s(y)});case"soundcloud.com":return f().then(function(y){},function(y){s(y)});case"www.youtube.com":return e(b,o,t).then(function(y){var n=new O.default(b,y,o);n.initialize(a).then(function(){return r(n)},function(){return s()})},function(y){s(y)});default:return _(b,o,t).then(function(y){var n=new h.default(b,y,o);n.initialize(a).then(function(){return r(n)},function(){return s()})},function(y){s(y)})}}})}};x.default=g},67:function(H,x,u){u.r(x);var I=u(30),k=u(1),P="https://secure-dcdn.cdn.nimg.jp/extplayerv/embed/js/api.js",S={importClass:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(O,h){if(k.default.NnFactoryClass)return O(k.default.NnFactoryClass);var c=p.element||k.default.global.document.body;k.default.global.onNicoPlayerFactoryReady=function(e){k.default.NnFactoryClass=k.default.NnFactoryClass||k.default.global.NN||e},c.appendChild(I.default.createScriptElement(P,{onAbort:function(e){return h()},onError:function(e){return h()},onLoad:function(e){var f=setInterval(function(){k.default.NnFactoryClass&&k.default.NnFactoryClass.create&&(clearInterval(f),O(k.default.NnFactoryClass))},1)}}))})}};x.default=S},68:function(H,x,u){u.r(x);var I=u(30),k=u(1),P="https://www.youtube.com/iframe_api",S={importClass:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(O,h){if(k.default.YtFactoryClass)return O(k.default.YtFactoryClass);var c=p.element||k.default.global.document.body;k.default.global.onYouTubeIframeAPIReady=function(e){k.default.YtFactoryClass=k.default.YtFactoryClass||k.default.global.YT||e},c.appendChild(I.default.createScriptElement(P,{onAbort:function(e){return h()},onError:function(e){return h()},onLoad:function(e){var f=setInterval(function(){k.default.YtFactoryClass&&k.default.YtFactoryClass.Player&&(clearInterval(f),O(k.default.YtFactoryClass))},1)}}))})}};x.default=S},69:function(H,x,u){u.r(x);var I=u(2),k=u(1);function P(O){try{return k.default.isStandalone?null:k.default.global.localStorage.getItem(O)}catch(h){return I.default.error(h),null}}function S(O,h){try{return k.default.isStandalone?null:k.default.global.localStorage.setItem(O,h)}catch(c){return I.default.error(c),null}}var p={fetch:function(O,h){var c=P(O)||h;return S(O,c),c},get:P,set:S};x.default=p},70:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(28),S=(u(2),u(1)),p=u(20);function O(t,r,s,l,v,b,d){try{var y=t[b](d),n=y.value}catch(i){return void s(i)}y.done?r(n):Promise.resolve(n).then(l,v)}function h(t){return function(){var r=this,s=arguments;return new Promise(function(l,v){var b=t.apply(r,s);function d(n){O(b,l,v,d,y,"next",n)}function y(n){O(b,l,v,d,y,"throw",n)}d(void 0)})}}function c(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e(t,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function f(t,r){return(f=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(t,r)}function _(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var s,l=a(t);if(r){var v=a(this).constructor;s=Reflect.construct(l,arguments,v)}else s=l.apply(this,arguments);return g(this,s)}}function g(t,r){return!r||typeof r!="object"&&typeof r!="function"?function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var o=function(t){(function(y,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(n&&n.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),n&&f(y,n)})(d,t);var r,s,l,v,b=_(d);function d(){var y;c(this,d);for(var n=arguments.length,i=new Array(n),C=0;C<n;C++)i[C]=arguments[C];return(y=b.call.apply(b,[this].concat(i))).__histories__=[0],y}return r=d,(s=[{key:"runTask",value:(v=h(k.a.mark(function y(){var n;return k.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.update();case 2:(n=2*this.intervalTime+this.__random__(0,1e3))<this.minIntervalTime&&(n=this.minIntervalTime),n>this.maxIntervalTime&&(n=this.maxIntervalTime),this.intervalTime=n;case 6:case"end":return i.stop()}},y,this)})),function(){return v.apply(this,arguments)})},{key:"update",value:(l=h(k.a.mark(function y(){var n,i,C,R;return k.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:n=0;case 1:if(!(n<3)){N.next=11;break}return i=S.default.currentClockTime,N.next=5,p.ClockAPI.getClock(this.plugin);case 5:C=N.sent,R=S.default.currentClockTime,this.__histories__.push(C-(R+i)/2);case 8:++n,N.next=1;break;case 11:this.__histories__=this.__histories__.sort(function(E,w){return E-w});case 12:case"end":return N.stop()}},y,this)})),function(){return l.apply(this,arguments)})},{key:"__random__",value:function(y,n){return Math.floor(Math.random()*(n-y+1)+y)}},{key:"defaultIntervalTime",get:function(){return 1e3}},{key:"minIntervalTime",get:function(){return 1e3}},{key:"maxIntervalTime",get:function(){return 6e4}},{key:"networkJitterTime",get:function(){return this.__histories__[Math.floor(this.__histories__.length/2)]}}])&&e(r.prototype,s),d}(P.default);x.default=o},71:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(28),S=u(2),p=u(1),O=u(20);function h(r,s,l,v,b,d,y){try{var n=r[d](y),i=n.value}catch(C){return void l(C)}n.done?s(i):Promise.resolve(i).then(v,b)}function c(r){return function(){var s=this,l=arguments;return new Promise(function(v,b){var d=r.apply(s,l);function y(i){h(d,v,b,y,n,"next",i)}function n(i){h(d,v,b,y,n,"throw",i)}y(void 0)})}}function e(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function f(r,s){for(var l=0;l<s.length;l++){var v=s[l];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(r,v.key,v)}}function _(r,s){return(_=Object.setPrototypeOf||function(l,v){return l.__proto__=v,l})(r,s)}function g(r){var s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var l,v=o(r);if(s){var b=o(this).constructor;l=Reflect.construct(v,arguments,b)}else l=v.apply(this,arguments);return a(this,l)}}function a(r,s){return!s||typeof s!="object"&&typeof s!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(r):s}function o(r){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)})(r)}var t=function(r){(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&_(n,i)})(y,r);var s,l,v,b,d=g(y);function y(){var n;e(this,y);for(var i=arguments.length,C=new Array(i),R=0;R<i;R++)C[R]=arguments[R];return(n=d.call.apply(d,[this].concat(C))).__activeNodeCount__=0,n.__masterNodeCount__=0,n.__stateId__=0,n.__initialAbsoluteStartTime__=0,n.__absoluteStartTime__=0,n.__absolutePauseTime__=0,n.__playlistDurationTime__=0,n.__playlistPositionTime__=0,n.__playlistItems__=[],n}return s=y,(l=[{key:"runTask",value:(b=c(k.a.mark(function n(){return k.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=this,i.next=3,O.StageAPI.getStage(this.plugin);case 3:return i.t1=i.sent,i.next=6,i.t0.update.call(i.t0,i.t1);case 6:case"end":return i.stop()}},n,this)})),function(){return b.apply(this,arguments)})},{key:"update",value:(v=c(k.a.mark(function n(i){var C,R,N;return k.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return C=i.id,R=i.attributes.createdAt,N=i.attributes.updatedAt,this.__updateNodeCount__(i),this.__updateState__(i),this.__updateInitialAbsoluteStartTime__(i),this.__updateAbsoluteStartTime__(i),this.__updateAbsolutePauseTime__(i),E.next=10,this.__updateMessage__(i);case 10:return E.next=12,this.__updatePlaylist__(i);case 12:this.__stageId__=C,this.__createdAt__=R,this.__updatedAt__=N;case 15:case"end":return E.stop()}},n,this)})),function(n){return v.apply(this,arguments)})},{key:"__updateNodeCount__",value:function(n){var i=n.attributes.activeNodeCount,C=n.attributes.masterNodeCount,R=i>this.__activeNodeCount__,N=i<this.__activeNodeCount__;this.__activeNodeCount__=i,this.__masterNodeCount__=C;var E={stageActiveNodeCount:i,stageMasterNodeCount:C};[{source:"stageActiveNodeCount",target:"activeNodeCount",warning:!0},{source:"stageMasterNodeCount",target:"masterNodeCount",warning:!0}].forEach(function(w){Object.defineProperty(E,w.target,{get:function(){return w.warning&&S.default.warn("'".concat(w.target,"' is deprecated API, please use '").concat(w.source,"' in 'songleSyncStageNode[Change|Enter|Leave]' trap")),E[w.source]}})}),(R||N)&&this.player.invokeTrap("songleSyncStageNodeChange",{target:this.plugin,data:E}),R&&this.player.invokeTrap("songleSyncStageNodeEnter",{target:this.plugin,data:E}),N&&this.player.invokeTrap("songleSyncStageNodeLeave",{target:this.plugin,data:E})}},{key:"__updateState__",value:function(n){var i=n.attributes.stateId;i!=this.__stateId__&&(this.__stateId__=i,this.player.invokeTrap("songleSyncStageStateChange",{target:this.plugin,data:{stageStateId:i}}))}},{key:"__updateInitialAbsoluteStartTime__",value:function(n){var i=n.attributes.initialAbsoluteStartTimeMs;i!=this.__initialAbsoluteStartTime__&&(this.__initialAbsoluteStartTime__=i,this.player.invokeTrap("songleSyncStageInitialAbsoluteStartTime",{target:this.plugin,data:{stageInitialAbsoluteStartTime:i}}))}},{key:"__updateAbsoluteStartTime__",value:function(n){var i=n.attributes.absoluteStartTimeMs;i!=this.__absoluteStartTime__&&(this.__absoluteStartTime__=i,this.player.invokeTrap("songleSyncStageAbsoluteStartTimeUpdate",{target:this.plugin,data:{stageAbsoluteStartTime:i}}))}},{key:"__updateAbsolutePauseTime__",value:function(n){var i=n.attributes.absolutePauseTimeMs;i!=this.__absolutePauseTime__&&(this.__absolutePauseTime__=i,this.player.invokeTrap("songleSyncStageAbsolutePauseTimeUpdate",{target:this.plugin,data:{stageAbsolutePauseTime:i}}))}},{key:"__updateMessage__",value:function(n){var i=this;return new Promise(function(C,R){var N=n.attributes.messageCreatedAt,E=n.attributes.messageUpdatedAt;return N==null||E==null||N===i.__messageCreatedAt__&&E===i.__messageUpdatedAt__?C():void O.MessageAPI.getMessage(i.plugin).then(function(w){var M=w.attributes.data;return i.__message__=M,i.__messageCreatedAt__=N,i.__messageUpdatedAt__=E,p.default.stringIsBlank(M)||i.player.invokeTrap("songleSyncMessage",{target:i.plugin,data:{message:M}}),C()},function(w){return S.default.error("StageWorker#error",w),R(w)})})}},{key:"__updatePlaylist__",value:function(n){var i=this;return new Promise(function(C,R){var N=n.attributes.playlistDurationTimeMs,E=n.attributes.playlistPositionTimeMs,w=n.attributes.playlistCreatedAt,M=n.attributes.playlistUpdatedAt;return w==null||M==null||w===i.__playlistCreatedAt__&&M===i.__playlistUpdatedAt__?C():void O.PlaylistAPI.getPlaylist(i.plugin).then(function(m){return i.__playlistDurationTime__=N,i.__playlistPositionTime__=E,i.__playlistItems__=m,i.__playlistCreatedAt__=w,i.__playlistUpdatedAt__=M,i.player.invokeTrap("songleSyncPlaylistUpdate",{target:i.plugin,data:{playlistItems:m}}),C()},function(m){return S.default.error("StageWorker#error",m),R(m)})})}},{key:"defaultIntervalTime",get:function(){return 3e3}},{key:"minIntervalTime",get:function(){return 1e3}},{key:"maxIntervalTime",get:function(){return 6e4}}])&&f(s.prototype,l),y}(P.default);x.default=t},72:function(H,x,u){u.r(x);var I=u(28),k=u(2);function P(f,_){if(!(f instanceof _))throw new TypeError("Cannot call a class as a function")}function S(f,_){for(var g=0;g<_.length;g++){var a=_[g];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}function p(f,_){return(p=Object.setPrototypeOf||function(g,a){return g.__proto__=a,g})(f,_)}function O(f){var _=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var g,a=c(f);if(_){var o=c(this).constructor;g=Reflect.construct(a,arguments,o)}else g=a.apply(this,arguments);return h(this,g)}}function h(f,_){return!_||typeof _!="object"&&typeof _!="function"?function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(f):_}function c(f){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(f)}var e=function(f){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&p(t,r)})(o,f);var _,g,a=O(o);function o(){var t;P(this,o);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(t=a.call.apply(a,[this].concat(s))).__beforePlaylistItemIndex__=-1,t.__enterStates__=[],t.__leaveStates__=[],t.__finishState__=!1,t.__stopNumberOfTrails__=0,t.__playNumberOfTrails__=0,t.__pauseNumberOfTrails__=0,t.__stopNumberOfTrailsThreshold__=0,t.__playNumberOfTrailsThreshold__=0,t.__pauseNumberOfTrailsThreshold__=0,t.skipMediaStateChange=!1,t}return _=o,(g=[{key:"resetState",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.force!=null&&t.force,s=this.plugin.__getCurrentPlaylistItem__();(s==null||r||this.__beforePlaylistItemIndex__!=s.index)&&(this.__invokeAllPlaylistItemLeaveTrap__(),this.__beforePlaylistItemIndex__=-1,this.__enterStates__=[],this.__leaveStates__=[],this.__finishState__=!1,k.default.debug("Playlist trap states was reseted"))}},{key:"runTask",value:function(){this.update()}},{key:"update",value:function(){this.__invokePlaylistTraps__(),this.player.media!=null&&this.player.media.sourceUrl===this.plugin.playlist.currentItem.mediaSourceUrl&&(this.skipMediaStateChange||(this.plugin.__getPlaylistMediaIsStopped__()?this.__tryStoppingMedia__():this.plugin.__getPlaylistMediaIsPlaying__()?this.__tryPlayingMedia__():this.plugin.__getPlaylistMediaIsPaused__()&&this.__tryPausingMedia__()))}},{key:"__tryStoppingMedia__",value:function(){if(this.player.media.isPaused)return this.__stopNumberOfTrails__=0,void(this.__stopNumberOfTrailsThreshold__=0);this.__stopNumberOfTrails__+=1,this.__stopNumberOfTrails__>this.__stopNumberOfTrailsThreshold__&&(this.player.media.stop(),k.default.debug("The 'stop' function of media was called by the Songle Sync"),this.__stopNumberOfTrailsThreshold__=2*this.__stopNumberOfTrails__)}},{key:"__tryPlayingMedia__",value:function(){if(this.player.media.isPlaying)return this.__playNumberOfTrails__=0,void(this.__playNumberOfTrailsThreshold__=0);this.__playNumberOfTrails__+=1,this.__playNumberOfTrails__>this.__playNumberOfTrailsThreshold__&&(this.player.media.play(),k.default.debug("The 'play' function of media was called by the Songle Sync"),this.__playNumberOfTrailsThreshold__=2*this.__playNumberOfTrails__)}},{key:"__tryPausingMedia__",value:function(){if(this.player.media.isPaused)return this.__pauseNumberOfTrails__=0,void(this.__pauseNumberOfTrailsThreshold__=0);this.__pauseNumberOfTrails__+=1,this.__pauseNumberOfTrails__>this.__pauseNumberOfTrailsThreshold__&&(this.player.media.pause(),k.default.debug("The 'pause' function of media was called by the Songle Sync"),this.__pauseNumberOfTrailsThreshold__=2*this.__pauseNumberOfTrails__)}},{key:"__invokePlaylistTraps__",value:function(){var t=this;this.plugin.stageIsPlaying&&(this.plugin.playlist.items.forEach(function(r){t.plugin.playlist.positionTime>=r.relativeStartTime&&t.plugin.playlist.positionTime<r.relativeEndTime?t.__invokePlaylistItemEnterTrap__(r):t.__invokePlaylistItemLeaveTrap__(r)}),this.__invokePlaylistFinishTrap__())}},{key:"__invokeAllPlaylistItemEnterTrap__",value:function(){var t=this;this.plugin.playlist.items.forEach(function(r){t.__invokePlaylistItemEnterTrap__(r)})}},{key:"__invokeAllPlaylistItemLeaveTrap__",value:function(){var t=this;this.plugin.playlist.items.forEach(function(r){t.__invokePlaylistItemLeaveTrap__(r)})}},{key:"__invokePlaylistItemEnterTrap__",value:function(t){this.__enterStates__[t.index]||this.__leaveStates__[t.index]||(this.player.invokeTrap("songleSyncPlaylistItemEnter",{target:this.plugin,data:{playlistItem:t}}),this.__beforePlaylistItemIndex__=this.plugin.playlist.currentItem.index,this.__enterStates__[t.index]=!0)}},{key:"__invokePlaylistItemLeaveTrap__",value:function(t){this.__enterStates__[t.index]&&!this.__leaveStates__[t.index]&&(this.player.invokeTrap("songleSyncPlaylistItemLeave",{target:this.plugin,data:{playlistItem:t}}),this.__beforePlaylistItemIndex__=this.plugin.playlist.currentItem.index,this.__leaveStates__[t.index]=!0)}},{key:"__invokePlaylistFinishTrap__",value:function(){this.__finishState__||this.plugin.playlist.positionTime!=this.plugin.playlist.durationTime||(this.player.invokeTrap("songleSyncPlaylistFinish",{target:this.plugin}),this.__finishState__=!0)}},{key:"defaultIntervalTime",get:function(){return 100}},{key:"minIntervalTime",get:function(){return 100}},{key:"maxIntervalTime",get:function(){return 1e3}}])&&S(_.prototype,g),o}(I.default);x.default=e},73:function(H,x,u){u.r(x);var I=u(28),k=u(32),P=(u(59),u(57),u(58),u(2)),S=u(1);function p(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function O(a,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function h(a,o){return(h=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(a,o)}function c(a){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var t,r=f(a);if(o){var s=f(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return e(this,t)}}function e(a,o){return!o||typeof o!="object"&&typeof o!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a):o}function f(a){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(a)}var _=Math.floor(5.5),g=function(a){(function(l,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(v&&v.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),v&&h(l,v)})(s,a);var o,t,r=c(s);function s(){var l;p(this,s);for(var v=arguments.length,b=new Array(v),d=0;d<v;d++)b[d]=arguments[d];return(l=r.call.apply(r,[this].concat(b))).__integralOffsetTime__=0,l.__stateWorkerRestartTime__=0,l.__minAllowableOffsetTimeThreshold__=200,l.__maxAllowableOffsetTimeThreshold__=2e3,l.__allowableOffsetTimeThreshold__=200,l.__offsetTime__=0,l.__negativeSeekingCount__=0,l.__positiveSeekingCount__=0,l.__syncedCount__=0,l.__syncedCountThreshold__=_,l}return o=s,(t=[{key:"runTask",value:function(){this.update()}},{key:"update",value:function(){if(this.plugin.__getPlaylistMediaIsPlaying__()){if(this.player!=null&&this.player.media!=null){var l=this.plugin.__getPlaylistMediaPositionTime__();if(this.__offsetTime__=l-this.player.media.positionTime,Math.abs(this.offsetTime)<1e3?this.__integralOffsetTime__+=this.offsetTime:this.__integralOffsetTime__=0,!this.__restartStateWorker__()){if(this.offsetTime<this.negativeOffsetTimeThreshold){switch(this.player.media.dispatcherName){case k.default.Name:this.player.media.seekTo(l);break;default:if(!this.player.media.isReady)return;if(Math.abs(this.offsetTime)<1e3)return void this.__suspendStateWorker__();this.player.media.seekTo(l)}this.__incrementNegativeSeekingCount__(),this.__dispatchNegativeSeeking__(),this.__dispatchUnsync__(),this.__resetSyncedCount__()}else if(this.offsetTime>this.positiveOffsetTimeThreshold){switch(this.player.media.dispatcherName){case k.default.Name:this.player.media.seekTo(l);break;default:if(!this.player.media.isReady)return;this.player.media.seekTo(l+this.__integralOffsetTime__)}this.__incrementPositiveSeekingCount__(),this.__dispatchPositiveSeeking__(),this.__dispatchUnsync__(),this.__resetSyncedCount__()}else if(!this.plugin.stateWorker.skipMediaStateChange){if(this.__incrementSyncedCount__(),this.syncedCount%this.syncedCountThreshold!=0)return;this.__dispatchSync__(),this.__resetSeekingCount__()}}}}else this.__resetSyncedCount__()}},{key:"__debugMessage__",value:function(l){P.default.debug(l,{minAllowableOffsetTimeThreshold:this.minAllowableOffsetTimeThreshold,maxAllowableOffsetTimeThreshold:this.maxAllowableOffsetTimeThreshold,allowableOffsetTimeThreshold:this.allowableOffsetTimeThreshold,negativeOffsetTimeThreshold:this.negativeOffsetTimeThreshold,positiveOffsetTimeThreshold:this.positiveOffsetTimeThreshold,offsetTime:this.offsetTime,negativeSeekingCount:this.negativeSeekingCount,positiveSeekingCount:this.positiveSeekingCount,unsyncedCount:this.unsyncedCount,syncedCount:this.syncedCount})}},{key:"__resetSeekingCount__",value:function(){this.__negativeSeekingCount__=0,this.__positiveSeekingCount__=0}},{key:"__incrementNegativeSeekingCount__",value:function(){this.__negativeSeekingCount__+=1}},{key:"__incrementPositiveSeekingCount__",value:function(){this.__positiveSeekingCount__+=1}},{key:"__resetSyncedCount__",value:function(){this.__syncedCount__=0}},{key:"__incrementSyncedCount__",value:function(){this.__syncedCount__+=1}},{key:"__dispatchNegativeSeeking__",value:function(){this.__debugMessage__("The stage of Songle Sync is seeking the `songlePlayer.media.positionTime` in the negative direction")}},{key:"__dispatchPositiveSeeking__",value:function(){this.__debugMessage__("The stage of Songle Sync is seeking the `songlePlayer.media.positionTime` in the positive direction")}},{key:"__dispatchUnsync__",value:function(){this.unsyncedCount%10==0&&(this.allowableOffsetTimeThreshold*=2)}},{key:"__dispatchSync__",value:function(){this.__debugMessage__("The stage of Songle Sync was synced with the `songlePlayer.media.positionTime`");var l=-this.minAllowableOffsetTimeThreshold/2,v=this.minAllowableOffsetTimeThreshold/2;this.offsetTime>l&&this.offsetTime<v&&(this.allowableOffsetTimeThreshold=this.minAllowableOffsetTimeThreshold)}},{key:"__suspendStateWorker__",value:function(){return!this.plugin.stateWorker.skipMediaStateChange&&!(S.default.currentClockTime<this.__stateWorkerRestartTime__)&&(this.plugin.stateWorker.skipMediaStateChange=!this.plugin.stateWorker.skipMediaStateChange,this.player.media.pause(),this.__stateWorkerRestartTime__=S.default.currentClockTime+Math.abs(this.offsetTime),this.intervalTime=1,!0)}},{key:"__restartStateWorker__",value:function(){return!!this.plugin.stateWorker.skipMediaStateChange&&!(S.default.currentClockTime<this.__stateWorkerRestartTime__)&&(this.plugin.stateWorker.skipMediaStateChange=!this.plugin.stateWorker.skipMediaStateChange,this.player.media.play(),this.intervalTime=this.defaultIntervalTime,!0)}},{key:"defaultIntervalTime",get:function(){return 1e3}},{key:"minIntervalTime",get:function(){return 0}},{key:"maxIntervalTime",get:function(){return 6e4}},{key:"minAllowableOffsetTimeThreshold",get:function(){return this.__minAllowableOffsetTimeThreshold__}},{key:"maxAllowableOffsetTimeThreshold",get:function(){return this.__maxAllowableOffsetTimeThreshold__}},{key:"allowableOffsetTimeThreshold",get:function(){return this.__allowableOffsetTimeThreshold__},set:function(l){l<this.minAllowableOffsetTimeThreshold&&(l=this.minAllowableOffsetTimeThreshold),l>this.maxAllowableOffsetTimeThreshold&&(l=this.maxAllowableOffsetTimeThreshold),this.__allowableOffsetTimeThreshold__=l}},{key:"negativeOffsetTimeThreshold",get:function(){return-this.__allowableOffsetTimeThreshold__/2}},{key:"positiveOffsetTimeThreshold",get:function(){return this.__allowableOffsetTimeThreshold__/2}},{key:"offsetTime",get:function(){return this.__offsetTime__}},{key:"negativeSeekingCount",get:function(){return this.__negativeSeekingCount__}},{key:"positiveSeekingCount",get:function(){return this.__positiveSeekingCount__}},{key:"unsyncedCount",get:function(){return this.__negativeSeekingCount__+this.__positiveSeekingCount__}},{key:"syncedCount",get:function(){return this.__syncedCount__}},{key:"syncedCountThreshold",get:function(){return this.__syncedCountThreshold__},set:function(l){l<1?P.default.warn("Couldn't set the 'songlePlayer.stageSyncedCountThreshold' less than ".concat(1)):l>10?P.default.warn("Couldn't set the 'songlePlayer.stageSyncedCountThreshold' more than ".concat(10)):this.__syncedCountThreshold__=l}}])&&O(o.prototype,t),s}(I.default);x.default=g},74:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(28),S=u(20);function p(a,o,t,r,s,l,v){try{var b=a[l](v),d=b.value}catch(y){return void t(y)}b.done?o(d):Promise.resolve(d).then(r,s)}function O(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function h(a,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function c(a,o){return(c=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(a,o)}function e(a){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var t,r=_(a);if(o){var s=_(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return f(this,t)}}function f(a,o){return!o||typeof o!="object"&&typeof o!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a):o}function _(a){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(a)}var g=function(a){(function(b,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),d&&c(b,d)})(v,a);var o,t,r,s,l=e(v);function v(){return O(this,v),l.apply(this,arguments)}return o=v,(t=[{key:"runTask",value:(r=k.a.mark(function b(){return k.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,S.HistoryAPI.createHistory(this.plugin);case 3:d.next=7;break;case 5:d.prev=5,d.t0=d.catch(0);case 7:case"end":return d.stop()}},b,this,[[0,5]])}),s=function(){var b=this,d=arguments;return new Promise(function(y,n){var i=r.apply(b,d);function C(N){p(i,y,n,C,R,"next",N)}function R(N){p(i,y,n,C,R,"throw",N)}C(void 0)})},function(){return s.apply(this,arguments)})},{key:"defaultIntervalTime",get:function(){return 3e4}},{key:"minIntervalTime",get:function(){return 15e3}},{key:"maxIntervalTime",get:function(){return 6e4}}])&&h(o.prototype,t),v}(P.default);x.default=g},77:function(H,x,u){u.r(x);var I=u(4),k=u.n(I),P=u(19),S=u(6),p=u(2),O=u(66),h=u(1),c=u(30),e=u(32),f=u(12),_=u(62);function g(n,i,C,R,N,E,w){try{var M=n[E](w),m=M.value}catch(T){return void C(T)}M.done?i(m):Promise.resolve(m).then(R,N)}function a(n){return function(){var i=this,C=arguments;return new Promise(function(R,N){var E=n.apply(i,C);function w(m){g(E,R,N,w,M,"next",m)}function M(m){g(E,R,N,w,M,"throw",m)}w(void 0)})}}function o(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function t(n,i){for(var C=0;C<i.length;C++){var R=i[C];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(n,R.key,R)}}function r(n,i,C){return i&&t(n.prototype,i),C&&t(n,C),n}function s(n,i){return(s=Object.setPrototypeOf||function(C,R){return C.__proto__=R,C})(n,i)}function l(n){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var C,R=d(n);if(i){var N=d(this).constructor;C=Reflect.construct(R,arguments,N)}else C=R.apply(this,arguments);return v(this,C)}}function v(n,i){return!i||typeof i!="object"&&typeof i!="function"?b(n):i}function b(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function d(n){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(n)}var y=function(n){(function(w,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(M&&M.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),M&&s(w,M)})(E,n);var i,C,R,N=l(E);function E(){var w,M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};o(this,E),(w=N.call(this)).__dispatchers__=[],w.__mediaCaches__=[],w.__accessToken__=M.accessToken,w.__secretToken__=M.secretToken,w.__mediaElement__=M.mediaElement;var m=[{source:"durationTime",target:"duration",warning:!0},{source:"positionTime",target:"position",warning:!0}];return m.forEach(function(T){Object.defineProperty(b(w),T.target,{get:function(){return T.warning&&p.default.warn("'Player.".concat(T.target,"' is obsolete API, please use 'Player.").concat(T.source,"'")),w[T.source]}})}),w}return r(E,null,[{key:"Name",get:function(){return"player"}},{key:"Type",get:function(){return"player"}},{key:"MinVolume",get:function(){return 0}},{key:"MaxVolume",get:function(){return 100}}]),r(E,[{key:"activate",value:(R=a(k.a.mark(function w(){return k.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.__media__!=null){M.next=3;break}return p.default.warn("Player don't has a media, Please set a media using 'Songle.Player#useMedia'"),M.abrupt("return");case 3:return M.abrupt("return",this.media.activate());case 4:case"end":return M.stop()}},w,this)})),function(){return R.apply(this,arguments)})},{key:"useMedia",value:(C=a(k.a.mark(function w(M){var m,T,j,L,W,A,D,z=this,B=arguments;return k.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:m=B.length>1&&B[1]!==void 0?B[1]:{},M.options&&p.default.warn("The 1st arg of `SongleAPI.Player.useMedia` exists the `options` attribute, but it's ignored"),m.altSourceUrl=m.altSourceUrl!=null?m.altSourceUrl:m.src!=null?m.src:null,m.element=m.element!=null?m.element:m.rootElement!=null?m.rootElement:null,m.controls=m.controls!=null?m.controls:m.showCtrl!=null?m.showCtrl:null,m.width=m.width!=null?m.width:m.width!=null?m.videoSizeW:null,m.height=m.height!=null?m.height:m.height!=null?m.videoSizeH:null,m.endpointScheme=m.endpointScheme!=null?m.endpointScheme:null,m.endpointHost=m.endpointHost!=null?m.endpointHost:null,m.endpointPath=m.endpointPath!=null?m.endpointPath:null,m.fallback=m.fallback!=null?m.fallback:null,m.headless=m.headless!=null&&m.headless,m.altSourceUrl=m.altSourceUrl!=null?m.altSourceUrl:null,m.element=m.element!=null?m.element:this.mediaElement,m.controls=m.controls!=null&&m.controls,m.playsinline=m.playsinline==null||m.playsinline,m.width=m.width!=null?m.width:256,m.height=m.height!=null?m.height:144,M instanceof e.default&&(m.headless=!0),p.default.debug("Songle.Player#useMedia options",m),m.width<200&&m.height<200&&p.default.warn("Video size is too small, please check the terms of use of this video provider"),U.t0=!0,U.next=U.t0===(M==null)?24:U.t0===(h.default.typeOf(M)==="string")?25:U.t0===(h.default.typeOf(M)==="object"&&M.mediaSourceUrl!=null)?27:U.t0===(h.default.typeOf(M)==="object"&&M.permalink!=null)?29:U.t0===(h.default.typeOf(M)==="object"&&M.sourceUrl!=null)?31:U.t0===(h.default.typeOf(M)==="object"&&M.src!=null)?33:35;break;case 24:return U.abrupt("return");case 25:return T=M,U.abrupt("break",37);case 27:return T=M.mediaSourceUrl,U.abrupt("break",37);case 29:return T=M.permalink,U.abrupt("break",37);case 31:return T=M.sourceUrl,U.abrupt("break",37);case 33:return T=M.src,U.abrupt("break",37);case 35:return p.default.error("Requested new media is unsupported with 'Songle.Player#useMedia'"),U.abrupt("return");case 37:return U.next=39,Promise.all(this.dispatchers.map(function(J){return J&&J.mediaTryMount(z,{newMediaSourceUrl:T})}));case 39:return j=m.endpointScheme,L=m.endpointHost,W=m.endpointPath,A=m.headless,U.next=45,f.SongAPI.get(T,{endpointScheme:j,endpointHost:L,endpointPath:W});case 45:if(D=U.sent,this.__media__==null){U.next=58;break}U.t1=this.__media__.dispatcherName,U.next=U.t1===e.default.Name?50:54;break;case 50:if(!A||m.altSourceUrl){U.next=53;break}if(this.__media__.sourceUrl!==D.attributes.permalink){U.next=53;break}return U.abrupt("return");case 53:return U.abrupt("break",58);case 54:if(A||m.altSourceUrl){U.next=57;break}if(this.__media__.sourceUrl!==D.attributes.permalink){U.next=57;break}return U.abrupt("return");case 57:return U.abrupt("break",58);case 58:if(!this.__mediaTransaction__){U.next=61;break}return p.default.warn("Before finish 'Songle.Player#useMedia', it was called again. please check it using 'mediaReady' event"),U.abrupt("return");case 61:return this.__mediaTransaction__=!this.__mediaTransaction__,U.next=64,Promise.all(this.dispatchers.map(function(J){return J&&J.mediaDisMount(z)}));case 64:if(this.media!=null&&this.media.hideElement(),this.media!=null&&this.mediaCaches.find(function(J){return J==z.media})==null&&this.media.dispose(),U.t2=this.__getCachedMedia__(D,m),U.t2){U.next=71;break}return U.next=70,O.default.create(this,D,m);case 70:U.t2=U.sent;case 71:return this.__media__=U.t2,this.media!=null&&this.media.showElement(m),U.next=75,Promise.all(this.dispatchers.map(function(J){return J&&J.mediaDidMount(z)}));case 75:return this.invokeTrap("mediaReady",{target:this,data:{media:this.__media__}}),this.__mediaTransaction__=!this.__mediaTransaction__,U.abrupt("return",this.__media__);case 78:case"end":return U.stop()}},w,this)})),function(w){return C.apply(this,arguments)})},{key:"cacheMedia",value:(i=a(k.a.mark(function w(M){var m,T=this;return k.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:j.t0=h.default.typeOf(M),j.next=j.t0==="array"?3:j.t0==="object"?5:j.t0==="string"?7:9;break;case 3:return M=M.map(function(L){return h.default.typeOf(L)=="string"?{mediaSourceUrl:L}:L}),j.abrupt("break",9);case 5:return M=[M],j.abrupt("break",9);case 7:return M=[{mediaSourceUrl:M}],j.abrupt("break",9);case 9:return j.next=11,Promise.all(M.map(function(){var L=a(k.a.mark(function W(A){var D,z,B;return k.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return(D=A.options!=null?A.options:{}).endpointScheme=D.endpointScheme!=null?D.endpointScheme:null,D.endpointHost=D.endpointHost!=null?D.endpointHost:null,D.endpointPath=D.endpointPath!=null?D.endpointPath:null,D.headless=D.headless!=null&&D.headless,D.altSourceUrl=D.altSourceUrl!=null?D.altSourceUrl:null,D.element=D.element!=null?D.element:T.mediaElement,D.controls=D.controls!=null&&D.controls,D.width=D.width!=null?D.width:256,D.height=D.height!=null?D.height:144,U.next=12,f.SongAPI.get(A.mediaSourceUrl,D);case 12:return z=U.sent,U.next=15,O.default.create(T,z,D);case 15:return(B=U.sent).altSourceUrl=D.altSourceUrl,T.mediaCaches.push(B),U.abrupt("return",B);case 19:case"end":return U.stop()}},W)}));return function(W){return L.apply(this,arguments)}}()));case 11:return m=j.sent,j.abrupt("return",m);case 13:case"end":return j.stop()}},w)})),function(w){return i.apply(this,arguments)})},{key:"addPlugin",value:function(w){this.hasPlugin(w.dispatcherName)?p.default.warn("'".concat(w.dispatcherName,"' is already installed")):(w.initialize(this),this.__dispatchers__.push(w))}},{key:"hasPlugin",value:function(w){return this.dispatchers.findIndex(function(M){return M&&M.dispatcherName===w})!=-1}},{key:"invokeTrap",value:function(w){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.dispatchers.forEach(function(m){m&&m.invokeSelfTrap(w,M)})}},{key:"play",value:function(){this.__media__!=null?this.media.play():p.default.warn("Player don't has a media, Please set a media using 'Songle.Player#useMedia'")}},{key:"pause",value:function(){this.__media__!=null?this.media.pause():p.default.warn("Player don't has a media, Please set a media using 'Songle.Player#useMedia'")}},{key:"stop",value:function(){this.__media__!=null?this.media.stop():p.default.warn("Player don't has a media, Please set a media using 'Songle.Player#useMedia'")}},{key:"seekTo",value:function(w){this.__media__!=null?this.invokeTrap("seek",{target:this,data:{positionTime:w}}):p.default.warn("Player don't has a media, Please set a media using 'Songle.Player#useMedia'")}},{key:"__getCachedMedia__",value:function(w,M){return this.mediaCaches.find(function(m){var T;switch(!0){case w==null:return!1;case h.default.typeOf(w)==="string":T=w;break;case(h.default.typeOf(w)==="object"&&w.targetMediaSourceUrl!=null):T=w.targetMediaSourceUrl;break;case(h.default.typeOf(w)==="object"&&w.permalink!=null):T=w.permalink;break;case(h.default.typeOf(w)==="object"&&w.sourceUrl!=null):T=w.sourceUrl;break;case(h.default.typeOf(w)==="object"&&w.src!=null):T=w.src;break;default:return!1}var j=m.sourceUrl===T,L=M.headless&&m.originalPlayer==null||!M.headless&&m.originalPlayer!=null,W=M.altSourceUrl&&M.altSourceUrl==m.altSourceUrl||!M.altSourceUrl;return j&&L&&W})}},{key:"dispatcherName",get:function(){return E.Name}},{key:"dispatcherType",get:function(){return E.Type}},{key:"accessToken",get:function(){return this.__accessToken__||""},set:function(w){this.__accessToken__=w}},{key:"secretToken",get:function(){return this.__secretToken__||""},set:function(w){this.__secretToken__=w}},{key:"mediaElement",get:function(){return c.default.querySelector(this.__mediaElement__)},set:function(w){this.__mediaElement__=w}},{key:"dispatchers",get:function(){return this.__dispatchers__.concat([this,this.media])}},{key:"media",get:function(){return this.__media__}},{key:"mediaCaches",get:function(){return this.__mediaCaches__}},{key:"musicMap",get:function(){return this.__media__==null?null:this.__media__.musicMap}},{key:"isReady",get:function(){return this.media==null?S.default.DefaultStateReady:this.media.isReady}},{key:"isPlaying",get:function(){return this.media==null?S.default.DefaultStatePlaying:this.media.isPlaying}},{key:"isPaused",get:function(){return this.media==null?S.default.DefaultStatePaused:this.media.isPaused}},{key:"isSeeking",get:function(){return this.media==null?S.default.DefaultStateSeeking:this.media.isSeeking}},{key:"durationTime",get:function(){return this.media==null?0:this.hasPlugin(_.default.Name)?this.playlist.mediaDurationTime:this.media.durationTime}},{key:"positionTime",get:function(){return this.__media__==null?0:this.hasPlugin(_.default.Name)?this.playlist.mediaPositionTime:this.media.positionTime}},{key:"muted",get:function(){return this.__media__!=null&&this.media.muted},set:function(w){this.__media__!=null&&(this.media.muted=w)}},{key:"volume",get:function(){return this.__media__==null?100:this.media.volume},set:function(w){this.__media__!=null&&(this.media.volume=w<0?0:w>100?100:w)}}]),E}(P.default);x.default=y},78:function(H,x,u){var I=u(95),k=u(96);H.exports=function(P,S,p){var O=S&&p||0;typeof P=="string"&&(S=P==="binary"?new Array(16):null,P=null);var h=(P=P||{}).random||(P.rng||I)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,S)for(var c=0;c<16;++c)S[O+c]=h[c];return S||k(h)}},8:function(H,x,u){u.r(x);var I=u(1);function k(){return document.querySelector(".".concat("songle-api-license"))}var P={createLicense:function(S){if(!I.default.isStandalone){var p=k();if(!p){switch((p=document.createElement("img")).className="songle-api-license",p.style.cursor="pointer",p.style.borderRadius="4px",p.style.position="fixed",p.style.zIndex="9999",S){case"left-top":p.style.left="4px",p.style.top="4px",p.style.width="24px",p.style.height="24px";break;case"left-bottom":p.style.left="4px",p.style.bottom="4px",p.style.width="24px",p.style.height="24px";break;case"right-top":p.style.right="4px",p.style.top="4px",p.style.width="24px",p.style.height="24px";break;default:case"right-bottom":p.style.right="4px",p.style.bottom="4px",p.style.width="24px",p.style.height="24px"}p.alt="Powered by Songle API",p.src="https://api.songle.jp/license-icons/songle.png",p.width=24,p.height=24,p.addEventListener("click",function(O){return open("https://api.songle.jp")},!1),p.addEventListener("touch",function(O){return open("https://api.songle.jp")},!1),document.body&&document.body.appendChild(p)}}},removeLicense:function(){if(!I.default.isStandalone){var S=k();S&&S.remove()}}};x.default=P},83:function(H,x,u){u.r(x);var I=u(30),k=u(1),P="https://w.soundcloud.com/player/api.js",S={importClass:function(){return new Promise(function(p,O){if(k.default.ScFactoryClass)return p(k.default.ScFactoryClass);(options.element||k.default.global.document.body).appendChild(I.default.createScriptElement(P,{onAbort:function(h){return O()},onError:function(h){return O()},onLoad:function(h){var c=setInterval(function(){k.default.global.SC&&(k.default.ScFactoryClass=k.default.global.SC,k.default.ScFactoryClass&&(clearInterval(c),read(k.default.ScFactoryClass)))},1)}}))})}};x.default=S},95:function(H,x){var u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(u){var I=new Uint8Array(16);H.exports=function(){return u(I),I}}else{var k=new Array(16);H.exports=function(){for(var P,S=0;S<16;S++)!(3&S)&&(P=4294967296*Math.random()),k[S]=P>>>((3&S)<<3)&255;return k}}},96:function(H,x){for(var u=[],I=0;I<256;++I)u[I]=(I+256).toString(16).substr(1);H.exports=function(k,P){var S=P||0,p=u;return[p[k[S++]],p[k[S++]],p[k[S++]],p[k[S++]],"-",p[k[S++]],p[k[S++]],"-",p[k[S++]],p[k[S++]],"-",p[k[S++]],p[k[S++]],"-",p[k[S++]],p[k[S++]],p[k[S++]],p[k[S++]],p[k[S++]],p[k[S++]]].join("")}}})})})(se);var K,ne;function le(){return ne||(ne=1,K={XMLHttpRequest:window.XMLHttpRequest,XMLHttpRequestUpload:window.XMLHttpRequestUpload,FormData:window.FormData}),K}/**
 * @author Takahiro INOUE <takahiro.inoue@aist.go.jp>
 * @license Copyright (c) 2017-2019 AIST Songle Project
 */(function(V){(function(Y){var H=ee.default;Y.XMLHttpRequest||(Y.XMLHttpRequest=le().XMLHttpRequest),"process"in Y&&(V.exports=H),Y.Songle=H})((Z||0).self||Z)})(ue);const ce=$,_e=oe({__proto__:null,default:ce},[$]);export{_e as m};
